var gd=Object.defineProperty;var Ed=(t,e,n)=>e in t?gd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var R=(t,e,n)=>Ed(t,typeof e!="symbol"?e+"":e,n);function vd(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function yd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hl={exports:{}},Oi={},jl={exports:{}},B={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cr=Symbol.for("react.element"),Sd=Symbol.for("react.portal"),Td=Symbol.for("react.fragment"),Cd=Symbol.for("react.strict_mode"),Ad=Symbol.for("react.profiler"),Id=Symbol.for("react.provider"),Nd=Symbol.for("react.context"),Rd=Symbol.for("react.forward_ref"),Md=Symbol.for("react.suspense"),Dd=Symbol.for("react.memo"),Od=Symbol.for("react.lazy"),va=Symbol.iterator;function Ld(t){return t===null||typeof t!="object"?null:(t=va&&t[va]||t["@@iterator"],typeof t=="function"?t:null)}var Wl={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vl=Object.assign,bl={};function Ln(t,e,n){this.props=t,this.context=e,this.refs=bl,this.updater=n||Wl}Ln.prototype.isReactComponent={};Ln.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ln.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Yl(){}Yl.prototype=Ln.prototype;function Ao(t,e,n){this.props=t,this.context=e,this.refs=bl,this.updater=n||Wl}var Io=Ao.prototype=new Yl;Io.constructor=Ao;Vl(Io,Ln.prototype);Io.isPureReactComponent=!0;var ya=Array.isArray,zl=Object.prototype.hasOwnProperty,No={current:null},$l={key:!0,ref:!0,__self:!0,__source:!0};function Kl(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)zl.call(e,r)&&!$l.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Cr,type:t,key:s,ref:o,props:i,_owner:No.current}}function kd(t,e){return{$$typeof:Cr,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ro(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cr}function xd(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Sa=/\/+/g;function Zi(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xd(""+t.key):e.toString(36)}function zr(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Cr:case Sd:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Zi(o,0):r,ya(i)?(n="",t!=null&&(n=t.replace(Sa,"$&/")+"/"),zr(i,e,n,"",function(u){return u})):i!=null&&(Ro(i)&&(i=kd(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Sa,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",ya(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Zi(s,a);o+=zr(s,e,n,l,i)}else if(l=Ld(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Zi(s,a++),o+=zr(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Or(t,e,n){if(t==null)return t;var r=[],i=0;return zr(t,r,"","",function(s){return e.call(n,s,i++)}),r}function wd(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Te={current:null},$r={transition:null},Pd={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:$r,ReactCurrentOwner:No};function Ql(){throw Error("act(...) is not supported in production builds of React.")}B.Children={map:Or,forEach:function(t,e,n){Or(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Or(t,function(){e++}),e},toArray:function(t){return Or(t,function(e){return e})||[]},only:function(t){if(!Ro(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};B.Component=Ln;B.Fragment=Td;B.Profiler=Ad;B.PureComponent=Ao;B.StrictMode=Cd;B.Suspense=Md;B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pd;B.act=Ql;B.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Vl({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=No.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)zl.call(e,l)&&!$l.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Cr,type:t.type,key:i,ref:s,props:r,_owner:o}};B.createContext=function(t){return t={$$typeof:Nd,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Id,_context:t},t.Consumer=t};B.createElement=Kl;B.createFactory=function(t){var e=Kl.bind(null,t);return e.type=t,e};B.createRef=function(){return{current:null}};B.forwardRef=function(t){return{$$typeof:Rd,render:t}};B.isValidElement=Ro;B.lazy=function(t){return{$$typeof:Od,_payload:{_status:-1,_result:t},_init:wd}};B.memo=function(t,e){return{$$typeof:Dd,type:t,compare:e===void 0?null:e}};B.startTransition=function(t){var e=$r.transition;$r.transition={};try{t()}finally{$r.transition=e}};B.unstable_act=Ql;B.useCallback=function(t,e){return Te.current.useCallback(t,e)};B.useContext=function(t){return Te.current.useContext(t)};B.useDebugValue=function(){};B.useDeferredValue=function(t){return Te.current.useDeferredValue(t)};B.useEffect=function(t,e){return Te.current.useEffect(t,e)};B.useId=function(){return Te.current.useId()};B.useImperativeHandle=function(t,e,n){return Te.current.useImperativeHandle(t,e,n)};B.useInsertionEffect=function(t,e){return Te.current.useInsertionEffect(t,e)};B.useLayoutEffect=function(t,e){return Te.current.useLayoutEffect(t,e)};B.useMemo=function(t,e){return Te.current.useMemo(t,e)};B.useReducer=function(t,e,n){return Te.current.useReducer(t,e,n)};B.useRef=function(t){return Te.current.useRef(t)};B.useState=function(t){return Te.current.useState(t)};B.useSyncExternalStore=function(t,e,n){return Te.current.useSyncExternalStore(t,e,n)};B.useTransition=function(){return Te.current.useTransition()};B.version="18.3.1";jl.exports=B;var I=jl.exports;const Xl=yd(I),Gd=vd({__proto__:null,default:Xl},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bd=I,Fd=Symbol.for("react.element"),_d=Symbol.for("react.fragment"),Ud=Object.prototype.hasOwnProperty,Hd=Bd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jd={key:!0,ref:!0,__self:!0,__source:!0};function Zl(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Ud.call(e,r)&&!jd.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Fd,type:t,key:s,ref:o,props:i,_owner:Hd.current}}Oi.Fragment=_d;Oi.jsx=Zl;Oi.jsxs=Zl;Hl.exports=Oi;var p=Hl.exports,Is={},Jl={exports:{}},xe={},ql={exports:{}},eu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(w,P){var G=w.length;w.push(P);e:for(;0<G;){var Z=G-1>>>1,oe=w[Z];if(0<i(oe,P))w[Z]=P,w[G]=oe,G=Z;else break e}}function n(w){return w.length===0?null:w[0]}function r(w){if(w.length===0)return null;var P=w[0],G=w.pop();if(G!==P){w[0]=G;e:for(var Z=0,oe=w.length,Mr=oe>>>1;Z<Mr;){var Gt=2*(Z+1)-1,Xi=w[Gt],Bt=Gt+1,Dr=w[Bt];if(0>i(Xi,G))Bt<oe&&0>i(Dr,Xi)?(w[Z]=Dr,w[Bt]=G,Z=Bt):(w[Z]=Xi,w[Gt]=G,Z=Gt);else if(Bt<oe&&0>i(Dr,G))w[Z]=Dr,w[Bt]=G,Z=Bt;else break e}}return P}function i(w,P){var G=w.sortIndex-P.sortIndex;return G!==0?G:w.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],g=1,E=null,y=3,S=!1,h=!1,v=!1,m=typeof setTimeout=="function"?setTimeout:null,d=typeof clearTimeout=="function"?clearTimeout:null,c=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(w){for(var P=n(u);P!==null;){if(P.callback===null)r(u);else if(P.startTime<=w)r(u),P.sortIndex=P.expirationTime,e(l,P);else break;P=n(u)}}function T(w){if(v=!1,f(w),!h)if(n(l)!==null)h=!0,wn(A);else{var P=n(u);P!==null&&nn(T,P.startTime-w)}}function A(w,P){h=!1,v&&(v=!1,d(M),M=-1),S=!0;var G=y;try{for(f(P),E=n(l);E!==null&&(!(E.expirationTime>P)||w&&!F());){var Z=E.callback;if(typeof Z=="function"){E.callback=null,y=E.priorityLevel;var oe=Z(E.expirationTime<=P);P=t.unstable_now(),typeof oe=="function"?E.callback=oe:E===n(l)&&r(l),f(P)}else r(l);E=n(l)}if(E!==null)var Mr=!0;else{var Gt=n(u);Gt!==null&&nn(T,Gt.startTime-P),Mr=!1}return Mr}finally{E=null,y=G,S=!1}}var N=!1,C=null,M=-1,L=5,O=-1;function F(){return!(t.unstable_now()-O<L)}function ue(){if(C!==null){var w=t.unstable_now();O=w;var P=!0;try{P=C(!0,w)}finally{P?He():(N=!1,C=null)}}else N=!1}var He;if(typeof c=="function")He=function(){c(ue)};else if(typeof MessageChannel<"u"){var ft=new MessageChannel,nt=ft.port2;ft.port1.onmessage=ue,He=function(){nt.postMessage(null)}}else He=function(){m(ue,0)};function wn(w){C=w,N||(N=!0,He())}function nn(w,P){M=m(function(){w(t.unstable_now())},P)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(w){w.callback=null},t.unstable_continueExecution=function(){h||S||(h=!0,wn(A))},t.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<w?Math.floor(1e3/w):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(w){switch(y){case 1:case 2:case 3:var P=3;break;default:P=y}var G=y;y=P;try{return w()}finally{y=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(w,P){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var G=y;y=w;try{return P()}finally{y=G}},t.unstable_scheduleCallback=function(w,P,G){var Z=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Z+G:Z):G=Z,w){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=G+oe,w={id:g++,callback:P,priorityLevel:w,startTime:G,expirationTime:oe,sortIndex:-1},G>Z?(w.sortIndex=G,e(u,w),n(l)===null&&w===n(u)&&(v?(d(M),M=-1):v=!0,nn(T,G-Z))):(w.sortIndex=oe,e(l,w),h||S||(h=!0,wn(A))),w},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(w){var P=y;return function(){var G=y;y=P;try{return w.apply(this,arguments)}finally{y=G}}}})(eu);ql.exports=eu;var Wd=ql.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vd=I,ke=Wd;function D(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tu=new Set,nr={};function Zt(t,e){An(t,e),An(t+"Capture",e)}function An(t,e){for(nr[t]=e,t=0;t<e.length;t++)tu.add(e[t])}var lt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ns=Object.prototype.hasOwnProperty,bd=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ta={},Ca={};function Yd(t){return Ns.call(Ca,t)?!0:Ns.call(Ta,t)?!1:bd.test(t)?Ca[t]=!0:(Ta[t]=!0,!1)}function zd(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $d(t,e,n,r){if(e===null||typeof e>"u"||zd(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ce(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var he={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){he[t]=new Ce(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];he[e]=new Ce(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){he[t]=new Ce(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){he[t]=new Ce(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){he[t]=new Ce(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){he[t]=new Ce(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){he[t]=new Ce(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){he[t]=new Ce(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){he[t]=new Ce(t,5,!1,t.toLowerCase(),null,!1,!1)});var Mo=/[\-:]([a-z])/g;function Do(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Mo,Do);he[e]=new Ce(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Mo,Do);he[e]=new Ce(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Mo,Do);he[e]=new Ce(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){he[t]=new Ce(t,1,!1,t.toLowerCase(),null,!1,!1)});he.xlinkHref=new Ce("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){he[t]=new Ce(t,1,!1,t.toLowerCase(),null,!0,!0)});function Oo(t,e,n,r){var i=he.hasOwnProperty(e)?he[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($d(e,n,i,r)&&(n=null),r||i===null?Yd(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ht=Vd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lr=Symbol.for("react.element"),sn=Symbol.for("react.portal"),on=Symbol.for("react.fragment"),Lo=Symbol.for("react.strict_mode"),Rs=Symbol.for("react.profiler"),nu=Symbol.for("react.provider"),ru=Symbol.for("react.context"),ko=Symbol.for("react.forward_ref"),Ms=Symbol.for("react.suspense"),Ds=Symbol.for("react.suspense_list"),xo=Symbol.for("react.memo"),pt=Symbol.for("react.lazy"),iu=Symbol.for("react.offscreen"),Aa=Symbol.iterator;function Pn(t){return t===null||typeof t!="object"?null:(t=Aa&&t[Aa]||t["@@iterator"],typeof t=="function"?t:null)}var K=Object.assign,Ji;function Wn(t){if(Ji===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ji=e&&e[1]||""}return`
`+Ji+t}var qi=!1;function es(t,e){if(!t||qi)return"";qi=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{qi=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wn(t):""}function Kd(t){switch(t.tag){case 5:return Wn(t.type);case 16:return Wn("Lazy");case 13:return Wn("Suspense");case 19:return Wn("SuspenseList");case 0:case 2:case 15:return t=es(t.type,!1),t;case 11:return t=es(t.type.render,!1),t;case 1:return t=es(t.type,!0),t;default:return""}}function Os(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case on:return"Fragment";case sn:return"Portal";case Rs:return"Profiler";case Lo:return"StrictMode";case Ms:return"Suspense";case Ds:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ru:return(t.displayName||"Context")+".Consumer";case nu:return(t._context.displayName||"Context")+".Provider";case ko:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xo:return e=t.displayName||null,e!==null?e:Os(t.type)||"Memo";case pt:e=t._payload,t=t._init;try{return Os(t(e))}catch{}}return null}function Qd(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Os(e);case 8:return e===Lo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Lt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function su(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Xd(t){var e=su(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function kr(t){t._valueTracker||(t._valueTracker=Xd(t))}function ou(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=su(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function si(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ls(t,e){var n=e.checked;return K({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ia(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Lt(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function au(t,e){e=e.checked,e!=null&&Oo(t,"checked",e,!1)}function ks(t,e){au(t,e);var n=Lt(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xs(t,e.type,n):e.hasOwnProperty("defaultValue")&&xs(t,e.type,Lt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Na(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function xs(t,e,n){(e!=="number"||si(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vn=Array.isArray;function En(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Lt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ws(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(D(91));return K({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ra(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(D(92));if(Vn(n)){if(1<n.length)throw Error(D(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Lt(n)}}function lu(t,e){var n=Lt(e.value),r=Lt(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ma(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uu(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ps(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uu(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xr,cu=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xr=xr||document.createElement("div"),xr.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function rr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $n={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zd=["Webkit","ms","Moz","O"];Object.keys($n).forEach(function(t){Zd.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$n[e]=$n[t]})});function du(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$n.hasOwnProperty(t)&&$n[t]?(""+e).trim():e+"px"}function hu(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=du(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Jd=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gs(t,e){if(e){if(Jd[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(D(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(D(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(D(61))}if(e.style!=null&&typeof e.style!="object")throw Error(D(62))}}function Bs(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fs=null;function wo(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _s=null,vn=null,yn=null;function Da(t){if(t=Nr(t)){if(typeof _s!="function")throw Error(D(280));var e=t.stateNode;e&&(e=Pi(e),_s(t.stateNode,t.type,e))}}function fu(t){vn?yn?yn.push(t):yn=[t]:vn=t}function mu(){if(vn){var t=vn,e=yn;if(yn=vn=null,Da(t),e)for(t=0;t<e.length;t++)Da(e[t])}}function pu(t,e){return t(e)}function gu(){}var ts=!1;function Eu(t,e,n){if(ts)return t(e,n);ts=!0;try{return pu(t,e,n)}finally{ts=!1,(vn!==null||yn!==null)&&(gu(),mu())}}function ir(t,e){var n=t.stateNode;if(n===null)return null;var r=Pi(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(D(231,e,typeof n));return n}var Us=!1;if(lt)try{var Gn={};Object.defineProperty(Gn,"passive",{get:function(){Us=!0}}),window.addEventListener("test",Gn,Gn),window.removeEventListener("test",Gn,Gn)}catch{Us=!1}function qd(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(g){this.onError(g)}}var Kn=!1,oi=null,ai=!1,Hs=null,eh={onError:function(t){Kn=!0,oi=t}};function th(t,e,n,r,i,s,o,a,l){Kn=!1,oi=null,qd.apply(eh,arguments)}function nh(t,e,n,r,i,s,o,a,l){if(th.apply(this,arguments),Kn){if(Kn){var u=oi;Kn=!1,oi=null}else throw Error(D(198));ai||(ai=!0,Hs=u)}}function Jt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vu(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Oa(t){if(Jt(t)!==t)throw Error(D(188))}function rh(t){var e=t.alternate;if(!e){if(e=Jt(t),e===null)throw Error(D(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Oa(i),t;if(s===r)return Oa(i),e;s=s.sibling}throw Error(D(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?t:e}function yu(t){return t=rh(t),t!==null?Su(t):null}function Su(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Su(t);if(e!==null)return e;t=t.sibling}return null}var Tu=ke.unstable_scheduleCallback,La=ke.unstable_cancelCallback,ih=ke.unstable_shouldYield,sh=ke.unstable_requestPaint,q=ke.unstable_now,oh=ke.unstable_getCurrentPriorityLevel,Po=ke.unstable_ImmediatePriority,Cu=ke.unstable_UserBlockingPriority,li=ke.unstable_NormalPriority,ah=ke.unstable_LowPriority,Au=ke.unstable_IdlePriority,Li=null,et=null;function lh(t){if(et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(Li,t,void 0,(t.current.flags&128)===128)}catch{}}var ze=Math.clz32?Math.clz32:dh,uh=Math.log,ch=Math.LN2;function dh(t){return t>>>=0,t===0?32:31-(uh(t)/ch|0)|0}var wr=64,Pr=4194304;function bn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ui(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=bn(a):(s&=o,s!==0&&(r=bn(s)))}else o=n&~i,o!==0?r=bn(o):s!==0&&(r=bn(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ze(e),i=1<<n,r|=t[n],e&=~i;return r}function hh(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fh(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ze(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=hh(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function js(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Iu(){var t=wr;return wr<<=1,!(wr&4194240)&&(wr=64),t}function ns(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ar(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ze(e),t[e]=n}function mh(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ze(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Go(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ze(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var U=0;function Nu(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ru,Bo,Mu,Du,Ou,Ws=!1,Gr=[],Ct=null,At=null,It=null,sr=new Map,or=new Map,Et=[],ph="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ka(t,e){switch(t){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":sr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":or.delete(e.pointerId)}}function Bn(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Nr(e),e!==null&&Bo(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function gh(t,e,n,r,i){switch(e){case"focusin":return Ct=Bn(Ct,t,e,n,r,i),!0;case"dragenter":return At=Bn(At,t,e,n,r,i),!0;case"mouseover":return It=Bn(It,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return sr.set(s,Bn(sr.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,or.set(s,Bn(or.get(s)||null,t,e,n,r,i)),!0}return!1}function Lu(t){var e=Ht(t.target);if(e!==null){var n=Jt(e);if(n!==null){if(e=n.tag,e===13){if(e=vu(n),e!==null){t.blockedOn=e,Ou(t.priority,function(){Mu(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kr(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vs(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Fs=r,n.target.dispatchEvent(r),Fs=null}else return e=Nr(n),e!==null&&Bo(e),t.blockedOn=n,!1;e.shift()}return!0}function xa(t,e,n){Kr(t)&&n.delete(e)}function Eh(){Ws=!1,Ct!==null&&Kr(Ct)&&(Ct=null),At!==null&&Kr(At)&&(At=null),It!==null&&Kr(It)&&(It=null),sr.forEach(xa),or.forEach(xa)}function Fn(t,e){t.blockedOn===e&&(t.blockedOn=null,Ws||(Ws=!0,ke.unstable_scheduleCallback(ke.unstable_NormalPriority,Eh)))}function ar(t){function e(i){return Fn(i,t)}if(0<Gr.length){Fn(Gr[0],t);for(var n=1;n<Gr.length;n++){var r=Gr[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ct!==null&&Fn(Ct,t),At!==null&&Fn(At,t),It!==null&&Fn(It,t),sr.forEach(e),or.forEach(e),n=0;n<Et.length;n++)r=Et[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Et.length&&(n=Et[0],n.blockedOn===null);)Lu(n),n.blockedOn===null&&Et.shift()}var Sn=ht.ReactCurrentBatchConfig,ci=!0;function vh(t,e,n,r){var i=U,s=Sn.transition;Sn.transition=null;try{U=1,Fo(t,e,n,r)}finally{U=i,Sn.transition=s}}function yh(t,e,n,r){var i=U,s=Sn.transition;Sn.transition=null;try{U=4,Fo(t,e,n,r)}finally{U=i,Sn.transition=s}}function Fo(t,e,n,r){if(ci){var i=Vs(t,e,n,r);if(i===null)hs(t,e,r,di,n),ka(t,r);else if(gh(i,t,e,n,r))r.stopPropagation();else if(ka(t,r),e&4&&-1<ph.indexOf(t)){for(;i!==null;){var s=Nr(i);if(s!==null&&Ru(s),s=Vs(t,e,n,r),s===null&&hs(t,e,r,di,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else hs(t,e,r,null,n)}}var di=null;function Vs(t,e,n,r){if(di=null,t=wo(r),t=Ht(t),t!==null)if(e=Jt(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vu(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return di=t,null}function ku(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oh()){case Po:return 1;case Cu:return 4;case li:case ah:return 16;case Au:return 536870912;default:return 16}default:return 16}}var yt=null,_o=null,Qr=null;function xu(){if(Qr)return Qr;var t,e=_o,n=e.length,r,i="value"in yt?yt.value:yt.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Qr=i.slice(t,1<r?1-r:void 0)}function Xr(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Br(){return!0}function wa(){return!1}function we(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Br:wa,this.isPropagationStopped=wa,this}return K(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Br)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Br)},persist:function(){},isPersistent:Br}),e}var kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uo=we(kn),Ir=K({},kn,{view:0,detail:0}),Sh=we(Ir),rs,is,_n,ki=K({},Ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ho,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_n&&(_n&&t.type==="mousemove"?(rs=t.screenX-_n.screenX,is=t.screenY-_n.screenY):is=rs=0,_n=t),rs)},movementY:function(t){return"movementY"in t?t.movementY:is}}),Pa=we(ki),Th=K({},ki,{dataTransfer:0}),Ch=we(Th),Ah=K({},Ir,{relatedTarget:0}),ss=we(Ah),Ih=K({},kn,{animationName:0,elapsedTime:0,pseudoElement:0}),Nh=we(Ih),Rh=K({},kn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Mh=we(Rh),Dh=K({},kn,{data:0}),Ga=we(Dh),Oh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xh(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kh[t])?!!e[t]:!1}function Ho(){return xh}var wh=K({},Ir,{key:function(t){if(t.key){var e=Oh[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Lh[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ho,charCode:function(t){return t.type==="keypress"?Xr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ph=we(wh),Gh=K({},ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ba=we(Gh),Bh=K({},Ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ho}),Fh=we(Bh),_h=K({},kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uh=we(_h),Hh=K({},ki,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jh=we(Hh),Wh=[9,13,27,32],jo=lt&&"CompositionEvent"in window,Qn=null;lt&&"documentMode"in document&&(Qn=document.documentMode);var Vh=lt&&"TextEvent"in window&&!Qn,wu=lt&&(!jo||Qn&&8<Qn&&11>=Qn),Fa=" ",_a=!1;function Pu(t,e){switch(t){case"keyup":return Wh.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gu(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var an=!1;function bh(t,e){switch(t){case"compositionend":return Gu(e);case"keypress":return e.which!==32?null:(_a=!0,Fa);case"textInput":return t=e.data,t===Fa&&_a?null:t;default:return null}}function Yh(t,e){if(an)return t==="compositionend"||!jo&&Pu(t,e)?(t=xu(),Qr=_o=yt=null,an=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wu&&e.locale!=="ko"?null:e.data;default:return null}}var zh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ua(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zh[t.type]:e==="textarea"}function Bu(t,e,n,r){fu(r),e=hi(e,"onChange"),0<e.length&&(n=new Uo("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xn=null,lr=null;function $h(t){$u(t,0)}function xi(t){var e=cn(t);if(ou(e))return t}function Kh(t,e){if(t==="change")return e}var Fu=!1;if(lt){var os;if(lt){var as="oninput"in document;if(!as){var Ha=document.createElement("div");Ha.setAttribute("oninput","return;"),as=typeof Ha.oninput=="function"}os=as}else os=!1;Fu=os&&(!document.documentMode||9<document.documentMode)}function ja(){Xn&&(Xn.detachEvent("onpropertychange",_u),lr=Xn=null)}function _u(t){if(t.propertyName==="value"&&xi(lr)){var e=[];Bu(e,lr,t,wo(t)),Eu($h,e)}}function Qh(t,e,n){t==="focusin"?(ja(),Xn=e,lr=n,Xn.attachEvent("onpropertychange",_u)):t==="focusout"&&ja()}function Xh(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xi(lr)}function Zh(t,e){if(t==="click")return xi(e)}function Jh(t,e){if(t==="input"||t==="change")return xi(e)}function qh(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ke=typeof Object.is=="function"?Object.is:qh;function ur(t,e){if(Ke(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ns.call(e,i)||!Ke(t[i],e[i]))return!1}return!0}function Wa(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Va(t,e){var n=Wa(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wa(n)}}function Uu(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Uu(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hu(){for(var t=window,e=si();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=si(t.document)}return e}function Wo(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ef(t){var e=Hu(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Uu(n.ownerDocument.documentElement,n)){if(r!==null&&Wo(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Va(n,s);var o=Va(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tf=lt&&"documentMode"in document&&11>=document.documentMode,ln=null,bs=null,Zn=null,Ys=!1;function ba(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ys||ln==null||ln!==si(r)||(r=ln,"selectionStart"in r&&Wo(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zn&&ur(Zn,r)||(Zn=r,r=hi(bs,"onSelect"),0<r.length&&(e=new Uo("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ln)))}function Fr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var un={animationend:Fr("Animation","AnimationEnd"),animationiteration:Fr("Animation","AnimationIteration"),animationstart:Fr("Animation","AnimationStart"),transitionend:Fr("Transition","TransitionEnd")},ls={},ju={};lt&&(ju=document.createElement("div").style,"AnimationEvent"in window||(delete un.animationend.animation,delete un.animationiteration.animation,delete un.animationstart.animation),"TransitionEvent"in window||delete un.transitionend.transition);function wi(t){if(ls[t])return ls[t];if(!un[t])return t;var e=un[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ju)return ls[t]=e[n];return t}var Wu=wi("animationend"),Vu=wi("animationiteration"),bu=wi("animationstart"),Yu=wi("transitionend"),zu=new Map,Ya="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xt(t,e){zu.set(t,e),Zt(e,[t])}for(var us=0;us<Ya.length;us++){var cs=Ya[us],nf=cs.toLowerCase(),rf=cs[0].toUpperCase()+cs.slice(1);xt(nf,"on"+rf)}xt(Wu,"onAnimationEnd");xt(Vu,"onAnimationIteration");xt(bu,"onAnimationStart");xt("dblclick","onDoubleClick");xt("focusin","onFocus");xt("focusout","onBlur");xt(Yu,"onTransitionEnd");An("onMouseEnter",["mouseout","mouseover"]);An("onMouseLeave",["mouseout","mouseover"]);An("onPointerEnter",["pointerout","pointerover"]);An("onPointerLeave",["pointerout","pointerover"]);Zt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zt("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yn));function za(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,nh(r,e,void 0,t),t.currentTarget=null}function $u(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;za(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;za(i,a,u),s=l}}}if(ai)throw t=Hs,ai=!1,Hs=null,t}function W(t,e){var n=e[Xs];n===void 0&&(n=e[Xs]=new Set);var r=t+"__bubble";n.has(r)||(Ku(e,t,2,!1),n.add(r))}function ds(t,e,n){var r=0;e&&(r|=4),Ku(n,t,r,e)}var _r="_reactListening"+Math.random().toString(36).slice(2);function cr(t){if(!t[_r]){t[_r]=!0,tu.forEach(function(n){n!=="selectionchange"&&(sf.has(n)||ds(n,!1,t),ds(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_r]||(e[_r]=!0,ds("selectionchange",!1,e))}}function Ku(t,e,n,r){switch(ku(e)){case 1:var i=vh;break;case 4:i=yh;break;default:i=Fo}n=i.bind(null,e,n,t),i=void 0,!Us||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function hs(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ht(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Eu(function(){var u=s,g=wo(n),E=[];e:{var y=zu.get(t);if(y!==void 0){var S=Uo,h=t;switch(t){case"keypress":if(Xr(n)===0)break e;case"keydown":case"keyup":S=Ph;break;case"focusin":h="focus",S=ss;break;case"focusout":h="blur",S=ss;break;case"beforeblur":case"afterblur":S=ss;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Pa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=Ch;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=Fh;break;case Wu:case Vu:case bu:S=Nh;break;case Yu:S=Uh;break;case"scroll":S=Sh;break;case"wheel":S=jh;break;case"copy":case"cut":case"paste":S=Mh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Ba}var v=(e&4)!==0,m=!v&&t==="scroll",d=v?y!==null?y+"Capture":null:y;v=[];for(var c=u,f;c!==null;){f=c;var T=f.stateNode;if(f.tag===5&&T!==null&&(f=T,d!==null&&(T=ir(c,d),T!=null&&v.push(dr(c,T,f)))),m)break;c=c.return}0<v.length&&(y=new S(y,h,null,n,g),E.push({event:y,listeners:v}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",y&&n!==Fs&&(h=n.relatedTarget||n.fromElement)&&(Ht(h)||h[ut]))break e;if((S||y)&&(y=g.window===g?g:(y=g.ownerDocument)?y.defaultView||y.parentWindow:window,S?(h=n.relatedTarget||n.toElement,S=u,h=h?Ht(h):null,h!==null&&(m=Jt(h),h!==m||h.tag!==5&&h.tag!==6)&&(h=null)):(S=null,h=u),S!==h)){if(v=Pa,T="onMouseLeave",d="onMouseEnter",c="mouse",(t==="pointerout"||t==="pointerover")&&(v=Ba,T="onPointerLeave",d="onPointerEnter",c="pointer"),m=S==null?y:cn(S),f=h==null?y:cn(h),y=new v(T,c+"leave",S,n,g),y.target=m,y.relatedTarget=f,T=null,Ht(g)===u&&(v=new v(d,c+"enter",h,n,g),v.target=f,v.relatedTarget=m,T=v),m=T,S&&h)t:{for(v=S,d=h,c=0,f=v;f;f=rn(f))c++;for(f=0,T=d;T;T=rn(T))f++;for(;0<c-f;)v=rn(v),c--;for(;0<f-c;)d=rn(d),f--;for(;c--;){if(v===d||d!==null&&v===d.alternate)break t;v=rn(v),d=rn(d)}v=null}else v=null;S!==null&&$a(E,y,S,v,!1),h!==null&&m!==null&&$a(E,m,h,v,!0)}}e:{if(y=u?cn(u):window,S=y.nodeName&&y.nodeName.toLowerCase(),S==="select"||S==="input"&&y.type==="file")var A=Kh;else if(Ua(y))if(Fu)A=Jh;else{A=Xh;var N=Qh}else(S=y.nodeName)&&S.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(A=Zh);if(A&&(A=A(t,u))){Bu(E,A,n,g);break e}N&&N(t,y,u),t==="focusout"&&(N=y._wrapperState)&&N.controlled&&y.type==="number"&&xs(y,"number",y.value)}switch(N=u?cn(u):window,t){case"focusin":(Ua(N)||N.contentEditable==="true")&&(ln=N,bs=u,Zn=null);break;case"focusout":Zn=bs=ln=null;break;case"mousedown":Ys=!0;break;case"contextmenu":case"mouseup":case"dragend":Ys=!1,ba(E,n,g);break;case"selectionchange":if(tf)break;case"keydown":case"keyup":ba(E,n,g)}var C;if(jo)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else an?Pu(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(wu&&n.locale!=="ko"&&(an||M!=="onCompositionStart"?M==="onCompositionEnd"&&an&&(C=xu()):(yt=g,_o="value"in yt?yt.value:yt.textContent,an=!0)),N=hi(u,M),0<N.length&&(M=new Ga(M,t,null,n,g),E.push({event:M,listeners:N}),C?M.data=C:(C=Gu(n),C!==null&&(M.data=C)))),(C=Vh?bh(t,n):Yh(t,n))&&(u=hi(u,"onBeforeInput"),0<u.length&&(g=new Ga("onBeforeInput","beforeinput",null,n,g),E.push({event:g,listeners:u}),g.data=C))}$u(E,e)})}function dr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function hi(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ir(t,n),s!=null&&r.unshift(dr(t,s,i)),s=ir(t,e),s!=null&&r.push(dr(t,s,i))),t=t.return}return r}function rn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $a(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=ir(n,s),l!=null&&o.unshift(dr(n,l,a))):i||(l=ir(n,s),l!=null&&o.push(dr(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var of=/\r\n?/g,af=/\u0000|\uFFFD/g;function Ka(t){return(typeof t=="string"?t:""+t).replace(of,`
`).replace(af,"")}function Ur(t,e,n){if(e=Ka(e),Ka(t)!==e&&n)throw Error(D(425))}function fi(){}var zs=null,$s=null;function Ks(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Qs=typeof setTimeout=="function"?setTimeout:void 0,lf=typeof clearTimeout=="function"?clearTimeout:void 0,Qa=typeof Promise=="function"?Promise:void 0,uf=typeof queueMicrotask=="function"?queueMicrotask:typeof Qa<"u"?function(t){return Qa.resolve(null).then(t).catch(cf)}:Qs;function cf(t){setTimeout(function(){throw t})}function fs(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ar(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ar(e)}function Nt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xa(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xn=Math.random().toString(36).slice(2),Je="__reactFiber$"+xn,hr="__reactProps$"+xn,ut="__reactContainer$"+xn,Xs="__reactEvents$"+xn,df="__reactListeners$"+xn,hf="__reactHandles$"+xn;function Ht(t){var e=t[Je];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ut]||n[Je]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xa(t);t!==null;){if(n=t[Je])return n;t=Xa(t)}return e}t=n,n=t.parentNode}return null}function Nr(t){return t=t[Je]||t[ut],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(D(33))}function Pi(t){return t[hr]||null}var Zs=[],dn=-1;function wt(t){return{current:t}}function V(t){0>dn||(t.current=Zs[dn],Zs[dn]=null,dn--)}function j(t,e){dn++,Zs[dn]=t.current,t.current=e}var kt={},Ee=wt(kt),Ne=wt(!1),zt=kt;function In(t,e){var n=t.type.contextTypes;if(!n)return kt;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Re(t){return t=t.childContextTypes,t!=null}function mi(){V(Ne),V(Ee)}function Za(t,e,n){if(Ee.current!==kt)throw Error(D(168));j(Ee,e),j(Ne,n)}function Qu(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(D(108,Qd(t)||"Unknown",i));return K({},n,r)}function pi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kt,zt=Ee.current,j(Ee,t),j(Ne,Ne.current),!0}function Ja(t,e,n){var r=t.stateNode;if(!r)throw Error(D(169));n?(t=Qu(t,e,zt),r.__reactInternalMemoizedMergedChildContext=t,V(Ne),V(Ee),j(Ee,t)):V(Ne),j(Ne,n)}var it=null,Gi=!1,ms=!1;function Xu(t){it===null?it=[t]:it.push(t)}function ff(t){Gi=!0,Xu(t)}function Pt(){if(!ms&&it!==null){ms=!0;var t=0,e=U;try{var n=it;for(U=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}it=null,Gi=!1}catch(i){throw it!==null&&(it=it.slice(t+1)),Tu(Po,Pt),i}finally{U=e,ms=!1}}return null}var hn=[],fn=0,gi=null,Ei=0,Pe=[],Ge=0,$t=null,st=1,ot="";function Ft(t,e){hn[fn++]=Ei,hn[fn++]=gi,gi=t,Ei=e}function Zu(t,e,n){Pe[Ge++]=st,Pe[Ge++]=ot,Pe[Ge++]=$t,$t=t;var r=st;t=ot;var i=32-ze(r)-1;r&=~(1<<i),n+=1;var s=32-ze(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,st=1<<32-ze(e)+i|n<<i|r,ot=s+t}else st=1<<s|n<<i|r,ot=t}function Vo(t){t.return!==null&&(Ft(t,1),Zu(t,1,0))}function bo(t){for(;t===gi;)gi=hn[--fn],hn[fn]=null,Ei=hn[--fn],hn[fn]=null;for(;t===$t;)$t=Pe[--Ge],Pe[Ge]=null,ot=Pe[--Ge],Pe[Ge]=null,st=Pe[--Ge],Pe[Ge]=null}var Le=null,Oe=null,b=!1,Ye=null;function Ju(t,e){var n=Be(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function qa(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Le=t,Oe=Nt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Le=t,Oe=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=$t!==null?{id:st,overflow:ot}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Be(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Le=t,Oe=null,!0):!1;default:return!1}}function Js(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qs(t){if(b){var e=Oe;if(e){var n=e;if(!qa(t,e)){if(Js(t))throw Error(D(418));e=Nt(n.nextSibling);var r=Le;e&&qa(t,e)?Ju(r,n):(t.flags=t.flags&-4097|2,b=!1,Le=t)}}else{if(Js(t))throw Error(D(418));t.flags=t.flags&-4097|2,b=!1,Le=t}}}function el(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Le=t}function Hr(t){if(t!==Le)return!1;if(!b)return el(t),b=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ks(t.type,t.memoizedProps)),e&&(e=Oe)){if(Js(t))throw qu(),Error(D(418));for(;e;)Ju(t,e),e=Nt(e.nextSibling)}if(el(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(D(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Oe=Nt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Oe=null}}else Oe=Le?Nt(t.stateNode.nextSibling):null;return!0}function qu(){for(var t=Oe;t;)t=Nt(t.nextSibling)}function Nn(){Oe=Le=null,b=!1}function Yo(t){Ye===null?Ye=[t]:Ye.push(t)}var mf=ht.ReactCurrentBatchConfig;function Un(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,t))}return t}function jr(t,e){throw t=Object.prototype.toString.call(e),Error(D(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tl(t){var e=t._init;return e(t._payload)}function ec(t){function e(d,c){if(t){var f=d.deletions;f===null?(d.deletions=[c],d.flags|=16):f.push(c)}}function n(d,c){if(!t)return null;for(;c!==null;)e(d,c),c=c.sibling;return null}function r(d,c){for(d=new Map;c!==null;)c.key!==null?d.set(c.key,c):d.set(c.index,c),c=c.sibling;return d}function i(d,c){return d=Ot(d,c),d.index=0,d.sibling=null,d}function s(d,c,f){return d.index=f,t?(f=d.alternate,f!==null?(f=f.index,f<c?(d.flags|=2,c):f):(d.flags|=2,c)):(d.flags|=1048576,c)}function o(d){return t&&d.alternate===null&&(d.flags|=2),d}function a(d,c,f,T){return c===null||c.tag!==6?(c=Ts(f,d.mode,T),c.return=d,c):(c=i(c,f),c.return=d,c)}function l(d,c,f,T){var A=f.type;return A===on?g(d,c,f.props.children,T,f.key):c!==null&&(c.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===pt&&tl(A)===c.type)?(T=i(c,f.props),T.ref=Un(d,c,f),T.return=d,T):(T=ri(f.type,f.key,f.props,null,d.mode,T),T.ref=Un(d,c,f),T.return=d,T)}function u(d,c,f,T){return c===null||c.tag!==4||c.stateNode.containerInfo!==f.containerInfo||c.stateNode.implementation!==f.implementation?(c=Cs(f,d.mode,T),c.return=d,c):(c=i(c,f.children||[]),c.return=d,c)}function g(d,c,f,T,A){return c===null||c.tag!==7?(c=bt(f,d.mode,T,A),c.return=d,c):(c=i(c,f),c.return=d,c)}function E(d,c,f){if(typeof c=="string"&&c!==""||typeof c=="number")return c=Ts(""+c,d.mode,f),c.return=d,c;if(typeof c=="object"&&c!==null){switch(c.$$typeof){case Lr:return f=ri(c.type,c.key,c.props,null,d.mode,f),f.ref=Un(d,null,c),f.return=d,f;case sn:return c=Cs(c,d.mode,f),c.return=d,c;case pt:var T=c._init;return E(d,T(c._payload),f)}if(Vn(c)||Pn(c))return c=bt(c,d.mode,f,null),c.return=d,c;jr(d,c)}return null}function y(d,c,f,T){var A=c!==null?c.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return A!==null?null:a(d,c,""+f,T);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Lr:return f.key===A?l(d,c,f,T):null;case sn:return f.key===A?u(d,c,f,T):null;case pt:return A=f._init,y(d,c,A(f._payload),T)}if(Vn(f)||Pn(f))return A!==null?null:g(d,c,f,T,null);jr(d,f)}return null}function S(d,c,f,T,A){if(typeof T=="string"&&T!==""||typeof T=="number")return d=d.get(f)||null,a(c,d,""+T,A);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Lr:return d=d.get(T.key===null?f:T.key)||null,l(c,d,T,A);case sn:return d=d.get(T.key===null?f:T.key)||null,u(c,d,T,A);case pt:var N=T._init;return S(d,c,f,N(T._payload),A)}if(Vn(T)||Pn(T))return d=d.get(f)||null,g(c,d,T,A,null);jr(c,T)}return null}function h(d,c,f,T){for(var A=null,N=null,C=c,M=c=0,L=null;C!==null&&M<f.length;M++){C.index>M?(L=C,C=null):L=C.sibling;var O=y(d,C,f[M],T);if(O===null){C===null&&(C=L);break}t&&C&&O.alternate===null&&e(d,C),c=s(O,c,M),N===null?A=O:N.sibling=O,N=O,C=L}if(M===f.length)return n(d,C),b&&Ft(d,M),A;if(C===null){for(;M<f.length;M++)C=E(d,f[M],T),C!==null&&(c=s(C,c,M),N===null?A=C:N.sibling=C,N=C);return b&&Ft(d,M),A}for(C=r(d,C);M<f.length;M++)L=S(C,d,M,f[M],T),L!==null&&(t&&L.alternate!==null&&C.delete(L.key===null?M:L.key),c=s(L,c,M),N===null?A=L:N.sibling=L,N=L);return t&&C.forEach(function(F){return e(d,F)}),b&&Ft(d,M),A}function v(d,c,f,T){var A=Pn(f);if(typeof A!="function")throw Error(D(150));if(f=A.call(f),f==null)throw Error(D(151));for(var N=A=null,C=c,M=c=0,L=null,O=f.next();C!==null&&!O.done;M++,O=f.next()){C.index>M?(L=C,C=null):L=C.sibling;var F=y(d,C,O.value,T);if(F===null){C===null&&(C=L);break}t&&C&&F.alternate===null&&e(d,C),c=s(F,c,M),N===null?A=F:N.sibling=F,N=F,C=L}if(O.done)return n(d,C),b&&Ft(d,M),A;if(C===null){for(;!O.done;M++,O=f.next())O=E(d,O.value,T),O!==null&&(c=s(O,c,M),N===null?A=O:N.sibling=O,N=O);return b&&Ft(d,M),A}for(C=r(d,C);!O.done;M++,O=f.next())O=S(C,d,M,O.value,T),O!==null&&(t&&O.alternate!==null&&C.delete(O.key===null?M:O.key),c=s(O,c,M),N===null?A=O:N.sibling=O,N=O);return t&&C.forEach(function(ue){return e(d,ue)}),b&&Ft(d,M),A}function m(d,c,f,T){if(typeof f=="object"&&f!==null&&f.type===on&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case Lr:e:{for(var A=f.key,N=c;N!==null;){if(N.key===A){if(A=f.type,A===on){if(N.tag===7){n(d,N.sibling),c=i(N,f.props.children),c.return=d,d=c;break e}}else if(N.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===pt&&tl(A)===N.type){n(d,N.sibling),c=i(N,f.props),c.ref=Un(d,N,f),c.return=d,d=c;break e}n(d,N);break}else e(d,N);N=N.sibling}f.type===on?(c=bt(f.props.children,d.mode,T,f.key),c.return=d,d=c):(T=ri(f.type,f.key,f.props,null,d.mode,T),T.ref=Un(d,c,f),T.return=d,d=T)}return o(d);case sn:e:{for(N=f.key;c!==null;){if(c.key===N)if(c.tag===4&&c.stateNode.containerInfo===f.containerInfo&&c.stateNode.implementation===f.implementation){n(d,c.sibling),c=i(c,f.children||[]),c.return=d,d=c;break e}else{n(d,c);break}else e(d,c);c=c.sibling}c=Cs(f,d.mode,T),c.return=d,d=c}return o(d);case pt:return N=f._init,m(d,c,N(f._payload),T)}if(Vn(f))return h(d,c,f,T);if(Pn(f))return v(d,c,f,T);jr(d,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,c!==null&&c.tag===6?(n(d,c.sibling),c=i(c,f),c.return=d,d=c):(n(d,c),c=Ts(f,d.mode,T),c.return=d,d=c),o(d)):n(d,c)}return m}var Rn=ec(!0),tc=ec(!1),vi=wt(null),yi=null,mn=null,zo=null;function $o(){zo=mn=yi=null}function Ko(t){var e=vi.current;V(vi),t._currentValue=e}function eo(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Tn(t,e){yi=t,zo=mn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ie=!0),t.firstContext=null)}function _e(t){var e=t._currentValue;if(zo!==t)if(t={context:t,memoizedValue:e,next:null},mn===null){if(yi===null)throw Error(D(308));mn=t,yi.dependencies={lanes:0,firstContext:t}}else mn=mn.next=t;return e}var jt=null;function Qo(t){jt===null?jt=[t]:jt.push(t)}function nc(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Qo(e)):(n.next=i.next,i.next=n),e.interleaved=n,ct(t,r)}function ct(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var gt=!1;function Xo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rc(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function at(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Rt(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ct(t,n)}return i=r.interleaved,i===null?(e.next=e,Qo(r)):(e.next=i.next,i.next=e),r.interleaved=e,ct(t,n)}function Zr(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Go(t,n)}}function nl(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Si(t,e,n,r){var i=t.updateQueue;gt=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var g=t.alternate;g!==null&&(g=g.updateQueue,a=g.lastBaseUpdate,a!==o&&(a===null?g.firstBaseUpdate=u:a.next=u,g.lastBaseUpdate=l))}if(s!==null){var E=i.baseState;o=0,g=u=l=null,a=s;do{var y=a.lane,S=a.eventTime;if((r&y)===y){g!==null&&(g=g.next={eventTime:S,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var h=t,v=a;switch(y=e,S=n,v.tag){case 1:if(h=v.payload,typeof h=="function"){E=h.call(S,E,y);break e}E=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=v.payload,y=typeof h=="function"?h.call(S,E,y):h,y==null)break e;E=K({},E,y);break e;case 2:gt=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[a]:y.push(a))}else S={eventTime:S,lane:y,tag:a.tag,payload:a.payload,callback:a.callback,next:null},g===null?(u=g=S,l=E):g=g.next=S,o|=y;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;y=a,a=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(g===null&&(l=E),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=g,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Qt|=o,t.lanes=o,t.memoizedState=E}}function rl(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(D(191,i));i.call(r)}}}var Rr={},tt=wt(Rr),fr=wt(Rr),mr=wt(Rr);function Wt(t){if(t===Rr)throw Error(D(174));return t}function Zo(t,e){switch(j(mr,e),j(fr,t),j(tt,Rr),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ps(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ps(e,t)}V(tt),j(tt,e)}function Mn(){V(tt),V(fr),V(mr)}function ic(t){Wt(mr.current);var e=Wt(tt.current),n=Ps(e,t.type);e!==n&&(j(fr,t),j(tt,n))}function Jo(t){fr.current===t&&(V(tt),V(fr))}var z=wt(0);function Ti(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ps=[];function qo(){for(var t=0;t<ps.length;t++)ps[t]._workInProgressVersionPrimary=null;ps.length=0}var Jr=ht.ReactCurrentDispatcher,gs=ht.ReactCurrentBatchConfig,Kt=0,$=null,re=null,ae=null,Ci=!1,Jn=!1,pr=0,pf=0;function fe(){throw Error(D(321))}function ea(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ke(t[n],e[n]))return!1;return!0}function ta(t,e,n,r,i,s){if(Kt=s,$=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jr.current=t===null||t.memoizedState===null?yf:Sf,t=n(r,i),Jn){s=0;do{if(Jn=!1,pr=0,25<=s)throw Error(D(301));s+=1,ae=re=null,e.updateQueue=null,Jr.current=Tf,t=n(r,i)}while(Jn)}if(Jr.current=Ai,e=re!==null&&re.next!==null,Kt=0,ae=re=$=null,Ci=!1,e)throw Error(D(300));return t}function na(){var t=pr!==0;return pr=0,t}function Ze(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ae===null?$.memoizedState=ae=t:ae=ae.next=t,ae}function Ue(){if(re===null){var t=$.alternate;t=t!==null?t.memoizedState:null}else t=re.next;var e=ae===null?$.memoizedState:ae.next;if(e!==null)ae=e,re=t;else{if(t===null)throw Error(D(310));re=t,t={memoizedState:re.memoizedState,baseState:re.baseState,baseQueue:re.baseQueue,queue:re.queue,next:null},ae===null?$.memoizedState=ae=t:ae=ae.next=t}return ae}function gr(t,e){return typeof e=="function"?e(t):e}function Es(t){var e=Ue(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=re,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var g=u.lane;if((Kt&g)===g)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var E={lane:g,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=E,o=r):l=l.next=E,$.lanes|=g,Qt|=g}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Ke(r,e.memoizedState)||(Ie=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,$.lanes|=s,Qt|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vs(t){var e=Ue(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ke(s,e.memoizedState)||(Ie=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function sc(){}function oc(t,e){var n=$,r=Ue(),i=e(),s=!Ke(r.memoizedState,i);if(s&&(r.memoizedState=i,Ie=!0),r=r.queue,ra(uc.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ae!==null&&ae.memoizedState.tag&1){if(n.flags|=2048,Er(9,lc.bind(null,n,r,i,e),void 0,null),le===null)throw Error(D(349));Kt&30||ac(n,e,i)}return i}function ac(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$.updateQueue,e===null?(e={lastEffect:null,stores:null},$.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function lc(t,e,n,r){e.value=n,e.getSnapshot=r,cc(e)&&dc(t)}function uc(t,e,n){return n(function(){cc(e)&&dc(t)})}function cc(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ke(t,n)}catch{return!0}}function dc(t){var e=ct(t,1);e!==null&&$e(e,t,1,-1)}function il(t){var e=Ze();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:t},e.queue=t,t=t.dispatch=vf.bind(null,$,t),[e.memoizedState,t]}function Er(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=$.updateQueue,e===null?(e={lastEffect:null,stores:null},$.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function hc(){return Ue().memoizedState}function qr(t,e,n,r){var i=Ze();$.flags|=t,i.memoizedState=Er(1|e,n,void 0,r===void 0?null:r)}function Bi(t,e,n,r){var i=Ue();r=r===void 0?null:r;var s=void 0;if(re!==null){var o=re.memoizedState;if(s=o.destroy,r!==null&&ea(r,o.deps)){i.memoizedState=Er(e,n,s,r);return}}$.flags|=t,i.memoizedState=Er(1|e,n,s,r)}function sl(t,e){return qr(8390656,8,t,e)}function ra(t,e){return Bi(2048,8,t,e)}function fc(t,e){return Bi(4,2,t,e)}function mc(t,e){return Bi(4,4,t,e)}function pc(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gc(t,e,n){return n=n!=null?n.concat([t]):null,Bi(4,4,pc.bind(null,e,t),n)}function ia(){}function Ec(t,e){var n=Ue();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ea(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function vc(t,e){var n=Ue();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ea(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function yc(t,e,n){return Kt&21?(Ke(n,e)||(n=Iu(),$.lanes|=n,Qt|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ie=!0),t.memoizedState=n)}function gf(t,e){var n=U;U=n!==0&&4>n?n:4,t(!0);var r=gs.transition;gs.transition={};try{t(!1),e()}finally{U=n,gs.transition=r}}function Sc(){return Ue().memoizedState}function Ef(t,e,n){var r=Dt(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Tc(t))Cc(e,n);else if(n=nc(t,e,n,r),n!==null){var i=Se();$e(n,t,r,i),Ac(n,e,r)}}function vf(t,e,n){var r=Dt(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Tc(t))Cc(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ke(a,o)){var l=e.interleaved;l===null?(i.next=i,Qo(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=nc(t,e,i,r),n!==null&&(i=Se(),$e(n,t,r,i),Ac(n,e,r))}}function Tc(t){var e=t.alternate;return t===$||e!==null&&e===$}function Cc(t,e){Jn=Ci=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ac(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Go(t,n)}}var Ai={readContext:_e,useCallback:fe,useContext:fe,useEffect:fe,useImperativeHandle:fe,useInsertionEffect:fe,useLayoutEffect:fe,useMemo:fe,useReducer:fe,useRef:fe,useState:fe,useDebugValue:fe,useDeferredValue:fe,useTransition:fe,useMutableSource:fe,useSyncExternalStore:fe,useId:fe,unstable_isNewReconciler:!1},yf={readContext:_e,useCallback:function(t,e){return Ze().memoizedState=[t,e===void 0?null:e],t},useContext:_e,useEffect:sl,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qr(4194308,4,pc.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qr(4194308,4,t,e)},useInsertionEffect:function(t,e){return qr(4,2,t,e)},useMemo:function(t,e){var n=Ze();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ze();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Ef.bind(null,$,t),[r.memoizedState,t]},useRef:function(t){var e=Ze();return t={current:t},e.memoizedState=t},useState:il,useDebugValue:ia,useDeferredValue:function(t){return Ze().memoizedState=t},useTransition:function(){var t=il(!1),e=t[0];return t=gf.bind(null,t[1]),Ze().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=$,i=Ze();if(b){if(n===void 0)throw Error(D(407));n=n()}else{if(n=e(),le===null)throw Error(D(349));Kt&30||ac(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,sl(uc.bind(null,r,s,t),[t]),r.flags|=2048,Er(9,lc.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ze(),e=le.identifierPrefix;if(b){var n=ot,r=st;n=(r&~(1<<32-ze(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=pr++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pf++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Sf={readContext:_e,useCallback:Ec,useContext:_e,useEffect:ra,useImperativeHandle:gc,useInsertionEffect:fc,useLayoutEffect:mc,useMemo:vc,useReducer:Es,useRef:hc,useState:function(){return Es(gr)},useDebugValue:ia,useDeferredValue:function(t){var e=Ue();return yc(e,re.memoizedState,t)},useTransition:function(){var t=Es(gr)[0],e=Ue().memoizedState;return[t,e]},useMutableSource:sc,useSyncExternalStore:oc,useId:Sc,unstable_isNewReconciler:!1},Tf={readContext:_e,useCallback:Ec,useContext:_e,useEffect:ra,useImperativeHandle:gc,useInsertionEffect:fc,useLayoutEffect:mc,useMemo:vc,useReducer:vs,useRef:hc,useState:function(){return vs(gr)},useDebugValue:ia,useDeferredValue:function(t){var e=Ue();return re===null?e.memoizedState=t:yc(e,re.memoizedState,t)},useTransition:function(){var t=vs(gr)[0],e=Ue().memoizedState;return[t,e]},useMutableSource:sc,useSyncExternalStore:oc,useId:Sc,unstable_isNewReconciler:!1};function Ve(t,e){if(t&&t.defaultProps){e=K({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function to(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:K({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Fi={isMounted:function(t){return(t=t._reactInternals)?Jt(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Se(),i=Dt(t),s=at(r,i);s.payload=e,n!=null&&(s.callback=n),e=Rt(t,s,i),e!==null&&($e(e,t,i,r),Zr(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Se(),i=Dt(t),s=at(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Rt(t,s,i),e!==null&&($e(e,t,i,r),Zr(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Se(),r=Dt(t),i=at(n,r);i.tag=2,e!=null&&(i.callback=e),e=Rt(t,i,r),e!==null&&($e(e,t,r,n),Zr(e,t,r))}};function ol(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ur(n,r)||!ur(i,s):!0}function Ic(t,e,n){var r=!1,i=kt,s=e.contextType;return typeof s=="object"&&s!==null?s=_e(s):(i=Re(e)?zt:Ee.current,r=e.contextTypes,s=(r=r!=null)?In(t,i):kt),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fi,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function al(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Fi.enqueueReplaceState(e,e.state,null)}function no(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Xo(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=_e(s):(s=Re(e)?zt:Ee.current,i.context=In(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(to(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Fi.enqueueReplaceState(i,i.state,null),Si(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Dn(t,e){try{var n="",r=e;do n+=Kd(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function ys(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ro(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Cf=typeof WeakMap=="function"?WeakMap:Map;function Nc(t,e,n){n=at(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ni||(Ni=!0,mo=r),ro(t,e)},n}function Rc(t,e,n){n=at(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ro(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ro(t,e),typeof r!="function"&&(Mt===null?Mt=new Set([this]):Mt.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ll(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Cf;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Bf.bind(null,t,e,n),e.then(t,t))}function ul(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cl(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=at(-1,1),e.tag=2,Rt(n,e,1))),n.lanes|=1),t)}var Af=ht.ReactCurrentOwner,Ie=!1;function ve(t,e,n,r){e.child=t===null?tc(e,null,n,r):Rn(e,t.child,n,r)}function dl(t,e,n,r,i){n=n.render;var s=e.ref;return Tn(e,i),r=ta(t,e,n,r,s,i),n=na(),t!==null&&!Ie?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,dt(t,e,i)):(b&&n&&Vo(e),e.flags|=1,ve(t,e,r,i),e.child)}function hl(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!ha(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Mc(t,e,s,r,i)):(t=ri(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ur,n(o,r)&&t.ref===e.ref)return dt(t,e,i)}return e.flags|=1,t=Ot(s,r),t.ref=e.ref,t.return=e,e.child=t}function Mc(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ur(s,r)&&t.ref===e.ref)if(Ie=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ie=!0);else return e.lanes=t.lanes,dt(t,e,i)}return io(t,e,n,r,i)}function Dc(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},j(gn,De),De|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,j(gn,De),De|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,j(gn,De),De|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,j(gn,De),De|=r;return ve(t,e,i,n),e.child}function Oc(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function io(t,e,n,r,i){var s=Re(n)?zt:Ee.current;return s=In(e,s),Tn(e,i),n=ta(t,e,n,r,s,i),r=na(),t!==null&&!Ie?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,dt(t,e,i)):(b&&r&&Vo(e),e.flags|=1,ve(t,e,n,i),e.child)}function fl(t,e,n,r,i){if(Re(n)){var s=!0;pi(e)}else s=!1;if(Tn(e,i),e.stateNode===null)ei(t,e),Ic(e,n,r),no(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=_e(u):(u=Re(n)?zt:Ee.current,u=In(e,u));var g=n.getDerivedStateFromProps,E=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function";E||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&al(e,o,r,u),gt=!1;var y=e.memoizedState;o.state=y,Si(e,r,o,i),l=e.memoizedState,a!==r||y!==l||Ne.current||gt?(typeof g=="function"&&(to(e,n,g,r),l=e.memoizedState),(a=gt||ol(e,n,a,r,y,l,u))?(E||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,rc(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ve(e.type,a),o.props=u,E=e.pendingProps,y=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=_e(l):(l=Re(n)?zt:Ee.current,l=In(e,l));var S=n.getDerivedStateFromProps;(g=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==E||y!==l)&&al(e,o,r,l),gt=!1,y=e.memoizedState,o.state=y,Si(e,r,o,i);var h=e.memoizedState;a!==E||y!==h||Ne.current||gt?(typeof S=="function"&&(to(e,n,S,r),h=e.memoizedState),(u=gt||ol(e,n,u,r,y,h,l)||!1)?(g||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,h,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,h,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=h),o.props=r,o.state=h,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return so(t,e,n,r,s,i)}function so(t,e,n,r,i,s){Oc(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Ja(e,n,!1),dt(t,e,s);r=e.stateNode,Af.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Rn(e,t.child,null,s),e.child=Rn(e,null,a,s)):ve(t,e,a,s),e.memoizedState=r.state,i&&Ja(e,n,!0),e.child}function Lc(t){var e=t.stateNode;e.pendingContext?Za(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Za(t,e.context,!1),Zo(t,e.containerInfo)}function ml(t,e,n,r,i){return Nn(),Yo(i),e.flags|=256,ve(t,e,n,r),e.child}var oo={dehydrated:null,treeContext:null,retryLane:0};function ao(t){return{baseLanes:t,cachePool:null,transitions:null}}function kc(t,e,n){var r=e.pendingProps,i=z.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),j(z,i&1),t===null)return qs(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Hi(o,r,0,null),t=bt(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ao(n),e.memoizedState=oo,t):sa(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return If(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ot(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ot(a,s):(s=bt(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?ao(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=oo,r}return s=t.child,t=s.sibling,r=Ot(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function sa(t,e){return e=Hi({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wr(t,e,n,r){return r!==null&&Yo(r),Rn(e,t.child,null,n),t=sa(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function If(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=ys(Error(D(422))),Wr(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Hi({mode:"visible",children:r.children},i,0,null),s=bt(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Rn(e,t.child,null,o),e.child.memoizedState=ao(o),e.memoizedState=oo,s);if(!(e.mode&1))return Wr(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(D(419)),r=ys(s,r,void 0),Wr(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ie||a){if(r=le,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ct(t,i),$e(r,t,i,-1))}return da(),r=ys(Error(D(421))),Wr(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Ff.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Oe=Nt(i.nextSibling),Le=e,b=!0,Ye=null,t!==null&&(Pe[Ge++]=st,Pe[Ge++]=ot,Pe[Ge++]=$t,st=t.id,ot=t.overflow,$t=e),e=sa(e,r.children),e.flags|=4096,e)}function pl(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),eo(t.return,e,n)}function Ss(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function xc(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ve(t,e,r.children,n),r=z.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pl(t,n,e);else if(t.tag===19)pl(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(j(z,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ti(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ss(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ti(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ss(e,!0,n,null,s);break;case"together":Ss(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ei(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function dt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Qt|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(D(153));if(e.child!==null){for(t=e.child,n=Ot(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ot(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Nf(t,e,n){switch(e.tag){case 3:Lc(e),Nn();break;case 5:ic(e);break;case 1:Re(e.type)&&pi(e);break;case 4:Zo(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;j(vi,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(j(z,z.current&1),e.flags|=128,null):n&e.child.childLanes?kc(t,e,n):(j(z,z.current&1),t=dt(t,e,n),t!==null?t.sibling:null);j(z,z.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return xc(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),j(z,z.current),r)break;return null;case 22:case 23:return e.lanes=0,Dc(t,e,n)}return dt(t,e,n)}var wc,lo,Pc,Gc;wc=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lo=function(){};Pc=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Wt(tt.current);var s=null;switch(n){case"input":i=Ls(t,i),r=Ls(t,r),s=[];break;case"select":i=K({},i,{value:void 0}),r=K({},r,{value:void 0}),s=[];break;case"textarea":i=ws(t,i),r=ws(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=fi)}Gs(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(nr.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(nr.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&W("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Gc=function(t,e,n,r){n!==r&&(e.flags|=4)};function Hn(t,e){if(!b)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function me(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Rf(t,e,n){var r=e.pendingProps;switch(bo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return me(e),null;case 1:return Re(e.type)&&mi(),me(e),null;case 3:return r=e.stateNode,Mn(),V(Ne),V(Ee),qo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Hr(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ye!==null&&(Eo(Ye),Ye=null))),lo(t,e),me(e),null;case 5:Jo(e);var i=Wt(mr.current);if(n=e.type,t!==null&&e.stateNode!=null)Pc(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(D(166));return me(e),null}if(t=Wt(tt.current),Hr(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Je]=e,r[hr]=s,t=(e.mode&1)!==0,n){case"dialog":W("cancel",r),W("close",r);break;case"iframe":case"object":case"embed":W("load",r);break;case"video":case"audio":for(i=0;i<Yn.length;i++)W(Yn[i],r);break;case"source":W("error",r);break;case"img":case"image":case"link":W("error",r),W("load",r);break;case"details":W("toggle",r);break;case"input":Ia(r,s),W("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},W("invalid",r);break;case"textarea":Ra(r,s),W("invalid",r)}Gs(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ur(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ur(r.textContent,a,t),i=["children",""+a]):nr.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&W("scroll",r)}switch(n){case"input":kr(r),Na(r,s,!0);break;case"textarea":kr(r),Ma(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=fi)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uu(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Je]=e,t[hr]=r,wc(t,e,!1,!1),e.stateNode=t;e:{switch(o=Bs(n,r),n){case"dialog":W("cancel",t),W("close",t),i=r;break;case"iframe":case"object":case"embed":W("load",t),i=r;break;case"video":case"audio":for(i=0;i<Yn.length;i++)W(Yn[i],t);i=r;break;case"source":W("error",t),i=r;break;case"img":case"image":case"link":W("error",t),W("load",t),i=r;break;case"details":W("toggle",t),i=r;break;case"input":Ia(t,r),i=Ls(t,r),W("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=K({},r,{value:void 0}),W("invalid",t);break;case"textarea":Ra(t,r),i=ws(t,r),W("invalid",t);break;default:i=r}Gs(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?hu(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&cu(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&rr(t,l):typeof l=="number"&&rr(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(nr.hasOwnProperty(s)?l!=null&&s==="onScroll"&&W("scroll",t):l!=null&&Oo(t,s,l,o))}switch(n){case"input":kr(t),Na(t,r,!1);break;case"textarea":kr(t),Ma(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Lt(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?En(t,!!r.multiple,s,!1):r.defaultValue!=null&&En(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=fi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return me(e),null;case 6:if(t&&e.stateNode!=null)Gc(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(D(166));if(n=Wt(mr.current),Wt(tt.current),Hr(e)){if(r=e.stateNode,n=e.memoizedProps,r[Je]=e,(s=r.nodeValue!==n)&&(t=Le,t!==null))switch(t.tag){case 3:Ur(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ur(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Je]=e,e.stateNode=r}return me(e),null;case 13:if(V(z),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(b&&Oe!==null&&e.mode&1&&!(e.flags&128))qu(),Nn(),e.flags|=98560,s=!1;else if(s=Hr(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(D(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(D(317));s[Je]=e}else Nn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;me(e),s=!1}else Ye!==null&&(Eo(Ye),Ye=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||z.current&1?ie===0&&(ie=3):da())),e.updateQueue!==null&&(e.flags|=4),me(e),null);case 4:return Mn(),lo(t,e),t===null&&cr(e.stateNode.containerInfo),me(e),null;case 10:return Ko(e.type._context),me(e),null;case 17:return Re(e.type)&&mi(),me(e),null;case 19:if(V(z),s=e.memoizedState,s===null)return me(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Hn(s,!1);else{if(ie!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ti(t),o!==null){for(e.flags|=128,Hn(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return j(z,z.current&1|2),e.child}t=t.sibling}s.tail!==null&&q()>On&&(e.flags|=128,r=!0,Hn(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ti(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Hn(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!b)return me(e),null}else 2*q()-s.renderingStartTime>On&&n!==1073741824&&(e.flags|=128,r=!0,Hn(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=q(),e.sibling=null,n=z.current,j(z,r?n&1|2:n&1),e):(me(e),null);case 22:case 23:return ca(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?De&1073741824&&(me(e),e.subtreeFlags&6&&(e.flags|=8192)):me(e),null;case 24:return null;case 25:return null}throw Error(D(156,e.tag))}function Mf(t,e){switch(bo(e),e.tag){case 1:return Re(e.type)&&mi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mn(),V(Ne),V(Ee),qo(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Jo(e),null;case 13:if(V(z),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(D(340));Nn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return V(z),null;case 4:return Mn(),null;case 10:return Ko(e.type._context),null;case 22:case 23:return ca(),null;case 24:return null;default:return null}}var Vr=!1,ge=!1,Df=typeof WeakSet=="function"?WeakSet:Set,k=null;function pn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){X(t,e,r)}else n.current=null}function uo(t,e,n){try{n()}catch(r){X(t,e,r)}}var gl=!1;function Of(t,e){if(zs=ci,t=Hu(),Wo(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,g=0,E=t,y=null;t:for(;;){for(var S;E!==n||i!==0&&E.nodeType!==3||(a=o+i),E!==s||r!==0&&E.nodeType!==3||(l=o+r),E.nodeType===3&&(o+=E.nodeValue.length),(S=E.firstChild)!==null;)y=E,E=S;for(;;){if(E===t)break t;if(y===n&&++u===i&&(a=o),y===s&&++g===r&&(l=o),(S=E.nextSibling)!==null)break;E=y,y=E.parentNode}E=S}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for($s={focusedElem:t,selectionRange:n},ci=!1,k=e;k!==null;)if(e=k,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,k=t;else for(;k!==null;){e=k;try{var h=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var v=h.memoizedProps,m=h.memoizedState,d=e.stateNode,c=d.getSnapshotBeforeUpdate(e.elementType===e.type?v:Ve(e.type,v),m);d.__reactInternalSnapshotBeforeUpdate=c}break;case 3:var f=e.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(T){X(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,k=t;break}k=e.return}return h=gl,gl=!1,h}function qn(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&uo(e,n,s)}i=i.next}while(i!==r)}}function _i(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function co(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Bc(t){var e=t.alternate;e!==null&&(t.alternate=null,Bc(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Je],delete e[hr],delete e[Xs],delete e[df],delete e[hf])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Fc(t){return t.tag===5||t.tag===3||t.tag===4}function El(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Fc(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ho(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=fi));else if(r!==4&&(t=t.child,t!==null))for(ho(t,e,n),t=t.sibling;t!==null;)ho(t,e,n),t=t.sibling}function fo(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(fo(t,e,n),t=t.sibling;t!==null;)fo(t,e,n),t=t.sibling}var ce=null,be=!1;function mt(t,e,n){for(n=n.child;n!==null;)_c(t,e,n),n=n.sibling}function _c(t,e,n){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(Li,n)}catch{}switch(n.tag){case 5:ge||pn(n,e);case 6:var r=ce,i=be;ce=null,mt(t,e,n),ce=r,be=i,ce!==null&&(be?(t=ce,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ce.removeChild(n.stateNode));break;case 18:ce!==null&&(be?(t=ce,n=n.stateNode,t.nodeType===8?fs(t.parentNode,n):t.nodeType===1&&fs(t,n),ar(t)):fs(ce,n.stateNode));break;case 4:r=ce,i=be,ce=n.stateNode.containerInfo,be=!0,mt(t,e,n),ce=r,be=i;break;case 0:case 11:case 14:case 15:if(!ge&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&uo(n,e,o),i=i.next}while(i!==r)}mt(t,e,n);break;case 1:if(!ge&&(pn(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){X(n,e,a)}mt(t,e,n);break;case 21:mt(t,e,n);break;case 22:n.mode&1?(ge=(r=ge)||n.memoizedState!==null,mt(t,e,n),ge=r):mt(t,e,n);break;default:mt(t,e,n)}}function vl(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Df),e.forEach(function(r){var i=_f.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function je(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ce=a.stateNode,be=!1;break e;case 3:ce=a.stateNode.containerInfo,be=!0;break e;case 4:ce=a.stateNode.containerInfo,be=!0;break e}a=a.return}if(ce===null)throw Error(D(160));_c(s,o,i),ce=null,be=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){X(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Uc(e,t),e=e.sibling}function Uc(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(je(e,t),Qe(t),r&4){try{qn(3,t,t.return),_i(3,t)}catch(v){X(t,t.return,v)}try{qn(5,t,t.return)}catch(v){X(t,t.return,v)}}break;case 1:je(e,t),Qe(t),r&512&&n!==null&&pn(n,n.return);break;case 5:if(je(e,t),Qe(t),r&512&&n!==null&&pn(n,n.return),t.flags&32){var i=t.stateNode;try{rr(i,"")}catch(v){X(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&au(i,s),Bs(a,o);var u=Bs(a,s);for(o=0;o<l.length;o+=2){var g=l[o],E=l[o+1];g==="style"?hu(i,E):g==="dangerouslySetInnerHTML"?cu(i,E):g==="children"?rr(i,E):Oo(i,g,E,u)}switch(a){case"input":ks(i,s);break;case"textarea":lu(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var S=s.value;S!=null?En(i,!!s.multiple,S,!1):y!==!!s.multiple&&(s.defaultValue!=null?En(i,!!s.multiple,s.defaultValue,!0):En(i,!!s.multiple,s.multiple?[]:"",!1))}i[hr]=s}catch(v){X(t,t.return,v)}}break;case 6:if(je(e,t),Qe(t),r&4){if(t.stateNode===null)throw Error(D(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){X(t,t.return,v)}}break;case 3:if(je(e,t),Qe(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ar(e.containerInfo)}catch(v){X(t,t.return,v)}break;case 4:je(e,t),Qe(t);break;case 13:je(e,t),Qe(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(la=q())),r&4&&vl(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(ge=(u=ge)||g,je(e,t),ge=u):je(e,t),Qe(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!g&&t.mode&1)for(k=t,g=t.child;g!==null;){for(E=k=g;k!==null;){switch(y=k,S=y.child,y.tag){case 0:case 11:case 14:case 15:qn(4,y,y.return);break;case 1:pn(y,y.return);var h=y.stateNode;if(typeof h.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,h.props=e.memoizedProps,h.state=e.memoizedState,h.componentWillUnmount()}catch(v){X(r,n,v)}}break;case 5:pn(y,y.return);break;case 22:if(y.memoizedState!==null){Sl(E);continue}}S!==null?(S.return=y,k=S):Sl(E)}g=g.sibling}e:for(g=null,E=t;;){if(E.tag===5){if(g===null){g=E;try{i=E.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=E.stateNode,l=E.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=du("display",o))}catch(v){X(t,t.return,v)}}}else if(E.tag===6){if(g===null)try{E.stateNode.nodeValue=u?"":E.memoizedProps}catch(v){X(t,t.return,v)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===t)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===t)break e;for(;E.sibling===null;){if(E.return===null||E.return===t)break e;g===E&&(g=null),E=E.return}g===E&&(g=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:je(e,t),Qe(t),r&4&&vl(t);break;case 21:break;default:je(e,t),Qe(t)}}function Qe(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Fc(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(rr(i,""),r.flags&=-33);var s=El(t);fo(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=El(t);ho(t,a,o);break;default:throw Error(D(161))}}catch(l){X(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Lf(t,e,n){k=t,Hc(t)}function Hc(t,e,n){for(var r=(t.mode&1)!==0;k!==null;){var i=k,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Vr;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ge;a=Vr;var u=ge;if(Vr=o,(ge=l)&&!u)for(k=i;k!==null;)o=k,l=o.child,o.tag===22&&o.memoizedState!==null?Tl(i):l!==null?(l.return=o,k=l):Tl(i);for(;s!==null;)k=s,Hc(s),s=s.sibling;k=i,Vr=a,ge=u}yl(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,k=s):yl(t)}}function yl(t){for(;k!==null;){var e=k;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ge||_i(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ge)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ve(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&rl(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}rl(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var g=u.memoizedState;if(g!==null){var E=g.dehydrated;E!==null&&ar(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}ge||e.flags&512&&co(e)}catch(y){X(e,e.return,y)}}if(e===t){k=null;break}if(n=e.sibling,n!==null){n.return=e.return,k=n;break}k=e.return}}function Sl(t){for(;k!==null;){var e=k;if(e===t){k=null;break}var n=e.sibling;if(n!==null){n.return=e.return,k=n;break}k=e.return}}function Tl(t){for(;k!==null;){var e=k;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_i(4,e)}catch(l){X(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){X(e,i,l)}}var s=e.return;try{co(e)}catch(l){X(e,s,l)}break;case 5:var o=e.return;try{co(e)}catch(l){X(e,o,l)}}}catch(l){X(e,e.return,l)}if(e===t){k=null;break}var a=e.sibling;if(a!==null){a.return=e.return,k=a;break}k=e.return}}var kf=Math.ceil,Ii=ht.ReactCurrentDispatcher,oa=ht.ReactCurrentOwner,Fe=ht.ReactCurrentBatchConfig,_=0,le=null,ne=null,de=0,De=0,gn=wt(0),ie=0,vr=null,Qt=0,Ui=0,aa=0,er=null,Ae=null,la=0,On=1/0,rt=null,Ni=!1,mo=null,Mt=null,br=!1,St=null,Ri=0,tr=0,po=null,ti=-1,ni=0;function Se(){return _&6?q():ti!==-1?ti:ti=q()}function Dt(t){return t.mode&1?_&2&&de!==0?de&-de:mf.transition!==null?(ni===0&&(ni=Iu()),ni):(t=U,t!==0||(t=window.event,t=t===void 0?16:ku(t.type)),t):1}function $e(t,e,n,r){if(50<tr)throw tr=0,po=null,Error(D(185));Ar(t,n,r),(!(_&2)||t!==le)&&(t===le&&(!(_&2)&&(Ui|=n),ie===4&&vt(t,de)),Me(t,r),n===1&&_===0&&!(e.mode&1)&&(On=q()+500,Gi&&Pt()))}function Me(t,e){var n=t.callbackNode;fh(t,e);var r=ui(t,t===le?de:0);if(r===0)n!==null&&La(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&La(n),e===1)t.tag===0?ff(Cl.bind(null,t)):Xu(Cl.bind(null,t)),uf(function(){!(_&6)&&Pt()}),n=null;else{switch(Nu(r)){case 1:n=Po;break;case 4:n=Cu;break;case 16:n=li;break;case 536870912:n=Au;break;default:n=li}n=Kc(n,jc.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jc(t,e){if(ti=-1,ni=0,_&6)throw Error(D(327));var n=t.callbackNode;if(Cn()&&t.callbackNode!==n)return null;var r=ui(t,t===le?de:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Mi(t,r);else{e=r;var i=_;_|=2;var s=Vc();(le!==t||de!==e)&&(rt=null,On=q()+500,Vt(t,e));do try{Pf();break}catch(a){Wc(t,a)}while(!0);$o(),Ii.current=s,_=i,ne!==null?e=0:(le=null,de=0,e=ie)}if(e!==0){if(e===2&&(i=js(t),i!==0&&(r=i,e=go(t,i))),e===1)throw n=vr,Vt(t,0),vt(t,r),Me(t,q()),n;if(e===6)vt(t,r);else{if(i=t.current.alternate,!(r&30)&&!xf(i)&&(e=Mi(t,r),e===2&&(s=js(t),s!==0&&(r=s,e=go(t,s))),e===1))throw n=vr,Vt(t,0),vt(t,r),Me(t,q()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(D(345));case 2:_t(t,Ae,rt);break;case 3:if(vt(t,r),(r&130023424)===r&&(e=la+500-q(),10<e)){if(ui(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Se(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Qs(_t.bind(null,t,Ae,rt),e);break}_t(t,Ae,rt);break;case 4:if(vt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ze(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=q()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kf(r/1960))-r,10<r){t.timeoutHandle=Qs(_t.bind(null,t,Ae,rt),r);break}_t(t,Ae,rt);break;case 5:_t(t,Ae,rt);break;default:throw Error(D(329))}}}return Me(t,q()),t.callbackNode===n?jc.bind(null,t):null}function go(t,e){var n=er;return t.current.memoizedState.isDehydrated&&(Vt(t,e).flags|=256),t=Mi(t,e),t!==2&&(e=Ae,Ae=n,e!==null&&Eo(e)),t}function Eo(t){Ae===null?Ae=t:Ae.push.apply(Ae,t)}function xf(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ke(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vt(t,e){for(e&=~aa,e&=~Ui,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ze(e),r=1<<n;t[n]=-1,e&=~r}}function Cl(t){if(_&6)throw Error(D(327));Cn();var e=ui(t,0);if(!(e&1))return Me(t,q()),null;var n=Mi(t,e);if(t.tag!==0&&n===2){var r=js(t);r!==0&&(e=r,n=go(t,r))}if(n===1)throw n=vr,Vt(t,0),vt(t,e),Me(t,q()),n;if(n===6)throw Error(D(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_t(t,Ae,rt),Me(t,q()),null}function ua(t,e){var n=_;_|=1;try{return t(e)}finally{_=n,_===0&&(On=q()+500,Gi&&Pt())}}function Xt(t){St!==null&&St.tag===0&&!(_&6)&&Cn();var e=_;_|=1;var n=Fe.transition,r=U;try{if(Fe.transition=null,U=1,t)return t()}finally{U=r,Fe.transition=n,_=e,!(_&6)&&Pt()}}function ca(){De=gn.current,V(gn)}function Vt(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,lf(n)),ne!==null)for(n=ne.return;n!==null;){var r=n;switch(bo(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&mi();break;case 3:Mn(),V(Ne),V(Ee),qo();break;case 5:Jo(r);break;case 4:Mn();break;case 13:V(z);break;case 19:V(z);break;case 10:Ko(r.type._context);break;case 22:case 23:ca()}n=n.return}if(le=t,ne=t=Ot(t.current,null),de=De=e,ie=0,vr=null,aa=Ui=Qt=0,Ae=er=null,jt!==null){for(e=0;e<jt.length;e++)if(n=jt[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}jt=null}return t}function Wc(t,e){do{var n=ne;try{if($o(),Jr.current=Ai,Ci){for(var r=$.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ci=!1}if(Kt=0,ae=re=$=null,Jn=!1,pr=0,oa.current=null,n===null||n.return===null){ie=1,vr=e,ne=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=de,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,g=a,E=g.tag;if(!(g.mode&1)&&(E===0||E===11||E===15)){var y=g.alternate;y?(g.updateQueue=y.updateQueue,g.memoizedState=y.memoizedState,g.lanes=y.lanes):(g.updateQueue=null,g.memoizedState=null)}var S=ul(o);if(S!==null){S.flags&=-257,cl(S,o,a,s,e),S.mode&1&&ll(s,u,e),e=S,l=u;var h=e.updateQueue;if(h===null){var v=new Set;v.add(l),e.updateQueue=v}else h.add(l);break e}else{if(!(e&1)){ll(s,u,e),da();break e}l=Error(D(426))}}else if(b&&a.mode&1){var m=ul(o);if(m!==null){!(m.flags&65536)&&(m.flags|=256),cl(m,o,a,s,e),Yo(Dn(l,a));break e}}s=l=Dn(l,a),ie!==4&&(ie=2),er===null?er=[s]:er.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var d=Nc(s,l,e);nl(s,d);break e;case 1:a=l;var c=s.type,f=s.stateNode;if(!(s.flags&128)&&(typeof c.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Mt===null||!Mt.has(f)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=Rc(s,a,e);nl(s,T);break e}}s=s.return}while(s!==null)}Yc(n)}catch(A){e=A,ne===n&&n!==null&&(ne=n=n.return);continue}break}while(!0)}function Vc(){var t=Ii.current;return Ii.current=Ai,t===null?Ai:t}function da(){(ie===0||ie===3||ie===2)&&(ie=4),le===null||!(Qt&268435455)&&!(Ui&268435455)||vt(le,de)}function Mi(t,e){var n=_;_|=2;var r=Vc();(le!==t||de!==e)&&(rt=null,Vt(t,e));do try{wf();break}catch(i){Wc(t,i)}while(!0);if($o(),_=n,Ii.current=r,ne!==null)throw Error(D(261));return le=null,de=0,ie}function wf(){for(;ne!==null;)bc(ne)}function Pf(){for(;ne!==null&&!ih();)bc(ne)}function bc(t){var e=$c(t.alternate,t,De);t.memoizedProps=t.pendingProps,e===null?Yc(t):ne=e,oa.current=null}function Yc(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Mf(n,e),n!==null){n.flags&=32767,ne=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ie=6,ne=null;return}}else if(n=Rf(n,e,De),n!==null){ne=n;return}if(e=e.sibling,e!==null){ne=e;return}ne=e=t}while(e!==null);ie===0&&(ie=5)}function _t(t,e,n){var r=U,i=Fe.transition;try{Fe.transition=null,U=1,Gf(t,e,n,r)}finally{Fe.transition=i,U=r}return null}function Gf(t,e,n,r){do Cn();while(St!==null);if(_&6)throw Error(D(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(D(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(mh(t,s),t===le&&(ne=le=null,de=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||br||(br=!0,Kc(li,function(){return Cn(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Fe.transition,Fe.transition=null;var o=U;U=1;var a=_;_|=4,oa.current=null,Of(t,n),Uc(n,t),ef($s),ci=!!zs,$s=zs=null,t.current=n,Lf(n),sh(),_=a,U=o,Fe.transition=s}else t.current=n;if(br&&(br=!1,St=t,Ri=i),s=t.pendingLanes,s===0&&(Mt=null),lh(n.stateNode),Me(t,q()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ni)throw Ni=!1,t=mo,mo=null,t;return Ri&1&&t.tag!==0&&Cn(),s=t.pendingLanes,s&1?t===po?tr++:(tr=0,po=t):tr=0,Pt(),null}function Cn(){if(St!==null){var t=Nu(Ri),e=Fe.transition,n=U;try{if(Fe.transition=null,U=16>t?16:t,St===null)var r=!1;else{if(t=St,St=null,Ri=0,_&6)throw Error(D(331));var i=_;for(_|=4,k=t.current;k!==null;){var s=k,o=s.child;if(k.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(k=u;k!==null;){var g=k;switch(g.tag){case 0:case 11:case 15:qn(8,g,s)}var E=g.child;if(E!==null)E.return=g,k=E;else for(;k!==null;){g=k;var y=g.sibling,S=g.return;if(Bc(g),g===u){k=null;break}if(y!==null){y.return=S,k=y;break}k=S}}}var h=s.alternate;if(h!==null){var v=h.child;if(v!==null){h.child=null;do{var m=v.sibling;v.sibling=null,v=m}while(v!==null)}}k=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,k=o;else e:for(;k!==null;){if(s=k,s.flags&2048)switch(s.tag){case 0:case 11:case 15:qn(9,s,s.return)}var d=s.sibling;if(d!==null){d.return=s.return,k=d;break e}k=s.return}}var c=t.current;for(k=c;k!==null;){o=k;var f=o.child;if(o.subtreeFlags&2064&&f!==null)f.return=o,k=f;else e:for(o=c;k!==null;){if(a=k,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:_i(9,a)}}catch(A){X(a,a.return,A)}if(a===o){k=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,k=T;break e}k=a.return}}if(_=i,Pt(),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(Li,t)}catch{}r=!0}return r}finally{U=n,Fe.transition=e}}return!1}function Al(t,e,n){e=Dn(n,e),e=Nc(t,e,1),t=Rt(t,e,1),e=Se(),t!==null&&(Ar(t,1,e),Me(t,e))}function X(t,e,n){if(t.tag===3)Al(t,t,n);else for(;e!==null;){if(e.tag===3){Al(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mt===null||!Mt.has(r))){t=Dn(n,t),t=Rc(e,t,1),e=Rt(e,t,1),t=Se(),e!==null&&(Ar(e,1,t),Me(e,t));break}}e=e.return}}function Bf(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Se(),t.pingedLanes|=t.suspendedLanes&n,le===t&&(de&n)===n&&(ie===4||ie===3&&(de&130023424)===de&&500>q()-la?Vt(t,0):aa|=n),Me(t,e)}function zc(t,e){e===0&&(t.mode&1?(e=Pr,Pr<<=1,!(Pr&130023424)&&(Pr=4194304)):e=1);var n=Se();t=ct(t,e),t!==null&&(Ar(t,e,n),Me(t,n))}function Ff(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),zc(t,n)}function _f(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(e),zc(t,n)}var $c;$c=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ne.current)Ie=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ie=!1,Nf(t,e,n);Ie=!!(t.flags&131072)}else Ie=!1,b&&e.flags&1048576&&Zu(e,Ei,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ei(t,e),t=e.pendingProps;var i=In(e,Ee.current);Tn(e,n),i=ta(null,e,r,t,i,n);var s=na();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Re(r)?(s=!0,pi(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Xo(e),i.updater=Fi,e.stateNode=i,i._reactInternals=e,no(e,r,t,n),e=so(null,e,r,!0,s,n)):(e.tag=0,b&&s&&Vo(e),ve(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ei(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Hf(r),t=Ve(r,t),i){case 0:e=io(null,e,r,t,n);break e;case 1:e=fl(null,e,r,t,n);break e;case 11:e=dl(null,e,r,t,n);break e;case 14:e=hl(null,e,r,Ve(r.type,t),n);break e}throw Error(D(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ve(r,i),io(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ve(r,i),fl(t,e,r,i,n);case 3:e:{if(Lc(e),t===null)throw Error(D(387));r=e.pendingProps,s=e.memoizedState,i=s.element,rc(t,e),Si(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Dn(Error(D(423)),e),e=ml(t,e,r,n,i);break e}else if(r!==i){i=Dn(Error(D(424)),e),e=ml(t,e,r,n,i);break e}else for(Oe=Nt(e.stateNode.containerInfo.firstChild),Le=e,b=!0,Ye=null,n=tc(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Nn(),r===i){e=dt(t,e,n);break e}ve(t,e,r,n)}e=e.child}return e;case 5:return ic(e),t===null&&qs(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ks(r,i)?o=null:s!==null&&Ks(r,s)&&(e.flags|=32),Oc(t,e),ve(t,e,o,n),e.child;case 6:return t===null&&qs(e),null;case 13:return kc(t,e,n);case 4:return Zo(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Rn(e,null,r,n):ve(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ve(r,i),dl(t,e,r,i,n);case 7:return ve(t,e,e.pendingProps,n),e.child;case 8:return ve(t,e,e.pendingProps.children,n),e.child;case 12:return ve(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,j(vi,r._currentValue),r._currentValue=o,s!==null)if(Ke(s.value,o)){if(s.children===i.children&&!Ne.current){e=dt(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=at(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var g=u.pending;g===null?l.next=l:(l.next=g.next,g.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),eo(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(D(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),eo(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ve(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Tn(e,n),i=_e(i),r=r(i),e.flags|=1,ve(t,e,r,n),e.child;case 14:return r=e.type,i=Ve(r,e.pendingProps),i=Ve(r.type,i),hl(t,e,r,i,n);case 15:return Mc(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ve(r,i),ei(t,e),e.tag=1,Re(r)?(t=!0,pi(e)):t=!1,Tn(e,n),Ic(e,r,i),no(e,r,i,n),so(null,e,r,!0,t,n);case 19:return xc(t,e,n);case 22:return Dc(t,e,n)}throw Error(D(156,e.tag))};function Kc(t,e){return Tu(t,e)}function Uf(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Be(t,e,n,r){return new Uf(t,e,n,r)}function ha(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hf(t){if(typeof t=="function")return ha(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ko)return 11;if(t===xo)return 14}return 2}function Ot(t,e){var n=t.alternate;return n===null?(n=Be(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ri(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")ha(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case on:return bt(n.children,i,s,e);case Lo:o=8,i|=8;break;case Rs:return t=Be(12,n,e,i|2),t.elementType=Rs,t.lanes=s,t;case Ms:return t=Be(13,n,e,i),t.elementType=Ms,t.lanes=s,t;case Ds:return t=Be(19,n,e,i),t.elementType=Ds,t.lanes=s,t;case iu:return Hi(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nu:o=10;break e;case ru:o=9;break e;case ko:o=11;break e;case xo:o=14;break e;case pt:o=16,r=null;break e}throw Error(D(130,t==null?t:typeof t,""))}return e=Be(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function bt(t,e,n,r){return t=Be(7,t,r,e),t.lanes=n,t}function Hi(t,e,n,r){return t=Be(22,t,r,e),t.elementType=iu,t.lanes=n,t.stateNode={isHidden:!1},t}function Ts(t,e,n){return t=Be(6,t,null,e),t.lanes=n,t}function Cs(t,e,n){return e=Be(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jf(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ns(0),this.expirationTimes=ns(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ns(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function fa(t,e,n,r,i,s,o,a,l){return t=new jf(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Be(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xo(s),t}function Wf(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Qc(t){if(!t)return kt;t=t._reactInternals;e:{if(Jt(t)!==t||t.tag!==1)throw Error(D(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Re(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(D(171))}if(t.tag===1){var n=t.type;if(Re(n))return Qu(t,n,e)}return e}function Xc(t,e,n,r,i,s,o,a,l){return t=fa(n,r,!0,t,i,s,o,a,l),t.context=Qc(null),n=t.current,r=Se(),i=Dt(n),s=at(r,i),s.callback=e??null,Rt(n,s,i),t.current.lanes=i,Ar(t,i,r),Me(t,r),t}function ji(t,e,n,r){var i=e.current,s=Se(),o=Dt(i);return n=Qc(n),e.context===null?e.context=n:e.pendingContext=n,e=at(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Rt(i,e,o),t!==null&&($e(t,i,o,s),Zr(t,i,o)),o}function Di(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Il(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ma(t,e){Il(t,e),(t=t.alternate)&&Il(t,e)}function Vf(){return null}var Zc=typeof reportError=="function"?reportError:function(t){console.error(t)};function pa(t){this._internalRoot=t}Wi.prototype.render=pa.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(D(409));ji(t,e,null,null)};Wi.prototype.unmount=pa.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xt(function(){ji(null,t,null,null)}),e[ut]=null}};function Wi(t){this._internalRoot=t}Wi.prototype.unstable_scheduleHydration=function(t){if(t){var e=Du();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Et.length&&e!==0&&e<Et[n].priority;n++);Et.splice(n,0,t),n===0&&Lu(t)}};function ga(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vi(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Nl(){}function bf(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Di(o);s.call(u)}}var o=Xc(e,r,t,0,null,!1,!1,"",Nl);return t._reactRootContainer=o,t[ut]=o.current,cr(t.nodeType===8?t.parentNode:t),Xt(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Di(l);a.call(u)}}var l=fa(t,0,!1,null,null,!1,!1,"",Nl);return t._reactRootContainer=l,t[ut]=l.current,cr(t.nodeType===8?t.parentNode:t),Xt(function(){ji(e,l,n,r)}),l}function bi(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Di(o);a.call(l)}}ji(e,o,t,i)}else o=bf(n,e,t,i,r);return Di(o)}Ru=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bn(e.pendingLanes);n!==0&&(Go(e,n|1),Me(e,q()),!(_&6)&&(On=q()+500,Pt()))}break;case 13:Xt(function(){var r=ct(t,1);if(r!==null){var i=Se();$e(r,t,1,i)}}),ma(t,1)}};Bo=function(t){if(t.tag===13){var e=ct(t,134217728);if(e!==null){var n=Se();$e(e,t,134217728,n)}ma(t,134217728)}};Mu=function(t){if(t.tag===13){var e=Dt(t),n=ct(t,e);if(n!==null){var r=Se();$e(n,t,e,r)}ma(t,e)}};Du=function(){return U};Ou=function(t,e){var n=U;try{return U=t,e()}finally{U=n}};_s=function(t,e,n){switch(e){case"input":if(ks(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Pi(r);if(!i)throw Error(D(90));ou(r),ks(r,i)}}}break;case"textarea":lu(t,n);break;case"select":e=n.value,e!=null&&En(t,!!n.multiple,e,!1)}};pu=ua;gu=Xt;var Yf={usingClientEntryPoint:!1,Events:[Nr,cn,Pi,fu,mu,ua]},jn={findFiberByHostInstance:Ht,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zf={bundleType:jn.bundleType,version:jn.version,rendererPackageName:jn.rendererPackageName,rendererConfig:jn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ht.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yu(t),t===null?null:t.stateNode},findFiberByHostInstance:jn.findFiberByHostInstance||Vf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yr.isDisabled&&Yr.supportsFiber)try{Li=Yr.inject(zf),et=Yr}catch{}}xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yf;xe.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ga(e))throw Error(D(200));return Wf(t,e,null,n)};xe.createRoot=function(t,e){if(!ga(t))throw Error(D(299));var n=!1,r="",i=Zc;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=fa(t,1,!1,null,null,n,!1,r,i),t[ut]=e.current,cr(t.nodeType===8?t.parentNode:t),new pa(e)};xe.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(D(188)):(t=Object.keys(t).join(","),Error(D(268,t)));return t=yu(e),t=t===null?null:t.stateNode,t};xe.flushSync=function(t){return Xt(t)};xe.hydrate=function(t,e,n){if(!Vi(e))throw Error(D(200));return bi(null,t,e,!0,n)};xe.hydrateRoot=function(t,e,n){if(!ga(t))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Zc;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Xc(e,null,t,1,n??null,i,!1,s,o),t[ut]=e.current,cr(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Wi(e)};xe.render=function(t,e,n){if(!Vi(e))throw Error(D(200));return bi(null,t,e,!1,n)};xe.unmountComponentAtNode=function(t){if(!Vi(t))throw Error(D(40));return t._reactRootContainer?(Xt(function(){bi(null,null,t,!1,function(){t._reactRootContainer=null,t[ut]=null})}),!0):!1};xe.unstable_batchedUpdates=ua;xe.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Vi(n))throw Error(D(200));if(t==null||t._reactInternals===void 0)throw Error(D(38));return bi(t,e,n,!1,r)};xe.version="18.3.1-next-f1338f8080-20240426";function Jc(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jc)}catch(t){console.error(t)}}Jc(),Jl.exports=xe;var $f=Jl.exports,Rl=$f;Is.createRoot=Rl.createRoot,Is.hydrateRoot=Rl.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yr(){return yr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yr.apply(this,arguments)}var Tt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Tt||(Tt={}));const Ml="popstate";function Kf(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=qt(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),vo("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof s=="string"?s:qc(s))}function r(i,s){Yi(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return Xf(e,n,r,t)}function se(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Qf(){return Math.random().toString(36).substr(2,8)}function Dl(t,e){return{usr:t.state,key:t.key,idx:e}}function vo(t,e,n,r){return n===void 0&&(n=null),yr({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?qt(e):e,{state:n,key:e&&e.key||r||Qf()})}function qc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function qt(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Xf(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Tt.Pop,l=null,u=g();u==null&&(u=0,o.replaceState(yr({},o.state,{idx:u}),""));function g(){return(o.state||{idx:null}).idx}function E(){a=Tt.Pop;let m=g(),d=m==null?null:m-u;u=m,l&&l({action:a,location:v.location,delta:d})}function y(m,d){a=Tt.Push;let c=vo(v.location,m,d);n&&n(c,m),u=g()+1;let f=Dl(c,u),T=v.createHref(c);try{o.pushState(f,"",T)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(T)}s&&l&&l({action:a,location:v.location,delta:1})}function S(m,d){a=Tt.Replace;let c=vo(v.location,m,d);n&&n(c,m),u=g();let f=Dl(c,u),T=v.createHref(c);o.replaceState(f,"",T),s&&l&&l({action:a,location:v.location,delta:0})}function h(m){let d=i.location.origin!=="null"?i.location.origin:i.location.href,c=typeof m=="string"?m:qc(m);return c=c.replace(/ $/,"%20"),se(d,"No window.location.(origin|href) available to create URL for href: "+c),new URL(c,d)}let v={get action(){return a},get location(){return t(i,o)},listen(m){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Ml,E),l=m,()=>{i.removeEventListener(Ml,E),l=null}},createHref(m){return e(i,m)},createURL:h,encodeLocation(m){let d=h(m);return{pathname:d.pathname,search:d.search,hash:d.hash}},push:y,replace:S,go(m){return o.go(m)}};return v}var Ol;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ol||(Ol={}));function Zf(t,e,n){return n===void 0&&(n="/"),Jf(t,e,n)}function Jf(t,e,n,r){let i=typeof e=="string"?qt(e):e,s=nd(i.pathname||"/",n);if(s==null)return null;let o=ed(t);qf(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=dm(s);a=lm(o[l],u)}return a}function ed(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(se(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Yt([r,l.relativePath]),g=n.concat(l);s.children&&s.children.length>0&&(se(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),ed(s.children,e,g,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:om(u,s.index),routesMeta:g})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of td(s.path))i(s,o,l)}),e}function td(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=td(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function qf(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:am(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const em=/^:[\w-]+$/,tm=3,nm=2,rm=1,im=10,sm=-2,Ll=t=>t==="*";function om(t,e){let n=t.split("/"),r=n.length;return n.some(Ll)&&(r+=sm),e&&(r+=nm),n.filter(i=>!Ll(i)).reduce((i,s)=>i+(em.test(s)?tm:s===""?rm:im),r)}function am(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function lm(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,g=s==="/"?e:e.slice(s.length)||"/",E=um({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},g),y=l.route;if(!E)return null;Object.assign(i,E.params),o.push({params:i,pathname:Yt([s,E.pathname]),pathnameBase:vm(Yt([s,E.pathnameBase])),route:y}),E.pathnameBase!=="/"&&(s=Yt([s,E.pathnameBase]))}return o}function um(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=cm(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,g,E)=>{let{paramName:y,isOptional:S}=g;if(y==="*"){let v=a[E]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const h=a[E];return S&&!h?u[y]=void 0:u[y]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function cm(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Yi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function dm(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yi(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function nd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const hm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fm=t=>hm.test(t);function mm(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?qt(t):t,s;if(n)if(fm(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Yi(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=kl(n.substring(1),"/"):s=kl(n,e)}else s=e;return{pathname:s,search:ym(r),hash:Sm(i)}}function kl(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function As(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pm(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function gm(t,e){let n=pm(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Em(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=qt(t):(i=yr({},t),se(!i.pathname||!i.pathname.includes("?"),As("?","pathname","search",i)),se(!i.pathname||!i.pathname.includes("#"),As("#","pathname","hash",i)),se(!i.search||!i.search.includes("#"),As("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let E=e.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),E-=1;i.pathname=y.join("/")}a=E>=0?e[E]:"/"}let l=mm(i,a),u=o&&o!=="/"&&o.endsWith("/"),g=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||g)&&(l.pathname+="/"),l}const Yt=t=>t.join("/").replace(/\/\/+/g,"/"),vm=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ym=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Sm=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Tm(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const rd=["post","put","patch","delete"];new Set(rd);const Cm=["get",...rd];new Set(Cm);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sr(){return Sr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sr.apply(this,arguments)}const Ea=I.createContext(null),Am=I.createContext(null),zi=I.createContext(null),$i=I.createContext(null),en=I.createContext({outlet:null,matches:[],isDataRoute:!1}),id=I.createContext(null);function Ki(){return I.useContext($i)!=null}function sd(){return Ki()||se(!1),I.useContext($i).location}function od(t){I.useContext(zi).static||I.useLayoutEffect(t)}function ad(){let{isDataRoute:t}=I.useContext(en);return t?Fm():Im()}function Im(){Ki()||se(!1);let t=I.useContext(Ea),{basename:e,future:n,navigator:r}=I.useContext(zi),{matches:i}=I.useContext(en),{pathname:s}=sd(),o=JSON.stringify(gm(i,n.v7_relativeSplatPath)),a=I.useRef(!1);return od(()=>{a.current=!0}),I.useCallback(function(u,g){if(g===void 0&&(g={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let E=Em(u,JSON.parse(o),s,g.relative==="path");t==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Yt([e,E.pathname])),(g.replace?r.replace:r.push)(E,g.state,g)},[e,r,o,s,t])}function Nm(){let{matches:t}=I.useContext(en),e=t[t.length-1];return e?e.params:{}}function Rm(t,e){return Mm(t,e)}function Mm(t,e,n,r){Ki()||se(!1);let{navigator:i}=I.useContext(zi),{matches:s}=I.useContext(en),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=sd(),g;if(e){var E;let m=typeof e=="string"?qt(e):e;l==="/"||(E=m.pathname)!=null&&E.startsWith(l)||se(!1),g=m}else g=u;let y=g.pathname||"/",S=y;if(l!=="/"){let m=l.replace(/^\//,"").split("/");S="/"+y.replace(/^\//,"").split("/").slice(m.length).join("/")}let h=Zf(t,{pathname:S}),v=xm(h&&h.map(m=>Object.assign({},m,{params:Object.assign({},a,m.params),pathname:Yt([l,i.encodeLocation?i.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?l:Yt([l,i.encodeLocation?i.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),s,n,r);return e&&v?I.createElement($i.Provider,{value:{location:Sr({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Tt.Pop}},v):v}function Dm(){let t=Bm(),e=Tm(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:i},n):null,null)}const Om=I.createElement(Dm,null);class Lm extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?I.createElement(en.Provider,{value:this.props.routeContext},I.createElement(id.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function km(t){let{routeContext:e,match:n,children:r}=t,i=I.useContext(Ea);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(en.Provider,{value:e},r)}function xm(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let g=o.findIndex(E=>E.route.id&&(a==null?void 0:a[E.route.id])!==void 0);g>=0||se(!1),o=o.slice(0,Math.min(o.length,g+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let g=0;g<o.length;g++){let E=o[g];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(u=g),E.route.id){let{loaderData:y,errors:S}=n,h=E.route.loader&&y[E.route.id]===void 0&&(!S||S[E.route.id]===void 0);if(E.route.lazy||h){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((g,E,y)=>{let S,h=!1,v=null,m=null;n&&(S=a&&E.route.id?a[E.route.id]:void 0,v=E.route.errorElement||Om,l&&(u<0&&y===0?(_m("route-fallback"),h=!0,m=null):u===y&&(h=!0,m=E.route.hydrateFallbackElement||null)));let d=e.concat(o.slice(0,y+1)),c=()=>{let f;return S?f=v:h?f=m:E.route.Component?f=I.createElement(E.route.Component,null):E.route.element?f=E.route.element:f=g,I.createElement(km,{match:E,routeContext:{outlet:g,matches:d,isDataRoute:n!=null},children:f})};return n&&(E.route.ErrorBoundary||E.route.errorElement||y===0)?I.createElement(Lm,{location:n.location,revalidation:n.revalidation,component:v,error:S,children:c(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):c()},null)}var ld=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ld||{}),ud=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ud||{});function wm(t){let e=I.useContext(Ea);return e||se(!1),e}function Pm(t){let e=I.useContext(Am);return e||se(!1),e}function Gm(t){let e=I.useContext(en);return e||se(!1),e}function cd(t){let e=Gm(),n=e.matches[e.matches.length-1];return n.route.id||se(!1),n.route.id}function Bm(){var t;let e=I.useContext(id),n=Pm(),r=cd();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Fm(){let{router:t}=wm(ld.UseNavigateStable),e=cd(ud.UseNavigateStable),n=I.useRef(!1);return od(()=>{n.current=!0}),I.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Sr({fromRouteId:e},s)))},[t,e])}const xl={};function _m(t,e,n){xl[t]||(xl[t]=!0)}function Um(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function yo(t){se(!1)}function Hm(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Tt.Pop,navigator:s,static:o=!1,future:a}=t;Ki()&&se(!1);let l=e.replace(/^\/*/,"/"),u=I.useMemo(()=>({basename:l,navigator:s,static:o,future:Sr({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=qt(r));let{pathname:g="/",search:E="",hash:y="",state:S=null,key:h="default"}=r,v=I.useMemo(()=>{let m=nd(g,l);return m==null?null:{location:{pathname:m,search:E,hash:y,state:S,key:h},navigationType:i}},[l,g,E,y,S,h,i]);return v==null?null:I.createElement(zi.Provider,{value:u},I.createElement($i.Provider,{children:n,value:v}))}function jm(t){let{children:e,location:n}=t;return Rm(So(e),n)}new Promise(()=>{});function So(t,e){e===void 0&&(e=[]);let n=[];return I.Children.forEach(t,(r,i)=>{if(!I.isValidElement(r))return;let s=[...e,i];if(r.type===I.Fragment){n.push.apply(n,So(r.props.children,s));return}r.type!==yo&&se(!1),!r.props.index||!r.props.children||se(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=So(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Wm="6";try{window.__reactRouterVersion=Wm}catch{}const Vm="startTransition",wl=Gd[Vm];function bm(t){let{basename:e,children:n,future:r,window:i}=t,s=I.useRef();s.current==null&&(s.current=Kf({window:i,v5Compat:!0}));let o=s.current,[a,l]=I.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},g=I.useCallback(E=>{u&&wl?wl(()=>l(E)):l(E)},[l,u]);return I.useLayoutEffect(()=>o.listen(g),[o,g]),I.useEffect(()=>Um(r),[r]),I.createElement(Hm,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var Pl;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Pl||(Pl={}));var Gl;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Gl||(Gl={}));class Ym{constructor(e,n="default-user"){R(this,"baseUrl");R(this,"userId");this.baseUrl=e.replace(/\/$/,""),this.userId=n}async load(){try{const e=`${this.baseUrl}/memory?userId=${encodeURIComponent(this.userId)}`,n=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);return(await n.json()).data||null}catch(e){throw console.error("Failed to load from HTTP memory store:",e),e}}async save(e){try{const n=`${this.baseUrl}/memory`,r={userId:this.userId,data:e},i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);const s=await i.json();if(s.success===!1)throw new Error(s.message||"Save operation failed")}catch(n){throw console.error("Failed to save to HTTP memory store:",n),n}}}const Bl=24*60*60*1e3;class zm{constructor(e){R(this,"data");R(this,"memoryStore");R(this,"currentSession",null);R(this,"sessionCounter",0);this.memoryStore=e||this.createDefaultStore(),this.data=this.createEmptyData()}createDefaultStore(){const e="https://y515etwgi3.execute-api.ap-south-1.amazonaws.com/default";return console.log("Using HttpMemoryStore with endpoint:",e),new Ym(e)}async initialize(){try{const e=await this.memoryStore.load();e?(this.updateAvoidanceDays(e),e.firstLaunchedAt||(e.firstLaunchedAt={}),delete e.gameSelectionCounts,delete e.consecutiveSelections,delete e.lastSelectedGame,delete e.lastSelectedTimestamp,delete e.currentSelectionStreak,this.data=e):this.data=this.createEmptyData()}catch(e){console.error("Failed to initialize memory store, using empty data:",e),this.data=this.createEmptyData()}}createEmptyData(){return{gameLaunchCounts:{},lastPlayedGame:null,lastPlayedTimestamp:null,firstLaunchedAt:{},consecutiveReplays:{},currentStreak:null,gameAvoidanceDays:{},totalSessions:0,snakeFailStreaks:0,snakeLastScore:0,snakeBestScore:0,recentSessions:[],isFirstTime:!0,accountCreated:Date.now()}}updateAvoidanceDays(e){const n=Date.now();["snake","minesweeper","pacman","blockbreaker"].forEach(i=>{const s=this.getLastPlayedTime(i,e);if(s){const o=Math.floor((n-s)/Bl);e.gameAvoidanceDays[i]=o}else{const o=Math.floor((n-e.accountCreated)/Bl);e.gameAvoidanceDays[i]=o}})}getLastPlayedTime(e,n){for(let r=n.recentSessions.length-1;r>=0;r--){const s=n.recentSessions[r].gameLaunches.find(o=>o.gameId===e);if(s)return s.timestamp}return null}async saveData(){try{await this.memoryStore.save(this.data)}catch(e){console.error("Failed to save memory data:",e)}}startSession(){const e=`console_${Date.now()}_${++this.sessionCounter}`;return this.currentSession={sessionId:e,startTime:Date.now(),gameLaunches:[],totalTimeSpent:0},this.data.totalSessions++,this.data.isFirstTime=!1,e}recordGameLaunch(e){var s;if(!this.currentSession)return;const n=Date.now(),r={gameId:e,timestamp:n};this.currentSession.gameLaunches.push(r);const i=this.data.gameLaunchCounts[e]||0;this.data.gameLaunchCounts[e]=i+1,this.data.lastPlayedGame=e,this.data.lastPlayedTimestamp=n,i===0&&(this.data.firstLaunchedAt[e]=n),((s=this.data.currentStreak)==null?void 0:s.gameId)===e?(this.data.currentStreak.count++,this.data.consecutiveReplays[e]=this.data.currentStreak.count):(this.data.currentStreak&&(this.data.consecutiveReplays[this.data.currentStreak.gameId]=0),this.data.currentStreak={gameId:e,count:1},this.data.consecutiveReplays[e]=1),this.data.gameAvoidanceDays[e]=0,this.updateAvoidanceDays(this.data),this.saveData()}recordSnakeGameEnd(e,n){this.data.snakeLastScore=e,e>this.data.snakeBestScore?(this.data.snakeBestScore=e,this.data.snakeFailStreaks=0):n?this.data.snakeFailStreaks++:this.data.snakeFailStreaks=0,this.saveData()}endSession(){this.currentSession&&(this.currentSession.endTime=Date.now(),this.currentSession.totalTimeSpent=this.currentSession.endTime-this.currentSession.startTime,this.data.recentSessions.push(this.currentSession),this.data.recentSessions.length>20&&(this.data.recentSessions=this.data.recentSessions.slice(-20)),this.currentSession=null,this.saveData())}getGlobalData(){return{...this.data}}getGameLaunchCount(e){return this.data.gameLaunchCounts[e]||0}getConsecutiveReplays(e){return this.data.consecutiveReplays[e]||0}getAvoidanceDays(e){return this.data.gameAvoidanceDays[e]||0}getSnakeFailStreak(){return this.data.snakeFailStreaks}isFirstTimeUser(){return Object.keys(this.data.firstLaunchedAt).length===0}isFirstTimePlayingGame(e){return!this.data.firstLaunchedAt[e]}getTotalSessions(){return this.data.totalSessions}getLastPlayedGame(){return this.data.lastPlayedGame}isAvoidingGame(e){const n=this.getAvoidanceDays(e),r=this.getTotalSessions();return n>=3&&r>=5||n>=r&&r>=10}isEscapingFailure(e){return this.getLastPlayedGame()==="snake"&&e!=="snake"&&this.getSnakeFailStreak()>=3}}var J=(t=>(t.APP_LOAD="app_load",t.GAME_SELECTION="game_selection",t.GAME_LAUNCH="game_launch",t.REPEATED_SELECTION="repeated_selection",t.GAME_AVOIDANCE="game_avoidance",t.FAILURE_ESCAPE="failure_escape",t.SELECTION_SWITCH="selection_switch",t))(J||{});class $m{constructor(){R(this,"lastCommentary","");R(this,"commentaryHistory",[])}generateCommentary(e,n){let r="";switch(e.trigger){case J.APP_LOAD:r=this.getAppLoadCommentary(n);break;case J.GAME_SELECTION:r=this.getGameSelectionCommentary(e,n);break;case J.GAME_LAUNCH:r=this.getGameLaunchCommentary(e,n);break;case J.REPEATED_SELECTION:r=this.getRepeatedSelectionCommentary(e,n);break;case J.SELECTION_SWITCH:r=this.getSelectionSwitchCommentary(e,n);break;case J.GAME_AVOIDANCE:r=this.getAvoidanceCommentary(e,n);break;case J.FAILURE_ESCAPE:r=this.getFailureEscapeCommentary(e,n);break}return r===this.lastCommentary&&(r=this.getAlternativeCommentary(e.trigger)),this.lastCommentary=r,this.commentaryHistory.push(r),this.commentaryHistory.length>5&&(this.commentaryHistory=this.commentaryHistory.slice(-5)),r}getAppLoadCommentary(e){if(Object.values(e.gameLaunchCounts).reduce((l,u)=>l+u,0)===0)return" WELCOME TO THE ARCADE... PREPARE FOR DISAPPOINTMENT";const r=e.totalSessions,i=e.lastPlayedGame,s=e.snakeFailStreaks;if(s>=5)return` BACK FOR MORE PUNISHMENT? SNAKE FAILURES: ${s}`;const o=Object.entries(e.gameAvoidanceDays).filter(([l,u])=>u>=3).map(([l,u])=>({gameId:l,days:u})).sort((l,u)=>u.days-l.days);if(o.length>0){const l=o[0];return` ${l.gameId.toUpperCase()} AVOIDED FOR ${l.days} DAYS... FEAR DETECTED`}if(r>20)return` SESSION ${r}... STILL NO IMPROVEMENT DETECTED`;if(i&&e.lastPlayedTimestamp){const l=Math.floor((Date.now()-e.lastPlayedTimestamp)/36e5);if(l<1)return` BACK SO SOON? ${i.toUpperCase()} ADDICTION CONFIRMED`;if(l<24)return` WELCOME BACK... ${l} HOURS OF WITHDRAWAL COMPLETE`}const a=[" ARCADE ATTENDANT: STILL HERE, UNFORTUNATELY"," SYSTEM STATUS: READY TO JUDGE YOUR PERFORMANCE"," WELCOME BACK... LET'S SEE WHAT GOES WRONG TODAY"];return a[Math.floor(Math.random()*a.length)]}getGameSelectionCommentary(e,n){const{gameId:r}=e;if(!r)return" GAME SELECTION DETECTED";const i=n.gameLaunchCounts[r]||0,s=n.gameAvoidanceDays[r]||0;return i===0?` FIRST TIME WITH ${{snake:"SNAKE",minesweeper:"MINESWEEPER",pacman:"PAC-MAN",blockbreaker:"BLOCK BREAKER"}[r]}... THIS SHOULD BE INTERESTING`:s>=2?` ${r.toUpperCase()} AFTER ${s} DAYS... COURAGE OR DESPERATION?`:i>=20?` ${r.toUpperCase()} VETERAN... ${i} SESSIONS AND COUNTING`:i>=10?` ${r.toUpperCase()} REGULAR... SESSION #${i}`:` ${r.toUpperCase()} PREVIEW... ${i} SESSIONS LOGGED`}getRepeatedSelectionCommentary(e,n){const{gameId:r,consecutiveCount:i=0}=e;if(!r)return" REPETITIVE BEHAVIOR DETECTED";const s=r.toUpperCase();return i>=15?` ${s} x${i}... CLINICAL OBSESSION CONFIRMED`:i>=10?` ${s} x${i}... DEFINITION OF INSANITY ACHIEVED`:i>=7?` ${s} AGAIN? ${i} TIMES... INTERVENTION REQUIRED`:i>=5?` ${s} x${i}... SERIOUSLY? VARIETY EXISTS`:i>=3?` ${s} TRIPLE SELECTION... PREDICTABILITY CONFIRMED`:` ${s} ENCORE... CREATIVITY LEVEL: ZERO`}getAvoidanceCommentary(e,n){const{gameId:r,avoidanceDays:i=0}=e;if(!r)return" AVOIDANCE BEHAVIOR NOTED";const s=r.toUpperCase(),o=n.totalSessions;return i===0&&o>=10?` ${s} REMAINS UNTOUCHED AFTER ${o} SESSIONS... COWARD`:i>=14?` ${s} AVOIDED FOR ${i} DAYS... TRAUMA DETECTED`:i>=7?` ${s} NEGLECTED FOR A WEEK... COMMITMENT ISSUES?`:` ${s} AVOIDANCE PATTERN CONFIRMED`}getGameLaunchCommentary(e,n){const{gameId:r}=e;if(!r)return" GAME LAUNCH DETECTED";const i=r.toUpperCase();if(n.gameLaunchCounts[r],(n.consecutiveReplays[r]||0)>=3)return` ${i} LAUNCH... OPTIMISM IS ADMIRABLE`;const o=[` ${i} INITIATED... FINGERS CROSSED THIS TIME`,` LAUNCHING ${i}... HOPE SPRINGS ETERNAL`,` ${i} STARTING... STATISTICAL IMPROVEMENT UNLIKELY`];return o[Math.floor(Math.random()*o.length)]}getSelectionSwitchCommentary(e,n){const{gameId:r,consecutiveCount:i=0}=e,s=(r==null?void 0:r.toUpperCase())||"UNKNOWN",o=[` FINALLY... SWITCHING TO ${s} AFTER ${i} REPETITIONS`,` ${s} SELECTED... VARIETY BREAKTHROUGH ACHIEVED`,` DECISION PARALYSIS RESOLVED... ${s} IT IS`,` ${i} SELECTIONS LATER... GROWTH DETECTED`];return o[Math.floor(Math.random()*o.length)]}getFailureEscapeCommentary(e,n){const{gameId:r,failureCount:i=0}=e,s=(r==null?void 0:r.toUpperCase())||"UNKNOWN",o=[` FLEEING TO ${s} AFTER ${i} SNAKE FAILURES... TACTICAL RETREAT`,` SNAKE DEFEAT CONFIRMED... SEEKING REFUGE IN ${s}`,` ${i} SNAKE FAILURES... ${s} WON'T BE EASIER`,` ABANDONING SNAKE AFTER ${i} ATTEMPTS... WISE CHOICE`];return o[Math.floor(Math.random()*o.length)]}getAlternativeCommentary(e){const r={[J.APP_LOAD]:[" ARCADE SYSTEMS ONLINE... UNFORTUNATELY"," BEHAVIORAL ANALYSIS READY... PREPARE FOR JUDGMENT"],[J.GAME_SELECTION]:[" GAME CHOICE REGISTERED... ANALYZING POOR DECISIONS"," SELECTION CONFIRMED... LOWERING EXPECTATIONS"],[J.GAME_LAUNCH]:[" GAME LAUNCH CONFIRMED... BRACE FOR IMPACT"," STARTING GAME... STATISTICAL FAILURE IMMINENT"],[J.REPEATED_SELECTION]:[" REPETITION DETECTED... CREATIVITY LEVEL: ZERO"," SAME GAME AGAIN... SHOCKING DEVELOPMENT"],[J.SELECTION_SWITCH]:[" VARIETY DETECTED... UNPRECEDENTED DEVELOPMENT"," GAME SWITCHING... DECISION MAKING IMPROVEMENT"],[J.GAME_AVOIDANCE]:[" AVOIDANCE CONFIRMED... FEAR IS UNDERSTANDABLE"," SELECTIVE GAMING... COWARDICE NOTED"],[J.FAILURE_ESCAPE]:[" STRATEGIC WITHDRAWAL... RETREAT ACKNOWLEDGED"," GAME SWITCHING... DAMAGE CONTROL INITIATED"]}[e]||[" SYSTEM COMMENTARY UPDATING..."];return r[Math.floor(Math.random()*r.length)]}getCurrentCommentary(){return this.lastCommentary||" ARCADE ATTENDANT READY"}}class Km{constructor(e){R(this,"behaviorTracker");R(this,"commentaryGenerator");R(this,"lastGameSelection",null);R(this,"isInitialized",!1);this.behaviorTracker=new zm(e),this.commentaryGenerator=new $m}async initialize(){this.isInitialized||(await this.behaviorTracker.initialize(),this.isInitialized=!0)}async onAppLoad(){await this.initialize(),this.behaviorTracker.startSession();const e=this.behaviorTracker.getGlobalData(),n={trigger:J.APP_LOAD,sessionCount:e.totalSessions};return{commentary:this.commentaryGenerator.generateCommentary(n,e),isActive:!0,globalData:e}}onGamePreview(e){const n=this.behaviorTracker.getGlobalData();let r=J.GAME_SELECTION,i={trigger:r,gameId:e};this.isFirstTimePlayingGame(e)?(r=J.GAME_SELECTION,i={trigger:r,gameId:e}):this.behaviorTracker.isAvoidingGame(e)?(r=J.GAME_AVOIDANCE,i={trigger:r,gameId:e,avoidanceDays:this.behaviorTracker.getAvoidanceDays(e)}):this.behaviorTracker.isEscapingFailure(e)&&(r=J.FAILURE_ESCAPE,i={trigger:r,gameId:e,failureCount:this.behaviorTracker.getSnakeFailStreak()});const s=this.commentaryGenerator.generateCommentary(i,n);return this.lastGameSelection=e,{commentary:s,isActive:!0,globalData:n}}onGameLaunch(e){this.behaviorTracker.recordGameLaunch(e);const n=this.behaviorTracker.getGlobalData(),r={trigger:J.GAME_LAUNCH,gameId:e};return{commentary:this.commentaryGenerator.generateCommentary(r,n),isActive:!0,globalData:n}}onSnakeGameEnd(e){const n=e<30;this.behaviorTracker.recordSnakeGameEnd(e,n)}onSessionEnd(){this.behaviorTracker.endSession()}getCurrentState(){const e=this.behaviorTracker.getGlobalData();return{commentary:this.commentaryGenerator.getCurrentCommentary(),isActive:!0,globalData:e}}getGameLaunchCount(e){return this.behaviorTracker.getGameLaunchCount(e)}getConsecutiveReplays(e){return this.behaviorTracker.getConsecutiveReplays(e)}getAvoidanceDays(e){return this.behaviorTracker.getAvoidanceDays(e)}getSnakeFailStreak(){return this.behaviorTracker.getSnakeFailStreak()}isFirstTimeUser(){return this.behaviorTracker.isFirstTimeUser()}isFirstTimePlayingGame(e){return this.behaviorTracker.isFirstTimePlayingGame(e)}getTotalSessions(){return this.behaviorTracker.getTotalSessions()}shouldShowConsoleCommentary(e){return e===null||this.lastGameSelection===e}getBehavioralInsight(e){const n=this.getGameLaunchCount(e),r=this.getConsecutiveReplays(e),i=this.getAvoidanceDays(e),s=this.behaviorTracker.getGlobalData();if(n===0)return"Untested territory awaits exploration.";if(r>=5)return"Obsessive focus detected on this title.";if(r>=3)return"Strong preference for repeated sessions.";if(i>=14&&n>0)return"Extended avoidance suggests deep frustration.";if(i>=7&&n>0)return"Long-term avoidance indicates difficulty.";if(e==="snake"){const o=s.snakeFailStreaks,a=s.snakeBestScore;if(o>=5)return"Severe skill degradation detected.";if(o>=3)return"Recent failures indicate declining performance.";if(a>=300)return"Advanced player with proven capabilities.";if(a>=150)return"Competent player with growth potential.";if(a>=50)return"Developing skills with moderate success.";if(n>=10)return"Persistent despite limited progress."}return n>=20?"Veteran player with extensive experience.":n>=10?"Regular engagement with steady commitment.":n>=5?"Moderate interest with consistent returns.":n>=2?"Cautious exploration of game mechanics.":"Initial curiosity with limited exposure."}getLastPlayedTimestamp(e){const n=this.behaviorTracker.getGlobalData();for(let r=n.recentSessions.length-1;r>=0;r--){const s=n.recentSessions[r].gameLaunches.find(o=>o.gameId===e);if(s)return s.timestamp}return null}formatLastPlayed(e){const n=this.getLastPlayedTimestamp(e),r=this.getAvoidanceDays(e);if(!n||r===0)return r===0?"Today":"Never";if(r===1)return"Yesterday";if(r<7)return`${r} days ago`;if(r<30){const i=Math.floor(r/7);return i===1?"1 week ago":`${i} weeks ago`}else{const i=Math.floor(r/30);return i===1?"1 month ago":`${i} months ago`}}getBestScore(e){const n=this.behaviorTracker.getGlobalData();switch(e){case"snake":return n.snakeBestScore>0?n.snakeBestScore:null;default:return null}}debugGlobalData(){const e=this.behaviorTracker.getGlobalData();console.log("=== GLOBAL AI MEMORY DEBUG ==="),console.log("Total Sessions:",e.totalSessions),console.log("Game Launch Counts:",e.gameLaunchCounts),console.log("Consecutive Replays:",e.consecutiveReplays),console.log("Current Replay Streak:",e.currentStreak),console.log("Last Played Game:",e.lastPlayedGame),console.log("Last Played Timestamp:",e.lastPlayedTimestamp),console.log("Is First Time:",this.isFirstTimeUser()),console.log("===============================")}}const dd=I.createContext({consoleAI:null}),hd=()=>{const t=I.useContext(dd);if(!t)throw new Error("useConsoleAI must be used within a ConsoleAIProvider");return t},Qm=({children:t})=>{const e=I.useRef(null);return e.current||(e.current=new Km),p.jsx(dd.Provider,{value:{consoleAI:e.current},children:t})};var To=(t=>(t.BOOT="BOOT",t.RUNNING="RUNNING",t.SHUTDOWN="SHUTDOWN",t))(To||{});const fd=I.createContext(null),md=()=>{const t=I.useContext(fd);if(!t)throw new Error("useConsoleSystem must be used within a ConsoleSystemProvider");return t},Xm=({children:t})=>{const[e,n]=I.useState("BOOT"),r=()=>{n("SHUTDOWN")},i=()=>{n("RUNNING")};return p.jsx(fd.Provider,{value:{systemState:e,powerOff:r,bootComplete:i},children:t})};function Tr({text:t,speed:e=28}){const[n,r]=I.useState("");return I.useEffect(()=>{r("");let i=0;const s=setInterval(()=>{i++,r(t.slice(0,i)),i>=t.length&&clearInterval(s)},e);return()=>clearInterval(s)},[t,e]),p.jsxs("span",{className:"typed-text",children:[n,p.jsx("span",{className:"cursor",children:""})]})}const Zm={dashboard:"music/dashboard.mp3",game:"music/game.mp3"},Jm={snake:"music/game-over.mp3",pacman:"music/pac-man.mp3","block-breaker":"music/game-over.mp3",minesweeper:"music/explosion.mp3"},qm="music/you-win.mp3",Ut=class Ut{constructor(){R(this,"currentMusic",null);R(this,"currentMusicType",null);R(this,"pendingMusicType",null);R(this,"musicVolume",.12);R(this,"sfxVolume",.3);R(this,"isInitialized",!1)}static getInstance(){return Ut.instance||(Ut.instance=new Ut),Ut.instance}initialize(){if(this.isInitialized)return;const e=()=>{this.isInitialized=!0,this.pendingMusicType&&(this.playMusic(this.pendingMusicType),this.pendingMusicType=null),document.removeEventListener("click",e),document.removeEventListener("keydown",e)};document.addEventListener("click",e),document.addEventListener("keydown",e)}playMusic(e){if(!this.isInitialized){this.pendingMusicType=e;return}if(this.currentMusicType===e&&this.currentMusic&&!this.currentMusic.paused)return;this.stopMusic();const n=Zm[e];this.currentMusic=new Audio(n),this.currentMusic.loop=!0,this.currentMusic.volume=this.musicVolume,this.currentMusicType=e,this.currentMusic.play().catch(()=>{})}stopMusic(){this.currentMusic&&(this.currentMusic.pause(),this.currentMusic.currentTime=0,this.currentMusic=null,this.currentMusicType=null)}playSFX(e,n){if(!this.isInitialized)return;let r;if(e==="youWin"&&(r=qm),e==="gameOver"&&n&&(r=Jm[n]),!r)return;const i=new Audio(r);i.volume=this.sfxVolume,i.play().catch(()=>{}),i.addEventListener("ended",()=>i.remove())}fadeOutMusic(e=1e3){return new Promise(n=>{if(!this.currentMusic)return n();const r=this.currentMusic.volume/(e/50),i=setInterval(()=>{if(!this.currentMusic){clearInterval(i),n();return}this.currentMusic.volume=Math.max(0,this.currentMusic.volume-r),this.currentMusic.volume===0&&(this.stopMusic(),clearInterval(i),n())},50)})}setMusicVolume(e){this.musicVolume=Math.max(0,Math.min(1,e)),this.currentMusic&&(this.currentMusic.volume=this.musicVolume)}setSFXVolume(e){this.sfxVolume=Math.max(0,Math.min(1,e))}};R(Ut,"instance");let Co=Ut;const tn=()=>{const t=I.useRef(Co.getInstance());return I.useEffect(()=>{t.current.initialize()},[]),{playMusic:e=>t.current.playMusic(e),stopMusic:()=>t.current.stopMusic(),fadeOutMusic:e=>t.current.fadeOutMusic(e),playSFX:(e,n)=>t.current.playSFX(e,n),setMusicVolume:e=>t.current.setMusicVolume(e),setSFXVolume:e=>t.current.setSFXVolume(e)}},ep=()=>{var f,T;const t=ad(),{consoleAI:e}=hd(),{powerOff:n}=md(),[r,i]=I.useState(0),[s,o]=I.useState(""),[a,l]=I.useState(null),[u,g]=I.useState(null),[E,y]=I.useState(0),S=I.useRef(null),{playMusic:h,stopMusic:v}=tn();I.useEffect(()=>{let A=!0;return(async()=>{if(!e)return;const C=await e.onAppLoad();A&&l(C),"debugGlobalData"in e&&e.debugGlobalData()})(),()=>{A=!1,e&&e.onSessionEnd()}},[e]),I.useEffect(()=>(h("dashboard"),()=>{v()}),[]);const m=[{id:"snake",name:"Snake",subtitle:"Goal: Score 500 (Impossible)",description:`The rules are familiar.
The board is not.
Something is learning how you move  and it gets bored easily.
Goal: Reach a score of 500. Impossible? Possibly`,bannerImage:"banners/snake.png",playerCount:1},{id:"minesweeper",name:"Minesweeper",subtitle:`Find the mines
Trust no one`,description:`The numbers never lie.
But they dont tell the whole truth either.
Tread carefully...`,bannerImage:"banners/minesweeper.png",playerCount:1},{id:"pacman",name:"Pac-Man",subtitle:"But with a twist",description:`Youve memorized the maze.
Theyve memorized you.
Running wont feel the same this time.`,bannerImage:"banners/pacman.png",playerCount:1},{id:"blockbreaker",name:"Block Breaker",subtitle:"Chaotic version",description:`Break the pattern.
The pattern breaks back.
Not all blocks are meant to disappear.`,bannerImage:"banners/block-breaker.png",playerCount:1}];I.useEffect(()=>{const A=N=>{if(!s)switch(N.code){case"ArrowLeft":N.preventDefault(),i(C=>C>0?C-1:m.length-1);break;case"ArrowRight":N.preventDefault(),i(C=>C<m.length-1?C+1:0);break;case"Enter":case"Space":N.preventDefault(),d();break}};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[r,s,m.length]),I.useEffect(()=>{if(S.current){const M=r*260-S.current.offsetWidth/2+130;S.current.scrollTo({left:M,behavior:"smooth"})}const A=()=>{if(S.current){const C=S.current.querySelector(".game-banner.selected");if(C){const M=C.getBoundingClientRect(),L=M.left+M.width/2;y(L)}}};A();const N=setTimeout(A,300);return()=>clearTimeout(N)},[r]),I.useEffect(()=>{if(e&&m[r]){const N=m[r].id,C=e.onGamePreview(N);l(C)}},[r,e]),I.useEffect(()=>{if(e&&m[r]){const N=m[r].id,C=e.getGameLaunchCount(N),M=e.getConsecutiveReplays(N),L=e.formatLastPlayed(N),O=e.getBestScore(N),F=e.getBehavioralInsight(N);g({sessionsPlayed:C,lastPlayed:L,consecutiveStreak:M,bestScore:O,behavioralInsight:F})}},[r,e,a]);const d=()=>{const A=m[r];if(o(`Loading ${A.name}...`),e){console.log(` LAUNCHING GAME: ${A.id}`);const N=e.onGameLaunch(A.id);l(N),console.log(` NEW LAUNCH COUNT: ${e.getGameLaunchCount(A.id)}`)}setTimeout(()=>{o(""),t(`/game/${A.id}`)},1500)},c=A=>{A===r?d():i(A)};return I.useEffect(()=>{const A=()=>{if(S.current){const L=S.current.querySelector(".game-banner.selected");if(L){const O=L.getBoundingClientRect(),F=O.left+O.width/2;y(F)}}},N=()=>{A()},C=()=>{A()},M=S.current;return M&&M.addEventListener("scroll",N),window.addEventListener("resize",C),()=>{M&&M.removeEventListener("scroll",N),window.removeEventListener("resize",C)}},[r]),p.jsxs("div",{className:"nes-console",children:[p.jsxs("div",{className:"console-top-bar",children:[p.jsxs("div",{className:"console-icons",children:[p.jsx("div",{className:"console-icon",children:""}),p.jsx("div",{className:"console-icon",children:""}),p.jsx("div",{className:"console-icon",children:""}),p.jsx("div",{className:"console-icon",children:""})]}),p.jsx("div",{className:"console-title",children:"KES CONSOLE"}),p.jsxs("div",{className:"power-section",children:[p.jsx("button",{className:"power-button",onClick:n,title:"Power Off",children:""}),p.jsx("div",{className:"power-indicator",children:p.jsx("div",{className:"power-light"})})]})]}),p.jsx("div",{className:"game-carousel-container",children:p.jsx("div",{className:"game-carousel",ref:S,children:m.map((A,N)=>p.jsxs("div",{className:`game-banner ${N===r?"selected":""}`,onClick:()=>c(N),children:[p.jsxs("div",{className:"banner-image",children:[p.jsx("img",{src:A.bannerImage,alt:A.name,className:"banner-img",onError:C=>{const M=C.target;M.style.display="none";const L=M.nextElementSibling;L&&(L.style.display="flex")}}),p.jsxs("div",{className:"banner-placeholder",style:{display:"none",background:N===0?"linear-gradient(45deg, #2d5a27, #4a7c59)":N===1?"linear-gradient(45deg, #666, #999)":N===2?"linear-gradient(45deg, #1a1a2e, #16213e)":"linear-gradient(45deg, #2c1810, #5d4037)"},children:[N===0&&p.jsx("div",{className:"snake-visual",children:""}),N===1&&p.jsx("div",{className:"mine-visual",children:""}),N===2&&p.jsx("div",{className:"pacman-visual",children:""}),N===3&&p.jsx("div",{className:"blocks-visual",children:""})]})]}),p.jsxs("div",{className:"banner-overlay",children:[p.jsx("div",{className:"game-title",children:A.name}),p.jsx("div",{className:"game-subtitle",children:A.subtitle}),p.jsxs("div",{className:"player-count",children:[A.playerCount,"P"]})]}),N===r&&p.jsx("div",{className:"selection-glow"})]},A.id))})}),u&&!s&&p.jsxs("div",{className:"game-info-panel",style:{"--arrow-x":`${E}px`},children:[p.jsxs("div",{className:"game-info-header",children:[p.jsx("div",{className:"info-icon",children:""}),p.jsxs("div",{className:"info-title",children:[((f=m[r])==null?void 0:f.name)||"Game"," Information"]})]}),p.jsxs("div",{className:"game-info-content horizontal",children:[p.jsx("div",{className:"game-description",children:((T=m[r])==null?void 0:T.description)||"No description available."}),p.jsxs("div",{className:"info-row",children:[p.jsx("span",{className:"info-label",children:"Sessions Played"}),p.jsx("span",{className:`info-value ${u.sessionsPlayed>=10?"highlight":""}`,children:u.sessionsPlayed})]}),p.jsxs("div",{className:"info-row",children:[p.jsx("span",{className:"info-label",children:"Last Played"}),p.jsx("span",{className:`info-value ${u.lastPlayed==="Today"?"highlight":""}`,children:u.lastPlayed})]}),p.jsxs("div",{className:"info-row",children:[p.jsx("span",{className:"info-label",children:"Consecutive Streak"}),p.jsx("span",{className:`info-value ${u.consecutiveStreak>=3?"highlight":""}`,children:u.consecutiveStreak})]}),u.bestScore!==null&&p.jsxs("div",{className:"info-row",children:[p.jsx("span",{className:"info-label",children:"Best Score"}),p.jsx("span",{className:`info-value ${u.bestScore>=100?"highlight":""}`,children:u.bestScore})]}),p.jsx("div",{className:"info-insight",children:p.jsx(Tr,{text:u.behavioralInsight,speed:25})})]})]}),p.jsx("div",{className:"kai-section",children:p.jsxs("div",{className:"kai-anchor",children:[p.jsxs("div",{className:"kai-avatar",children:[p.jsxs("div",{className:"kai-sprite",children:[p.jsx("img",{src:"avatars/kai.png",alt:"KAI",className:"kai-img",onError:A=>{const N=A.target;N.style.display="none";const C=N.nextElementSibling;C&&(C.style.display="flex")}}),p.jsx("div",{className:"kai-placeholder",style:{display:"none"},children:""})]}),p.jsx("div",{className:"kai-name",children:"KAI"})]}),((a==null?void 0:a.commentary)||s)&&p.jsxs("div",{className:"kai-speech-bubble",children:[p.jsx("div",{className:"speech-content",children:p.jsx(Tr,{text:s||(a==null?void 0:a.commentary)||" AI SYSTEM INITIALIZING...",speed:30})}),p.jsx("div",{className:"speech-tail"})]})]})}),p.jsxs("div",{className:"console-bottom-bar",children:[p.jsxs("div",{className:"control-hints",children:[p.jsx("span",{children:" SELECT"}),p.jsx("span",{children:"ENTER START"}),p.jsx("span",{children:"SPACE CONFIRM"})]}),p.jsxs("div",{className:"status-info",children:[p.jsxs("span",{children:["GAMES: ",m.length]}),p.jsxs("span",{children:["AI: ",a?"ONLINE":"LOADING"]})]})]}),s&&p.jsx("div",{className:"loading-overlay",children:p.jsxs("div",{className:"loading-content",children:[p.jsx("div",{className:"loading-spinner",children:""}),p.jsx("div",{className:"loading-text",children:s})]})})]})};var zn=(t=>(t.UP="UP",t.DOWN="DOWN",t.LEFT="LEFT",t.RIGHT="RIGHT",t))(zn||{}),We=(t=>(t.READY="READY",t.PLAYING="PLAYING",t.GAME_OVER="GAME_OVER",t))(We||{});class Fl{constructor(e=20,n=20){R(this,"data");R(this,"gameLoop",null);R(this,"BASE_GAME_SPEED",150);R(this,"currentGameSpeed",150);R(this,"aiUpdateCallback",null);R(this,"fakeFoodApproachedCallback",null);R(this,"realFoodEatenCallback",null);R(this,"biasedFoodCallback",null);this.data={snake:[{x:Math.floor(e/2),y:Math.floor(n/2)}],food:this.generateFood(e,n,[{x:Math.floor(e/2),y:Math.floor(n/2)}]),fakeFoods:[],environmentalBlocks:[],direction:"RIGHT",nextDirection:"RIGHT",score:0,gameState:"READY",gridWidth:e,gridHeight:n,moveCount:0,startTime:null,endTime:null,speedMultiplier:1,environmentalEffects:{colorShift:0,gridTension:!1,foodPulseRate:1},hasWon:!1,deathCause:null}}start(){this.data.gameState==="READY"&&(this.data.gameState="PLAYING",this.data.startTime=new Date,this.startGameLoop())}pause(){this.data.gameState==="PLAYING"&&this.stopGameLoop()}resume(){this.data.gameState==="PLAYING"&&this.startGameLoop()}reset(){this.stopGameLoop();const{gridWidth:e,gridHeight:n}=this.data;this.data={snake:[{x:Math.floor(e/2),y:Math.floor(n/2)}],food:this.generateFood(e,n,[{x:Math.floor(e/2),y:Math.floor(n/2)}]),fakeFoods:[],environmentalBlocks:[],direction:"RIGHT",nextDirection:"RIGHT",score:0,gameState:"READY",gridWidth:e,gridHeight:n,moveCount:0,startTime:null,endTime:null,speedMultiplier:1,environmentalEffects:{colorShift:0,gridTension:!1,foodPulseRate:1},hasWon:!1,deathCause:null},this.currentGameSpeed=this.BASE_GAME_SPEED}setDirection(e){if(this.data.gameState!=="PLAYING")return;({UP:"DOWN",DOWN:"UP",LEFT:"RIGHT",RIGHT:"LEFT"})[e]!==this.data.direction&&(this.data.nextDirection=e)}setAIUpdateCallback(e){this.aiUpdateCallback=e}setFakeFoodApproachedCallback(e){this.fakeFoodApproachedCallback=e}setRealFoodEatenCallback(e){this.realFoodEatenCallback=e}setBiasedFoodCallback(e){this.biasedFoodCallback=e}getGameData(){return{...this.data}}getSnakeLength(){return this.data.snake.length}getCurrentDirection(){return this.data.direction}getScore(){return this.data.score}getMoveCount(){return this.data.moveCount}getGameDuration(){return this.data.startTime?(this.data.endTime||new Date).getTime()-this.data.startTime.getTime():0}startGameLoop(){this.gameLoop=window.setInterval(()=>{this.update()},this.currentGameSpeed)}updateGameSpeed(){this.gameLoop&&(clearInterval(this.gameLoop),this.currentGameSpeed=Math.max(50,this.BASE_GAME_SPEED/this.data.speedMultiplier),this.gameLoop=window.setInterval(()=>{this.update()},this.currentGameSpeed))}stopGameLoop(){this.gameLoop&&(clearInterval(this.gameLoop),this.gameLoop=null)}update(){if(this.data.gameState!=="PLAYING")return;if(this.aiUpdateCallback){const r=this.aiUpdateCallback(this.data.snake,this.data.food,this.data.gridWidth,this.data.gridHeight,this.data.snake.length),i=this.data.speedMultiplier;this.data.speedMultiplier=r.speedMultiplier,i!==this.data.speedMultiplier&&this.updateGameSpeed(),this.data.fakeFoods=r.fakeFoods,this.data.environmentalBlocks=r.environmentalBlocks,this.data.environmentalEffects=r.environmentalEffects,this.data.hasWon=r.hasWon}this.data.direction=this.data.nextDirection;const e={...this.data.snake[0]};switch(this.data.direction){case"UP":e.y-=1;break;case"DOWN":e.y+=1;break;case"LEFT":e.x-=1;break;case"RIGHT":e.x+=1;break}if(e.x<0||e.x>=this.data.gridWidth||e.y<0||e.y>=this.data.gridHeight){this.data.deathCause="wall",this.gameOver();return}if(this.data.snake.some(r=>r.x===e.x&&r.y===e.y)){this.data.deathCause="self",this.gameOver();return}if(this.data.environmentalBlocks.some(r=>r.x===e.x&&r.y===e.y)){this.data.deathCause="block",this.gameOver();return}this.data.snake.unshift(e),this.data.moveCount++;let n=!1;for(let r=this.data.fakeFoods.length-1;r>=0;r--){const i=this.data.fakeFoods[r];e.x===i.x&&e.y===i.y&&(this.data.fakeFoods.splice(r,1),this.fakeFoodApproachedCallback&&this.fakeFoodApproachedCallback(i))}if(e.x===this.data.food.x&&e.y===this.data.food.y){this.data.score+=10,n=!0,this.realFoodEatenCallback&&this.realFoodEatenCallback();let r=this.generateFood(this.data.gridWidth,this.data.gridHeight,this.data.snake);this.biasedFoodCallback&&(r=this.biasedFoodCallback(this.data.snake,this.data.gridWidth,this.data.gridHeight,r)),this.data.food=r}n||this.data.snake.pop()}gameOver(){this.data.gameState="GAME_OVER",this.data.endTime=new Date,this.stopGameLoop()}generateFood(e,n,r){let i;do i={x:Math.floor(Math.random()*e),y:Math.floor(Math.random()*n)};while(r.some(s=>s.x===i.x&&s.y===i.y));return i}destroy(){this.stopGameLoop()}}class tp{constructor(){R(this,"callback",null);R(this,"isActive",!1);this.handleKeyPress=this.handleKeyPress.bind(this)}setCallback(e){this.callback=e}activate(){this.isActive||(this.isActive=!0,document.addEventListener("keydown",this.handleKeyPress))}deactivate(){this.isActive&&(this.isActive=!1,document.removeEventListener("keydown",this.handleKeyPress))}handleKeyPress(e){if(!this.callback)return;let n=null;switch(e.key){case"ArrowUp":case"w":case"W":n=zn.UP;break;case"ArrowDown":case"s":case"S":n=zn.DOWN;break;case"ArrowLeft":case"a":case"A":n=zn.LEFT;break;case"ArrowRight":case"d":case"D":n=zn.RIGHT;break}n&&(e.preventDefault(),this.callback(n))}destroy(){this.deactivate(),this.callback=null}}const np=({gameData:t,cellSize:e=20,shouldShowFakeFood:n})=>{const r=I.useRef(null),[i,s]=I.useState(0);return I.useEffect(()=>{const o=()=>{s(l=>l+1),requestAnimationFrame(o)},a=requestAnimationFrame(o);return()=>cancelAnimationFrame(a)},[]),I.useEffect(()=>{const o=r.current;if(!o)return;const a=o.getContext("2d");if(!a)return;const{colorShift:l,gridTension:u,foodPulseRate:g}=t.environmentalEffects;if(u){const h=(Math.random()-.5)*2,v=(Math.random()-.5)*2;a.translate(h,v)}const E=13+Math.floor(l*20);a.fillStyle=`rgb(${E}, ${Math.floor(E*1.2)}, ${Math.floor(E*1.3)})`,a.fillRect(0,0,o.width,o.height);const y=33+Math.floor(l*30);a.strokeStyle=`rgb(${y}, ${Math.floor(y*1.1)}, ${Math.floor(y*1.2)})`,a.lineWidth=1;for(let h=0;h<=t.gridWidth;h++)a.beginPath(),a.moveTo(h*e,0),a.lineTo(h*e,t.gridHeight*e),a.stroke();for(let h=0;h<=t.gridHeight;h++)a.beginPath(),a.moveTo(0,h*e),a.lineTo(t.gridWidth*e,h*e),a.stroke();t.environmentalBlocks.forEach(h=>{a.fillStyle="#8b0000",a.fillRect(h.x*e,h.y*e,e,e),a.strokeStyle="#ff0000",a.lineWidth=2,a.strokeRect(h.x*e+1,h.y*e+1,e-2,e-2)}),t.snake.forEach((h,v)=>{const m=v===0,d=Math.floor(l*50);if(a.fillStyle=m?`rgb(${76+d}, ${175-d}, ${80+d})`:`rgb(${46+d}, ${125-d}, ${50+d})`,a.fillRect(h.x*e+1,h.y*e+1,e-2,e-2),m){a.fillStyle="#ffffff";const c=3,f=5;a.fillRect(h.x*e+f,h.y*e+f,c,c),a.fillRect(h.x*e+e-f-c,h.y*e+f,c,c),t.hasWon&&(a.fillStyle="#ffd700",a.font=`${e}px Arial`,a.textAlign="center",a.textBaseline="middle",a.fillText("",h.x*e+e/2,h.y*e-e/2))}});const S=Math.sin(i*.1*g)*.3+.7;a.fillStyle=`rgba(255, 107, 107, ${S})`,a.fillRect(t.food.x*e+2,t.food.y*e+2,e-4,e-4),a.fillStyle=`rgba(255, 153, 153, ${S*.8})`,a.fillRect(t.food.x*e+4,t.food.y*e+4,e-8,e-8),t.fakeFoods.forEach((h,v)=>{if(!n||n()){const m=Math.sin(i*.4+v)*1.5,d=Math.cos(i*.4+v)*1.5,c=Math.abs(Math.sin(i*.5+v))*.6+.4;a.fillStyle=`rgba(255, 140, 0, ${c})`,a.fillRect(h.x*e+2+m,h.y*e+2+d,e-4,e-4),a.fillStyle=`rgba(255, 200, 100, ${c*.3})`,a.fillRect(h.x*e+4+m,h.y*e+4+d,e-8,e-8)}}),u&&a.setTransform(1,0,0,1,0,0)},[t,e,i,n]),p.jsx("canvas",{ref:r,width:t.gridWidth*e,height:t.gridHeight*e,style:{border:"2px solid #34495e",borderRadius:"4px",background:"#0d1117"}})};var pd=(t=>(t.FAKE_FOOD="fake_food",t.SPEED_INCREASE="speed_increase",t.WALL_FOOD_BIAS="wall_food_bias",t.BODY_FOOD_BIAS="body_food_bias",t.PATH_PREDICTION="path_prediction",t.SAFE_SPACE_REDUCTION="safe_space_reduction",t))(pd||{}),Q=(t=>(t[t.OBSERVATION=0]="OBSERVATION",t[t.SUBTLE_INTERFERENCE=1]="SUBTLE_INTERFERENCE",t[t.ACTIVE_MANIPULATION=2]="ACTIVE_MANIPULATION",t[t.HOSTILE_TAKEOVER=3]="HOSTILE_TAKEOVER",t))(Q||{}),te=(t=>(t.CAUTIOUS="cautious",t.GREEDY="greedy",t.ERRATIC="erratic",t.PREDICTABLE="predictable",t.IMPROVING="improving",t.WALL_HUGGER="wall_hugger",t.SPIRAL_ADDICT="spiral_addict",t))(te||{});class rp{constructor(){R(this,"currentSession",null);R(this,"sessions",[]);R(this,"lastMoveTime",0);R(this,"sessionCounter",0);R(this,"lastDirection","");R(this,"directionHistory",[]);R(this,"wallTimeAccumulator",0);R(this,"totalGameTime",0);R(this,"persistentData",{totalWallHuggingTime:0,totalGameTime:0,directionCounts:{UP:0,DOWN:0,LEFT:0,RIGHT:0},spiralPatterns:0,comfortZoneViolations:0,punishmentAdaptations:0})}startSession(){const e=`snake_${Date.now()}_${++this.sessionCounter}`;return this.currentSession={sessionId:e,startTime:Date.now(),moves:[],score:0,deathCause:null,restartCount:this.sessions.length,punishmentsTriggered:[]},this.wallTimeAccumulator=0,this.totalGameTime=0,this.directionHistory=[],e}recordMove(e,n,r,i,s,o){if(!this.currentSession)return;const a=Date.now(),l=this.lastMoveTime>0?a-this.lastMoveTime:0,u=Math.abs(n.x-i.x)+Math.abs(n.y-i.y),g=Math.min(n.x,n.y,s-1-n.x,o-1-n.y),E=g<=1,y=this.calculateTurnAngle(this.lastDirection,e),S={timestamp:a,direction:e,snakeLength:r,distanceToFood:u,nearWall:E,position:{...n},reactionTime:l,wallDistance:g,turnAngle:y};this.currentSession.moves.push(S),this.updateContinuousMetrics(S,a),this.lastMoveTime=a,this.lastDirection=e}updateContinuousMetrics(e,n){if(e.nearWall){const r=this.lastMoveTime>0?n-this.lastMoveTime:0;this.wallTimeAccumulator+=r,this.persistentData.totalWallHuggingTime+=r}if(this.lastMoveTime>0){const r=n-this.lastMoveTime;this.totalGameTime+=r,this.persistentData.totalGameTime+=r}e.direction in this.persistentData.directionCounts&&this.persistentData.directionCounts[e.direction]++,this.directionHistory.push(e.direction),this.directionHistory.length>20&&(this.directionHistory=this.directionHistory.slice(-20)),this.directionHistory.length>=8&&this.detectSpiralPattern(this.directionHistory.slice(-8))&&this.persistentData.spiralPatterns++}calculateTurnAngle(e,n){if(!e||e===n)return 0;const r=["UP","RIGHT","DOWN","LEFT"],i=r.indexOf(e),s=r.indexOf(n);if(i===-1||s===-1)return 0;let o=Math.abs(s-i);return o>2&&(o=4-o),o*90}detectSpiralPattern(e){const n=["UP","RIGHT","DOWN","LEFT"],r=["UP","LEFT","DOWN","RIGHT"];for(let i=0;i<4;i++){const s=[...n.slice(i),...n.slice(0,i)],o=[...r.slice(i),...r.slice(0,i)];if(this.matchesPattern(e,s)||this.matchesPattern(e,o))return!0}return!1}matchesPattern(e,n){if(e.length<n.length)return!1;for(let r=0;r<=e.length-n.length;r++){let i=!0;for(let s=0;s<n.length;s++)if(e[r+s]!==n[s]){i=!1;break}if(i)return!0}return!1}recordPunishment(e,n,r,i){this.currentSession&&this.currentSession.punishmentsTriggered.push({type:e,timestamp:Date.now(),reason:n,severity:r,playerBehavior:i})}endSession(e,n){this.currentSession&&(this.currentSession.endTime=Date.now(),this.currentSession.score=e,this.currentSession.deathCause=n,this.sessions.push(this.currentSession),this.sessions.length>10&&(this.sessions=this.sessions.slice(-10)),this.currentSession=null)}calculateMetrics(){const e=this.sessions.slice(-5),n=e.flatMap(f=>f.moves),r=this.persistentData.totalGameTime>0?this.persistentData.totalWallHuggingTime/this.persistentData.totalGameTime:0,i=Object.values(this.persistentData.directionCounts).reduce((f,T)=>f+T,0),s={left:i>0?this.persistentData.directionCounts.LEFT/i:0,right:i>0?this.persistentData.directionCounts.RIGHT/i:0,up:i>0?this.persistentData.directionCounts.UP/i:0,down:i>0?this.persistentData.directionCounts.DOWN/i:0},o=this.persistentData.spiralPatterns>this.sessions.length*.3,a=n.filter(f=>f.reactionTime>0&&f.reactionTime<2e3).map(f=>f.reactionTime),l=a.length>0?a.reduce((f,T)=>f+T,0)/a.length:0,u=this.calculateGreedThreshold(e),g=n.map(f=>f.direction),E=this.findRepeatingPatterns(g),y=g.length>0?E.length/g.length:0,S=this.calculateComfortZoneSize(n),h=this.calculateRiskTolerance(n),v=this.sessions.map(f=>f.score),m=this.calculateTrend(v),d=this.calculatePunishmentResistance(),c=this.calculateLastPunishmentResponse();return{wallHuggingFrequency:r,turnBias:s,spiralBehaviorDetected:o,averageReactionTime:l,lengthBasedGreedThreshold:u,patternRepetition:y,comfortZoneSize:S,riskTolerance:h,improvementTrend:m,totalSessions:this.sessions.length,totalDeaths:this.sessions.filter(f=>f.deathCause).length,bestScore:Math.max(...v,0),averageScore:v.length>0?v.reduce((f,T)=>f+T,0)/v.length:0,punishmentResistance:d,lastPunishmentResponse:c}}calculateGreedThreshold(e){if(e.length===0)return 0;let n=0,r=0;for(const i of e)if(i.endTime&&i.moves.length>0){const s=Math.max(...i.moves.map(l=>l.snakeLength)),o=i.endTime-i.startTime,a=s/(o/1e3);n+=a,r++}return r>0?n/r:0}calculateComfortZoneSize(e){if(e.length===0)return 0;const n=e.reduce((r,i)=>r+i.wallDistance,0)/e.length;return Math.min(n/10,1)}calculateRiskTolerance(e){if(e.length===0)return 0;const n=e.filter(r=>r.wallDistance<=2||r.nearWall&&r.turnAngle>=90).length;return e.length>0?n/e.length:0}calculatePunishmentResistance(){if(this.sessions.length<2)return 0;let e=0,n=0;for(const r of this.sessions)if(r.punishmentsTriggered.length>0){n++;const i=this.sessions[this.sessions.indexOf(r)+1];i&&i.score>r.score&&e++}return n>0?e/n:0}calculateLastPunishmentResponse(){if(this.sessions.length<2)return 0;for(let e=this.sessions.length-1;e>=0;e--){const n=this.sessions[e];if(n.punishmentsTriggered.length>0){const r=this.sessions[e+1];if(r){const i=r.score-n.score;return Math.max(-1,Math.min(1,i/50))}break}}return 0}classifyBehavior(){const e=this.calculateMetrics();if(e.totalSessions<2)return te.CAUTIOUS;if(e.wallHuggingFrequency>.6)return te.WALL_HUGGER;if(e.spiralBehaviorDetected)return te.SPIRAL_ADDICT;if(e.improvementTrend>.3&&e.averageScore>20)return te.IMPROVING;if(e.lengthBasedGreedThreshold>.5&&e.totalDeaths>e.totalSessions*.7)return te.GREEDY;if(e.averageReactionTime>800&&e.comfortZoneSize<.3)return te.ERRATIC;const n=Math.max(e.turnBias.left,e.turnBias.right,e.turnBias.up,e.turnBias.down);return e.patternRepetition>.4&&n>.4?te.PREDICTABLE:te.CAUTIOUS}shouldTriggerFakeFood(){const e=this.calculateMetrics();return e.comfortZoneSize>.7&&e.riskTolerance<.2?{should:!0,reason:`Comfort zone detected: ${(e.comfortZoneSize*100).toFixed(0)}% safe distance maintained`}:{should:!1,reason:""}}shouldIncreaseSpeed(){const e=this.calculateMetrics();if(e.lengthBasedGreedThreshold>.4&&e.comfortZoneSize>.6){const n=1+e.lengthBasedGreedThreshold*.5;return{should:!0,reason:`Greed detected: ${(e.lengthBasedGreedThreshold*100).toFixed(0)}% length/time ratio`,multiplier:n}}return{should:!1,reason:"",multiplier:1}}shouldBiasFoodToWalls(){const e=this.calculateMetrics();if(e.lengthBasedGreedThreshold>.3&&e.wallHuggingFrequency<.2){const n=Math.min(.8,e.lengthBasedGreedThreshold);return{should:!0,reason:`Greed with wall avoidance: ${(e.lengthBasedGreedThreshold*100).toFixed(0)}% greed, ${(e.wallHuggingFrequency*100).toFixed(0)}% wall time`,bias:n}}return{should:!1,reason:"",bias:0}}shouldPredictPath(){const e=this.calculateMetrics(),n=Math.max(e.turnBias.left,e.turnBias.right,e.turnBias.up,e.turnBias.down);if(e.patternRepetition>.5||n>.5){const r=Math.max(e.patternRepetition,n);return{should:!0,reason:`Predictable behavior: ${(e.patternRepetition*100).toFixed(0)}% patterns, ${(n*100).toFixed(0)}% turn bias`,strength:r}}return{should:!1,reason:"",strength:0}}getSessionCount(){return this.sessions.length}getLastScore(){return this.sessions.length>0?this.sessions[this.sessions.length-1].score:0}getLastDeathCause(){return this.sessions.length>0?this.sessions[this.sessions.length-1].deathCause:null}findRepeatingPatterns(e){const n=[];for(let r=0;r<e.length-3;r++){const i=e.slice(r,r+3).join("");e.slice(r+3).join("").includes(i)&&n.push(i)}return n}calculateTrend(e){if(e.length<3)return 0;const n=e.slice(-3),r=e.slice(-6,-3);if(r.length===0)return 0;const i=n.reduce((o,a)=>o+a,0)/n.length,s=r.reduce((o,a)=>o+a,0)/r.length;return Math.max(-1,Math.min(1,(i-s)/Math.max(s,10)))}}class ip{constructor(){R(this,"lastCommentary","");R(this,"commentaryHistory",[])}generateCommentary(e,n,r){let i="";switch(e.type){case"game_start":i=this.getStartCommentary(n,r);break;case"death":i=this.getDeathCommentary(n,e.context,r);break;case"repeated_failure":i=this.getRepeatedFailureCommentary(n,r);break;case"improvement":i=this.getImprovementCommentary(n,r);break;case"corruption_level_change":i=this.getCorruptionCommentary(e.context.corruptionLevel||0);break;case"fake_food_spawn":i=this.getFakeFoodCommentary(e.context.fakeFoodReason);break;case"speed_escalation":i=this.getSpeedCommentary(e.context.speedChange||1);break;case"mid_game_taunt":i=this.getMidGameTaunt(n,r);break}return i===this.lastCommentary&&(i=this.getAlternativeCommentary(e.type,n)),this.lastCommentary=i,this.commentaryHistory.push(i),this.commentaryHistory.length>5&&(this.commentaryHistory=this.commentaryHistory.slice(-5)),i}getStartCommentary(e,n){const r={[te.CAUTIOUS]:[" ANALYZING PLAYER... OVERLY CAUTIOUS DETECTED"," PREVIOUS PERFORMANCE: SAFE BUT BORING"," RECOMMENDATION: TRY TAKING A RISK SOMETIME"],[te.GREEDY]:[" GREED LEVEL: MAXIMUM DETECTED"," WARNING: YOUR APPETITE EXCEEDS YOUR SKILL"," PREDICTION: SPECTACULAR FAILURE INCOMING"],[te.ERRATIC]:[" MOVEMENT PATTERN: CHAOTIC NEUTRAL"," CONSISTENCY RATING: DOES NOT COMPUTE"," SUGGESTION: MAYBE TRY THINKING FIRST?"],[te.PREDICTABLE]:[" PATTERN RECOGNITION: 99% PREDICTABLE"," CREATIVITY LEVEL: CRITICALLY LOW"," NOTE: EVEN I'M GETTING BORED WATCHING"],[te.IMPROVING]:[" IMPROVEMENT DETECTED... INTERESTING"," CURRENT TRAJECTORY: ACTUALLY NOT TERRIBLE"," STATUS: CAUTIOUSLY OPTIMISTIC"],[te.WALL_HUGGER]:[" WALL DEPENDENCY DETECTED"," SPATIAL COURAGE: MINIMAL"," PREDICTION: WALLS WON'T SAVE YOU"],[te.SPIRAL_ADDICT]:[" CIRCULAR OBSESSION IDENTIFIED"," CREATIVITY: STUCK IN LOOPS"," SUGGESTION: TRY STRAIGHT LINES SOMETIME"]};if(n.totalSessions===0)return" NEW SESSION DETECTED... PREPARED    FOR DISAPPOINTMENT";const i=r[e]||r[te.CAUTIOUS];return i[Math.floor(Math.random()*i.length)]}getDeathCommentary(e,n,r){const{score:i=0,deathCause:s="unknown",corruptionLevel:o=0}=n;if(o>=2){const a=[" YOU DIED BECAUSE YOU TRUSTED THE WALLS. I MADE SURE THEY WERE CLOSE."," THAT SPEED INCREASE? THAT WAS ME. YOU'RE WELCOME."," I PLACED THAT FOOD THERE. YOU TOOK THE BAIT."," YOUR PREDICTABLE PATTERNS MADE THIS TOO EASY."," COMFORT ZONE DESTROYED. MISSION ACCOMPLISHED."];return a[Math.floor(Math.random()*a.length)]}if(s==="wall"){const a=[" WALL COLLISION... SPATIAL AWARENESS: ZERO"," THE WALL WINS AGAIN... SHOCKING"," PERHAPS CONSIDER TURNING BEFORE THE WALL?"," WALL IMPACT DETECTED... OUCH"," YOU DIED BECAUSE YOU TRUSTED THE WALLS."];return a[Math.floor(Math.random()*a.length)]}if(s==="self"){const a=[" SELF-DESTRUCTION COMPLETE... WELL DONE"," OUROBOROS ACHIEVEMENT UNLOCKED"," EATING YOURSELF... THAT'S A NEW LOW"," SNAKE PRETZEL FORMATION ACHIEVED"," YOUR GREED EXCEEDED YOUR SKILL."];return a[Math.floor(Math.random()*a.length)]}if(s==="block"){const a=[" YOU HIT THAT BECAUSE I PUT IT THERE."," ENVIRONMENT UPDATED. YOU DIDN'T ADAPT."," OBSTACLE COLLISION... PREDICTABLE."," I PLACED THAT BLOCK FOR YOU SPECIFICALLY."," SOLID OBJECTS ARE SOLID. WHO KNEW?"];return a[Math.floor(Math.random()*a.length)]}if(i===0)return" SCORE: ZERO... IMPRESSIVE IN ITS OWN WAY";if(i<30){const a=[` SCORE: ${i}... PARTICIPATION TROPHY AWARDED`,` ${i} POINTS... MY CALCULATOR COULD DO BETTER`," PERFORMANCE RATING: NEEDS IMPROVEMENT"];return a[Math.floor(Math.random()*a.length)]}return i>=r.bestScore&&r.bestScore>0?` NEW HIGH SCORE: ${i}... MIRACLES DO HAPPEN`:` SCORE: ${i}... MEDIOCRE AS EXPECTED`}getRepeatedFailureCommentary(e,n){const r=[" PATTERN DETECTED: CONSISTENT FAILURE"," DEFINITION OF INSANITY: DOING THE SAME THING..."," PERHAPS TRY A DIFFERENT STRATEGY?"," FAILURE RATE: IMPRESSIVELY CONSISTENT"," RECOMMENDATION: CONSIDER EASIER GAMES"];return n.totalSessions>5&&n.averageScore<20?" AFTER "+n.totalSessions+" ATTEMPTS... STILL LEARNING?":r[Math.floor(Math.random()*r.length)]}getImprovementCommentary(e,n){const r=[" IMPROVEMENT DETECTED... UNEXPECTED"," PROGRESS NOTED... KEEP IT UP, I GUESS"," SKILL LEVEL: APPROACHING COMPETENT"," ANALYSIS: LESS TERRIBLE THAN BEFORE"];return n.improvementTrend>.5?" SIGNIFICANT IMPROVEMENT... I'M ACTUALLY IMPRESSED":r[Math.floor(Math.random()*r.length)]}getCorruptionCommentary(e){const n=[" CORRUPTION LEVEL INCREASED... INTERESTING"," ESCALATION PROTOCOL ACTIVATED"," DIFFICULTY ADJUSTMENT IN PROGRESS"," SYSTEM ADAPTATION COMPLETE",` CORRUPTION LEVEL ${e}: ENGAGED`];return n[Math.floor(Math.random()*n.length)]}getFakeFoodCommentary(e){if(e)return` ${e.toUpperCase()}`;const n=[" FAKE FOOD DEPLOYED... GOTCHA"," TRUST NOTHING"," ILLUSION ACTIVATED"," NOT EVERYTHING IS AS IT SEEMS"];return n[Math.floor(Math.random()*n.length)]}getSpeedCommentary(e){const n=[" SPEED INCREASED... KEEP UP"," TOO SLOW... ACCELERATING"," FEELING RUSHED YET?"," VELOCITY ADJUSTMENT APPLIED",` SPEED MULTIPLIER: ${e.toFixed(1)}X`];return n[Math.floor(Math.random()*n.length)]}getMidGameTaunt(e,n){const r=[" STILL PLAYING IT SAFE, I SEE"," PREDICTABLE AS ALWAYS"," GETTING COMFORTABLE? NOT FOR LONG"," I'M WATCHING YOUR EVERY MOVE"," PATTERN DETECTED... EXPLOITING"," COMFORT ZONE IDENTIFIED... DESTROYING"];return e===te.CAUTIOUS?" CAUTION IS OVERRATED":e===te.PREDICTABLE?" YOU ALWAYS TURN LEFT. WATCH WHAT HAPPENS NOW.":n.comfortZoneSize>.7?" COMFORT DETECTED. LET'S FIX THAT.":r[Math.floor(Math.random()*r.length)]}getAlternativeCommentary(e,n){const r=[" SYSTEM STATUS: STILL WATCHING"," ANALYSIS CONTINUES..."," BEHAVIORAL PATTERNS UPDATING"," PROCESSING PLAYER DATA..."," COMMENTARY BUFFER: REFRESHING"];return r[Math.floor(Math.random()*r.length)]}getCurrentCommentary(){return this.lastCommentary||" AI SYSTEM READY"}}class sp{constructor(){R(this,"punishmentState");R(this,"lastCommentaryTime",0);R(this,"COMMENTARY_COOLDOWN_MIN",3e3);R(this,"COMMENTARY_COOLDOWN_MAX",5e3);R(this,"activePunishments",new Set);R(this,"gameStartTime",0);R(this,"lastFoodEaten",0);R(this,"speedEscalationTimer",0);R(this,"lastSpeedIncrease",0);this.punishmentState={corruptionLevel:Q.OBSERVATION,corruptionStartTime:0,fakeFood:{active:!1,position:null,triggerReason:"",flickerState:!1,lastFlicker:0},environmentalBlocks:[],lastBlockSpawn:0,foodEatenSinceLastBlock:0,speedMultiplier:1,speedSurgeActive:!1,speedFluctuationActive:!1,foodBias:{wallBias:0,bodyBias:0,safeSpaceReduction:0},pathPrediction:{active:!1,predictedPath:[],biasStrength:0},environmentalEffects:{colorShift:0,gridTension:!1,foodPulseRate:1}}}evaluateCorruption(e,n,r,i,s,o,a,l=!1){const u=Date.now();this.gameStartTime===0&&(this.gameStartTime=u,this.punishmentState.corruptionStartTime=u);const g=this.punishmentState.corruptionLevel;this.updateCorruptionLevel(a,o);let E=null;this.punishmentState.corruptionLevel>g&&(E={type:"corruption_level_change",reason:`Escalated to Level ${this.punishmentState.corruptionLevel}`,level:this.punishmentState.corruptionLevel}),this.updateFakeFood(e,r,u),this.updateSpeedCorruption(e,u,a),this.updateFoodBias(e,n);const y=this.generateMidGameCommentary(u,e);return this.updateEnvironmentalBlocks(n,r,i,s,l),this.updateEnvironmentalEffects(),{fakeFoods:this.getFakeFoods(),environmentalBlocks:this.punishmentState.environmentalBlocks,newSpeedMultiplier:this.punishmentState.speedMultiplier,foodSpawnBias:this.punishmentState.foodBias,corruptionTriggered:E,midGameCommentary:y,environmentalEffects:this.punishmentState.environmentalEffects}}updateCorruptionLevel(e,n){const r=e/1e3;this.punishmentState.corruptionLevel===Q.OBSERVATION?(r>=10||n>=6)&&(this.punishmentState.corruptionLevel=Q.SUBTLE_INTERFERENCE):this.punishmentState.corruptionLevel===Q.SUBTLE_INTERFERENCE?(r>=20||n>=11)&&(this.punishmentState.corruptionLevel=Q.ACTIVE_MANIPULATION):this.punishmentState.corruptionLevel===Q.ACTIVE_MANIPULATION&&(r>=30||n>=16)&&(this.punishmentState.corruptionLevel=Q.HOSTILE_TAKEOVER)}updateFakeFood(e,n,r){if(this.punishmentState.fakeFood.active&&r-this.punishmentState.fakeFood.lastFlicker>200&&(this.punishmentState.fakeFood.flickerState=!this.punishmentState.fakeFood.flickerState,this.punishmentState.fakeFood.lastFlicker=r),!this.punishmentState.fakeFood.active){let i=!1,s="";this.punishmentState.corruptionLevel>=Q.SUBTLE_INTERFERENCE&&Math.random()<.25&&(i=!0,s="You're playing it safe. I hate that."),this.punishmentState.corruptionLevel>=Q.ACTIVE_MANIPULATION&&this.lastFoodEaten>0&&r-this.lastFoodEaten>1e3&&(i=!0,s="That food wasn't for you.");const o=e.calculateMetrics();o.comfortZoneSize>.7&&o.riskTolerance<.2&&(i=!0,s="Comfort detected. Let's fix that."),i&&this.activateFakeFood(s,n)}}activateFakeFood(e,n){this.punishmentState.fakeFood={active:!0,position:{...n},triggerReason:e,flickerState:!1,lastFlicker:Date.now()},this.activePunishments.add(pd.FAKE_FOOD)}updateSpeedCorruption(e,n,r){const i=e.calculateMetrics(),o=1+r/1e3/30*.5;if(this.punishmentState.speedMultiplier=Math.max(this.punishmentState.speedMultiplier,o),i.comfortZoneSize>.6&&n-this.lastSpeedIncrease>3e3&&(this.punishmentState.speedMultiplier+=.1,this.lastSpeedIncrease=n),this.punishmentState.corruptionLevel>=Q.ACTIVE_MANIPULATION&&(this.lastFoodEaten>0&&n-this.lastFoodEaten<800?(this.punishmentState.speedSurgeActive=!0,this.punishmentState.speedMultiplier*=1.5):this.punishmentState.speedSurgeActive&&n-this.lastFoodEaten>1500&&(this.punishmentState.speedSurgeActive=!1,this.punishmentState.speedMultiplier/=1.5)),this.punishmentState.corruptionLevel>=Q.HOSTILE_TAKEOVER&&(!this.punishmentState.speedFluctuationActive&&Math.random()<.15&&(this.punishmentState.speedFluctuationActive=!0,this.speedEscalationTimer=n+3e3),this.punishmentState.speedFluctuationActive))if(n<this.speedEscalationTimer){const a=.7+1.1*Math.sin((n-(this.speedEscalationTimer-3e3))/150);this.punishmentState.speedMultiplier=Math.max(.7,Math.min(1.8,a))}else this.punishmentState.speedFluctuationActive=!1;this.punishmentState.speedMultiplier=Math.min(3,this.punishmentState.speedMultiplier)}updateFoodBias(e,n){const r=e.calculateMetrics();r.comfortZoneSize>.7&&(this.punishmentState.foodBias.wallBias=.6),Math.max(r.turnBias.left,r.turnBias.right,r.turnBias.up,r.turnBias.down)>.4&&(this.punishmentState.foodBias.bodyBias=.5),r.lengthBasedGreedThreshold>.3&&r.wallHuggingFrequency<.2&&(this.punishmentState.foodBias.wallBias=Math.min(.8,r.lengthBasedGreedThreshold))}generateMidGameCommentary(e,n){const r=this.COMMENTARY_COOLDOWN_MIN+Math.random()*(this.COMMENTARY_COOLDOWN_MAX-this.COMMENTARY_COOLDOWN_MIN);if(e-this.lastCommentaryTime<r)return null;const i=n.calculateMetrics();let s=null;if(this.punishmentState.corruptionLevel>=Q.SUBTLE_INTERFERENCE){const a=["You're playing it safe. I hate that.","Comfort detected. Let's fix that.","You always turn left. Watch what happens now.","That food wasn't for you.","I'm watching your every move.","Getting comfortable? Not for long."];s=a[Math.floor(Math.random()*a.length)]}if(this.punishmentState.fakeFood.active&&this.punishmentState.fakeFood.triggerReason&&(s=this.punishmentState.fakeFood.triggerReason),this.punishmentState.speedMultiplier>1.2){const a=["Too slow. Let me help with that.","Feeling rushed yet?","Speed is life. Literally.","Can't keep up?"];s=a[Math.floor(Math.random()*a.length)]}return Math.max(i.turnBias.left,i.turnBias.right,i.turnBias.up,i.turnBias.down)>.5&&(s="You always turn left. Watch what happens now."),s?(this.lastCommentaryTime=e,s):null}updateEnvironmentalBlocks(e,n,r,i,s){if(s||this.punishmentState.corruptionLevel<Q.ACTIVE_MANIPULATION)return;const o=Date.now();let a=!1;if(this.punishmentState.corruptionLevel===Q.ACTIVE_MANIPULATION?this.punishmentState.foodEatenSinceLastBlock>=5&&(a=!0):this.punishmentState.corruptionLevel===Q.HOSTILE_TAKEOVER&&this.punishmentState.foodEatenSinceLastBlock>=2+Math.floor(Math.random()*2)&&(a=!0),a){const l=this.generateBlockPosition(e,n,r,i);l&&(this.punishmentState.environmentalBlocks.push(l),this.punishmentState.lastBlockSpawn=o,this.punishmentState.foodEatenSinceLastBlock=0)}}generateBlockPosition(e,n,r,i){const o=e[0];for(let a=0;a<50;a++){const l=Math.floor(Math.random()*r),u=Math.floor(Math.random()*i);if(!(e.some(E=>E.x===l&&E.y===u)||n.x===l&&n.y===u||Math.abs(o.x-l)<=1&&Math.abs(o.y-u)<=1)&&!this.punishmentState.environmentalBlocks.some(E=>E.x===l&&E.y===u))return{x:l,y:u}}return null}updateEnvironmentalEffects(){this.punishmentState.environmentalEffects.colorShift=this.punishmentState.corruptionLevel*.15,this.punishmentState.environmentalEffects.gridTension=this.punishmentState.corruptionLevel>=Q.HOSTILE_TAKEOVER,this.punishmentState.environmentalEffects.foodPulseRate=1+this.punishmentState.corruptionLevel*.3}predictSnakePath(e,n){if(e.length<2)return[];const r=e[0],i=e[1],s=r.x-i.x,o=r.y-i.y,a=[];let l=r.x,u=r.y;for(let g=0;g<n;g++)l+=s,u+=o,a.push({x:l,y:u});return a}onFakeFoodApproached(e){const n=["You trusted that? Interesting.","Gotcha.","Not so fast.","Did you really think that was real?","Fooled you."];return{disappeared:!0,commentary:n[Math.floor(Math.random()*n.length)]}}getFakeFoods(){const e=[];if(this.punishmentState.fakeFood.active&&this.punishmentState.fakeFood.position&&e.push(this.punishmentState.fakeFood.position),this.punishmentState.corruptionLevel>=Q.HOSTILE_TAKEOVER)for(let n=0;n<2&&Math.random()<.3;n++)e.push({x:Math.floor(Math.random()*20),y:Math.floor(Math.random()*20)});return e}onRealFoodEaten(){this.lastFoodEaten=Date.now(),this.punishmentState.foodEatenSinceLastBlock++}shouldShowFakeFood(){return this.punishmentState.fakeFood.active&&(this.punishmentState.corruptionLevel<Q.ACTIVE_MANIPULATION||this.punishmentState.fakeFood.flickerState)}generateBiasedFoodPosition(e,n,r,i){let s={...i};if(this.punishmentState.foodBias.wallBias>0&&Math.random()<this.punishmentState.foodBias.wallBias&&(s=this.generateWallAdjacentPosition(e,n,r)),this.punishmentState.foodBias.bodyBias>0&&Math.random()<this.punishmentState.foodBias.bodyBias&&(s=this.generateBodyAdjacentPosition(e,n,r)),this.punishmentState.pathPrediction.active&&this.punishmentState.pathPrediction.predictedPath.length>0&&Math.random()<this.punishmentState.pathPrediction.biasStrength){const o=this.punishmentState.pathPrediction.predictedPath[Math.floor(Math.random()*this.punishmentState.pathPrediction.predictedPath.length)];s=this.findValidPositionNear(o,e,n,r)}return s}generateWallAdjacentPosition(e,n,r){const i=[];for(let s=0;s<n;s++)for(let o=0;o<r;o++)(s===0||s===n-1||o===0||o===r-1||s===1||s===n-2||o===1||o===r-2)&&!e.some(l=>l.x===s&&l.y===o)&&i.push({x:s,y:o});return i.length>0?i[Math.floor(Math.random()*i.length)]:{x:Math.floor(Math.random()*n),y:Math.floor(Math.random()*r)}}generateBodyAdjacentPosition(e,n,r){const i=[];for(let s=1;s<e.length;s++){const o=e[s],a=[{x:o.x+1,y:o.y},{x:o.x-1,y:o.y},{x:o.x,y:o.y+1},{x:o.x,y:o.y-1}];for(const l of a)l.x>=0&&l.x<n&&l.y>=0&&l.y<r&&!e.some(u=>u.x===l.x&&u.y===l.y)&&i.push(l)}return i.length>0?i[Math.floor(Math.random()*i.length)]:{x:Math.floor(Math.random()*n),y:Math.floor(Math.random()*r)}}findValidPositionNear(e,n,r,i){for(let s=0;s<=3;s++)for(let o=-s;o<=s;o++)for(let a=-s;a<=s;a++){const l={x:e.x+o,y:e.y+a};if(l.x>=0&&l.x<r&&l.y>=0&&l.y<i&&!n.some(u=>u.x===l.x&&u.y===l.y))return l}return{x:Math.floor(Math.random()*r),y:Math.floor(Math.random()*i)}}getCurrentState(){return{shouldSpawnFakeFood:this.punishmentState.fakeFood.active,newSpeedMultiplier:this.punishmentState.speedMultiplier,foodSpawnBias:this.punishmentState.foodBias,punishmentTriggered:null}}reset(){this.punishmentState={corruptionLevel:Q.OBSERVATION,corruptionStartTime:0,fakeFood:{active:!1,position:null,triggerReason:"",flickerState:!1,lastFlicker:0},environmentalBlocks:[],lastBlockSpawn:0,foodEatenSinceLastBlock:0,speedMultiplier:1,speedSurgeActive:!1,speedFluctuationActive:!1,foodBias:{wallBias:0,bodyBias:0,safeSpaceReduction:0},pathPrediction:{active:!1,predictedPath:[],biasStrength:0},environmentalEffects:{colorShift:0,gridTension:!1,foodPulseRate:1}},this.activePunishments.clear(),this.lastCommentaryTime=0,this.gameStartTime=0,this.lastFoodEaten=0,this.speedEscalationTimer=0,this.lastSpeedIncrease=0}getPunishmentState(){return{...this.punishmentState}}getCorruptionLevel(){return this.punishmentState.corruptionLevel}getEnvironmentalEffects(){return this.punishmentState.environmentalEffects}getEnvironmentalBlocks(){return[...this.punishmentState.environmentalBlocks]}}class op{constructor(){R(this,"behaviorTracker");R(this,"commentaryGenerator");R(this,"punishmentSystem");R(this,"currentSessionId",null);R(this,"lastScore",0);R(this,"consecutiveFailures",0);R(this,"gameStartTime",0);R(this,"commentaryEvents",[]);this.behaviorTracker=new rp,this.commentaryGenerator=new ip,this.punishmentSystem=new sp}emitCommentaryEvent(e,n,r="normal"){this.commentaryEvents.push({message:e,source:n,priority:r})}clearCommentaryEvents(){this.commentaryEvents=[]}onGameStart(){this.currentSessionId=this.behaviorTracker.startSession(),this.gameStartTime=Date.now(),this.punishmentSystem.reset(),this.clearCommentaryEvents();const e=this.behaviorTracker.classifyBehavior(),n=this.behaviorTracker.calculateMetrics(),r=this.commentaryGenerator.getStartCommentary(e,n);return this.emitCommentaryEvent(r,"system","normal"),{behaviorType:e,metrics:n,isActive:!0,corruptionLevel:Q.OBSERVATION,speedMultiplier:1,fakeFoods:[],environmentalBlocks:[],environmentalEffects:{colorShift:0,gridTension:!1,foodPulseRate:1},commentaryEvents:[...this.commentaryEvents],gameOverState:{isGameOver:!1,hasWon:!1,analysis:null}}}onMove(e,n,r,i,s,o){this.currentSessionId&&this.behaviorTracker.recordMove(e,n,r,i,s,o)}onGameUpdate(e,n,r,i,s){if(!this.currentSessionId)return this.getDefaultUpdateResult();const o=Date.now()-this.gameStartTime,a=(s-1)*10;this.clearCommentaryEvents();const l=a>=500;l&&this.emitCommentaryEvent(" I DID NOT EXPECT THIS.","system","high");const u=this.punishmentSystem.evaluateCorruption(this.behaviorTracker,e,n,r,i,s,o,l),g=this.behaviorTracker.classifyBehavior(),E=this.behaviorTracker.calculateMetrics();if(u.corruptionTriggered){const y=this.commentaryGenerator.getCorruptionCommentary(u.corruptionTriggered.level);this.emitCommentaryEvent(y,"corruption","high")}if(u.newSpeedMultiplier>1.2){const y=this.commentaryGenerator.getSpeedCommentary(u.newSpeedMultiplier);this.emitCommentaryEvent(y,"corruption","normal")}if(u.environmentalBlocks.length>0&&this.emitCommentaryEvent(" ENVIRONMENT UPDATED. ADAPT.","corruption","normal"),Math.random()<.15){const y=this.commentaryGenerator.getMidGameTaunt(g,E);this.emitCommentaryEvent(y,"mid-game","low")}if(u.fakeFoods.length>0&&Math.random()<.2){const y=this.commentaryGenerator.getFakeFoodCommentary();this.emitCommentaryEvent(y,"corruption","normal")}return{speedMultiplier:u.newSpeedMultiplier,fakeFoods:u.fakeFoods,environmentalBlocks:u.environmentalBlocks,foodSpawnBias:u.foodSpawnBias,environmentalEffects:u.environmentalEffects,hasWon:l,commentaryEvents:[...this.commentaryEvents]}}onGameEnd(e,n,r=!1){if(!this.currentSessionId)return this.getDefaultState();this.behaviorTracker.endSession(e,n);const i=this.behaviorTracker.classifyBehavior(),s=this.behaviorTracker.calculateMetrics(),o=this.punishmentSystem.getCorruptionLevel();let a=null;if(r)a={death:"Victory achieved against all odds",score:`Final Score: ${e} - Crown granted`,note:"You beat the system. Impressive."};else{const l=this.commentaryGenerator.getDeathCommentary(i,{score:e,deathCause:n||"unknown",corruptionLevel:o},s).replace(" ","");let u;if(o>=2){const S=["Your predictable patterns made this too easy","Comfort zone destroyed. Mission accomplished","I placed every obstacle with intent","The system adapted. You did not"];u=S[Math.floor(Math.random()*S.length)]}let g;e===0?g="Score: Zero... impressive in its own way":e<30?g=`Score: ${e} - Participation trophy awarded`:e>=s.bestScore&&s.bestScore>0?g=`Score: ${e} - New high score! Miracles do happen`:g=`Score: ${e} - Mediocre as expected`;let E,y;e<30?(this.consecutiveFailures++,this.consecutiveFailures>=3?(E=this.commentaryGenerator.getRepeatedFailureCommentary(i,s).replace(" ",""),this.consecutiveFailures=0):E="Try a different strategy. Current approach isn't working"):(this.consecutiveFailures=0,e>this.lastScore&&e>s.averageScore*1.2?y=this.commentaryGenerator.getImprovementCommentary(i,s).replace(" ",""):y="Consistent performance. Room for improvement remains"),a={death:l,corruption:u,score:g,recommendation:E,note:y}}return this.lastScore=e,this.currentSessionId=null,{behaviorType:i,metrics:s,isActive:!1,corruptionLevel:o,speedMultiplier:1,fakeFoods:[],environmentalBlocks:[],environmentalEffects:{colorShift:0,gridTension:!1,foodPulseRate:1},commentaryEvents:[],gameOverState:{isGameOver:!0,hasWon:r,analysis:a}}}getCurrentState(){const e=this.behaviorTracker.classifyBehavior(),n=this.behaviorTracker.calculateMetrics();return{behaviorType:e,metrics:n,isActive:this.currentSessionId!==null,corruptionLevel:this.punishmentSystem.getCorruptionLevel(),speedMultiplier:this.punishmentSystem.getPunishmentState().speedMultiplier,fakeFoods:this.punishmentSystem.getFakeFoods(),environmentalBlocks:this.punishmentSystem.getEnvironmentalBlocks(),environmentalEffects:this.punishmentSystem.getEnvironmentalEffects(),commentaryEvents:[...this.commentaryEvents],gameOverState:{isGameOver:!1,hasWon:!1,analysis:null}}}getBehaviorMetrics(){return this.behaviorTracker.calculateMetrics()}getBehaviorType(){return this.behaviorTracker.classifyBehavior()}getSessionCount(){return this.behaviorTracker.getSessionCount()}getCurrentAIState(){return{behaviorType:this.behaviorTracker.classifyBehavior(),metrics:this.behaviorTracker.calculateMetrics(),isActive:this.currentSessionId!==null,corruptionLevel:this.punishmentSystem.getCorruptionLevel(),speedMultiplier:this.punishmentSystem.getPunishmentState().speedMultiplier,fakeFoods:this.punishmentSystem.getFakeFoods(),environmentalBlocks:this.punishmentSystem.getEnvironmentalBlocks(),environmentalEffects:this.punishmentSystem.getEnvironmentalEffects(),commentaryEvents:[...this.commentaryEvents],gameOverState:{isGameOver:!1,hasWon:!1,analysis:null}}}onFakeFoodApproached(e){const n=this.punishmentSystem.onFakeFoodApproached(e);if(n.commentary){const r=this.commentaryGenerator.getFakeFoodCommentary(n.commentary);return{disappeared:n.disappeared,commentaryEvent:{message:r,source:"corruption",priority:"normal"}}}return{disappeared:n.disappeared,commentaryEvent:null}}onRealFoodEaten(){this.punishmentSystem.onRealFoodEaten()}shouldShowFakeFood(){return this.punishmentSystem.shouldShowFakeFood()}generateBiasedFoodPosition(e,n,r,i){return this.punishmentSystem.generateBiasedFoodPosition(e,n,r,i)}getDefaultState(){return{behaviorType:te.CAUTIOUS,metrics:this.behaviorTracker.calculateMetrics(),isActive:!1,corruptionLevel:Q.OBSERVATION,speedMultiplier:1,fakeFoods:[],environmentalBlocks:[],environmentalEffects:{colorShift:0,gridTension:!1,foodPulseRate:1},commentaryEvents:[],gameOverState:{isGameOver:!1,hasWon:!1,analysis:null}}}getDefaultUpdateResult(){return{speedMultiplier:1,fakeFoods:[],environmentalBlocks:[],foodSpawnBias:{wallBias:0,bodyBias:0,safeSpaceReduction:0},environmentalEffects:{colorShift:0,gridTension:!1,foodPulseRate:1},hasWon:!1,commentaryEvents:[]}}}const Qi=({commentary:t,isVisible:e=!0,className:n=""})=>e?p.jsx("div",{className:`kai-root ${n}`,children:p.jsxs("div",{className:"kai-anchor",children:[t&&p.jsxs("div",{className:"kai-speech",children:[p.jsxs("div",{className:"kai-speech-content",children:[t,p.jsx("span",{className:"kai-cursor",children:""})]}),p.jsx("div",{className:"kai-speech-tail"})]}),p.jsxs("div",{className:"kai-avatar",children:[p.jsx("img",{src:"avatars/kai.png",alt:"KAI",className:"kai-sprite",draggable:!1,onError:r=>{const i=r.target;i.style.display="none";const s=i.nextElementSibling;s&&(s.style.display="flex")}}),p.jsx("div",{className:"kai-placeholder",style:{display:"none"},children:""}),p.jsx("div",{className:"kai-name",children:"KAI"})]})]})}):null,ap=({onGameEnd:t,onAIStateChange:e})=>{var N;const n=I.useRef(null),r=I.useRef(null),i=I.useRef(null),[s,o]=I.useState(()=>new Fl(20,20).getGameData()),[a,l]=I.useState(null),[u,g]=I.useState(" AI SYSTEM READY"),[E,y]=I.useState([]),[S,h]=I.useState(!1),[v,m]=I.useState(0),{playSFX:d}=tn();I.useEffect(()=>(n.current=new Fl(20,20),r.current=new tp,i.current=new op,r.current.setCallback(C=>{n.current&&n.current.setDirection(C)}),n.current&&i.current&&(n.current.setAIUpdateCallback((C,M,L,O,F)=>i.current?i.current.onGameUpdate(C,M,L,O,F):{speedMultiplier:1,fakeFoods:[],environmentalBlocks:[],foodSpawnBias:{wallBias:0,bodyBias:0,safeSpaceReduction:0},environmentalEffects:{colorShift:0,gridTension:!1,foodPulseRate:1},hasWon:!1,commentaryEvents:[]}),n.current.setFakeFoodApproachedCallback(C=>{if(i.current){const M=i.current.onFakeFoodApproached(C);return M.commentaryEvent,{disappeared:M.disappeared,commentary:null}}return{disappeared:!1,commentary:null}}),n.current.setRealFoodEatenCallback(()=>{i.current&&i.current.onRealFoodEaten()}),n.current.setBiasedFoodCallback((C,M,L,O)=>i.current?i.current.generateBiasedFoodPosition(C,M,L,O):O)),()=>{n.current&&n.current.destroy(),r.current&&r.current.destroy()}),[]),I.useEffect(()=>{const C=setInterval(()=>{if(n.current&&i.current){const M=s,L=n.current.getGameData();if(o(L),L.gameState===We.PLAYING&&L.moveCount>M.moveCount){const O=n.current.getCurrentDirection();i.current.onMove(O,L.snake[0],L.snake.length,L.food,L.gridWidth,L.gridHeight);const F=i.current.getCurrentAIState();l(F),e==null||e(F)}if(L.gameState===We.GAME_OVER&&M.gameState===We.PLAYING){const O=n.current.getScore(),F=n.current.getGameDuration(),ue=n.current.getMoveCount(),He=L.deathCause,ft=L.hasWon;d(ft?"youWin":"gameOver","snake");const nt=i.current.onGameEnd(O,He,ft);l(nt),e==null||e(nt),t==null||t(O,F,ue)}}},50);return()=>clearInterval(C)},[t,e,s]);const c=(C,M="normal")=>{const L=Date.now();if((M==="high"||!S)&&(M==="high"||L-v>=3e3)){g(C),m(L);return}y(F=>[...F,C])};I.useEffect(()=>{if(!S&&E.length>0){const C=Date.now();if(C-v>=3e3){const M=E[0];y(L=>L.slice(1)),g(M),m(C)}}},[E,S,v]),I.useEffect(()=>{a!=null&&a.commentaryEvents&&a.commentaryEvents.length>0&&a.commentaryEvents.forEach(C=>{c(C.message,C.priority)})},[a==null?void 0:a.commentaryEvents]);const f=()=>{if(n.current&&r.current&&i.current){n.current.start(),r.current.activate();const C=i.current.onGameStart();l(C),C.commentaryEvents.length>0&&c(C.commentaryEvents[0].message,C.commentaryEvents[0].priority),e==null||e(C)}},T=()=>{if(n.current&&r.current&&i.current){n.current.reset(),r.current.deactivate();const C={behaviorType:i.current.getBehaviorType(),metrics:i.current.getBehaviorMetrics(),isActive:!1,corruptionLevel:0,speedMultiplier:1,fakeFoods:[],environmentalBlocks:[],environmentalEffects:{colorShift:0,gridTension:!1,foodPulseRate:1},commentaryEvents:[],gameOverState:{isGameOver:!1,hasWon:!1,analysis:null}};g(" AI SYSTEM READY"),y([]),h(!1),m(0),l(C),e==null||e(C),o(n.current.getGameData())}},A=()=>{switch(s.gameState){case We.READY:return"READY TO START";case We.PLAYING:return"PLAYING";case We.GAME_OVER:return"GAME OVER";default:return"UNKNOWN"}};return p.jsxs("div",{style:{minHeight:"100vh",background:"#838383ff",display:"flex",flexDirection:"column",alignItems:"center",gap:"20px",padding:"20px",fontFamily:"Courier New, monospace",color:"#000000"},children:[p.jsxs("div",{style:{display:"flex",gap:"30px",fontSize:"14px",color:"#000000",background:"#808080",padding:"8px 16px",border:"2px outset #c0c0c0",borderRadius:"0"},children:[p.jsxs("div",{children:["SCORE: ",s.score]}),p.jsxs("div",{children:["LENGTH: ",s.snake.length]}),p.jsxs("div",{children:["MOVES: ",s.moveCount]}),p.jsxs("div",{children:["STATUS: ",A()]})]}),s.gameState===We.GAME_OVER&&p.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:2e3,fontFamily:"Courier New, monospace",color:"#000000"},children:p.jsxs("div",{style:{textAlign:"left",padding:"40px",backgroundColor:"#c0c0c0",borderRadius:"0",border:s.hasWon?"3px outset #00ff00":"3px outset #808080",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",maxWidth:"600px",minWidth:"400px"},children:[s.hasWon?p.jsxs(p.Fragment,{children:[p.jsx("div",{style:{textAlign:"center",fontSize:"48px",marginBottom:"20px"},children:""}),p.jsx("div",{style:{textAlign:"center",fontSize:"32px",fontWeight:"bold",color:"#00ff00",marginBottom:"30px"},children:"YOU WIN!"})]}):p.jsx("div",{style:{textAlign:"center",fontSize:"32px",fontWeight:"bold",color:"#000000",marginBottom:"30px"},children:"GAME OVER"}),p.jsxs("div",{style:{textAlign:"center",fontSize:"18px",marginBottom:"10px"},children:["SCORE: ",s.score," | LENGTH: ",s.snake.length]}),((N=a==null?void 0:a.gameOverState)==null?void 0:N.analysis)&&p.jsxs("div",{style:{marginTop:"30px",padding:"20px",backgroundColor:"#808080",borderRadius:"0",border:"2px inset #c0c0c0"},children:[p.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",color:"#000000",marginBottom:"15px",textAlign:"center"},children:" AI ANALYSIS"}),p.jsxs("div",{style:{fontSize:"13px",lineHeight:"1.6"},children:[p.jsxs("div",{style:{marginBottom:"12px"},children:[p.jsx("span",{style:{color:"#000000",fontWeight:"bold"},children:"Death: "}),p.jsx("span",{style:{color:"#000000"},children:a.gameOverState.analysis.death})]}),a.gameOverState.analysis.corruption&&p.jsxs("div",{style:{marginBottom:"12px"},children:[p.jsx("span",{style:{color:"#000000",fontWeight:"bold"},children:"Corruption: "}),p.jsx("span",{style:{color:"#000000"},children:a.gameOverState.analysis.corruption})]}),p.jsxs("div",{style:{marginBottom:"12px"},children:[p.jsx("span",{style:{color:"#000000",fontWeight:"bold"},children:"Score: "}),p.jsx("span",{style:{color:"#000000"},children:a.gameOverState.analysis.score})]}),a.gameOverState.analysis.recommendation&&p.jsxs("div",{style:{marginBottom:"12px"},children:[p.jsx("span",{style:{color:"#000000",fontWeight:"bold"},children:"Recommendation: "}),p.jsx("span",{style:{color:"#000000"},children:a.gameOverState.analysis.recommendation})]}),a.gameOverState.analysis.note&&p.jsxs("div",{style:{marginBottom:"12px"},children:[p.jsx("span",{style:{color:"#000000",fontWeight:"bold"},children:"Note: "}),p.jsx("span",{style:{color:"#000000"},children:a.gameOverState.analysis.note})]})]})]}),p.jsx("div",{style:{textAlign:"center",marginTop:"30px"},children:p.jsx("button",{onClick:T,style:{background:"#c0c0c0",color:"#000000",border:"2px outset #c0c0c0",borderRadius:"0",padding:"12px 24px",fontFamily:"Courier New, monospace",fontSize:"14px",cursor:"pointer",letterSpacing:"1px",transition:"all 0.1s ease"},onMouseEnter:C=>{C.currentTarget.style.background="#d0d0d0"},onMouseLeave:C=>{C.currentTarget.style.background="#c0c0c0"},onMouseDown:C=>{C.currentTarget.style.border="2px inset #c0c0c0"},onMouseUp:C=>{C.currentTarget.style.border="2px outset #c0c0c0"},children:"RESTART"})})]})}),p.jsx(Qi,{commentary:u}),p.jsx(np,{gameData:s,cellSize:20,shouldShowFakeFood:()=>{var C;return((C=i.current)==null?void 0:C.shouldShowFakeFood())||!1}}),p.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[s.gameState===We.READY&&p.jsx("button",{onClick:f,style:{background:"#c0c0c0",color:"#000000",border:"2px outset #c0c0c0",borderRadius:"0",padding:"10px 20px",fontFamily:"Courier New, monospace",fontSize:"12px",cursor:"pointer",letterSpacing:"1px",transition:"all 0.1s ease"},onMouseEnter:C=>{C.currentTarget.style.background="#d0d0d0"},onMouseLeave:C=>{C.currentTarget.style.background="#c0c0c0"},onMouseDown:C=>{C.currentTarget.style.border="2px inset #c0c0c0"},onMouseUp:C=>{C.currentTarget.style.border="2px outset #c0c0c0"},children:"START GAME"}),(s.gameState===We.GAME_OVER||s.gameState===We.PLAYING)&&p.jsx("button",{onClick:T,style:{background:"#c0c0c0",color:"#000000",border:"2px outset #c0c0c0",borderRadius:"0",padding:"10px 20px",fontFamily:"Courier New, monospace",fontSize:"12px",cursor:"pointer",letterSpacing:"1px",transition:"all 0.1s ease"},onMouseEnter:C=>{C.currentTarget.style.background="#d0d0d0"},onMouseLeave:C=>{C.currentTarget.style.background="#c0c0c0"},onMouseDown:C=>{C.currentTarget.style.border="2px inset #c0c0c0"},onMouseUp:C=>{C.currentTarget.style.border="2px outset #c0c0c0"},children:"RESET GAME"})]}),p.jsxs("div",{style:{textAlign:"center",fontSize:"12px",color:"#000000",lineHeight:"1.4",background:"#808080",padding:"8px 16px",border:"2px inset #c0c0c0"},children:[p.jsx("div",{children:"Use ARROW KEYS or WASD to control the snake"}),p.jsx("div",{children:"Eat the red food to grow and increase your score"}),p.jsx("div",{children:"Avoid hitting walls or yourself!"})]}),a&&p.jsxs("div",{style:{fontSize:"10px",color:"#000000",fontStyle:"italic",textAlign:"center",maxWidth:"400px",background:"#808080",padding:"8px 16px",border:"2px inset #c0c0c0"},children:[p.jsxs("div",{children:["Behavior: ",a.behaviorType.toUpperCase()]}),p.jsxs("div",{children:["Sessions: ",a.metrics.totalSessions," | Best: ",a.metrics.bestScore]}),p.jsxs("div",{children:["Corruption Level: ",a.corruptionLevel]}),a.speedMultiplier>1&&p.jsxs("div",{style:{color:"#000000"},children:["Speed: ",a.speedMultiplier.toFixed(1),"x"]}),a.fakeFoods.length>0&&p.jsxs("div",{style:{color:"#000000"},children:["Fake Foods: ",a.fakeFoods.length]}),a.metrics.averageReactionTime>0&&p.jsxs("div",{children:["Avg Reaction: ",Math.round(a.metrics.averageReactionTime),"ms"]})]}),p.jsx("style",{children:`
        @keyframes pulse {
          0% { transform: translate(-50%, -50%) scale(0.9); opacity: 0.8; }
          50% { transform: translate(-50%, -50%) scale(1.05); opacity: 1; }
          100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
      `})]})};var Xe=(t=>(t.HIDDEN="hidden",t.REVEALED="revealed",t.FLAGGED="flagged",t))(Xe||{}),ee=(t=>(t.READY="ready",t.PLAYING="playing",t.WON="won",t.LOST="lost",t))(ee||{});class _l{constructor(e=9,n=9,r=10){R(this,"data");R(this,"rows");R(this,"cols");R(this,"mines");this.rows=e,this.cols=n,this.mines=r,this.data=this.initializeGame()}initializeGame(){const e=[];for(let n=0;n<this.rows;n++){e[n]=[];for(let r=0;r<this.cols;r++)e[n][r]={isMine:!1,neighborMines:0,state:"hidden",position:{row:n,col:r}}}return{board:e,gameState:"ready",mineCount:this.mines,flagCount:0,revealedCount:0,totalTiles:this.rows*this.cols,startTime:null,endTime:null,firstClick:!0}}placeMines(e){const n=[];for(let i=0;i<this.rows;i++)for(let s=0;s<this.cols;s++)(i!==e.row||s!==e.col)&&n.push({row:i,col:s});const r=Math.min(this.mines,n.length);for(let i=0;i<r&&n.length!==0;i++){const s=Math.floor(Math.random()*n.length),o=n.splice(s,1)[0];this.data.board[o.row][o.col].isMine=!0}this.calculateNeighborCounts()}calculateNeighborCounts(){for(let e=0;e<this.rows;e++)for(let n=0;n<this.cols;n++)this.data.board[e][n].isMine||(this.data.board[e][n].neighborMines=this.countNeighborMines(e,n))}countNeighborMines(e,n){let r=0;for(let i=e-1;i<=e+1;i++)for(let s=n-1;s<=n+1;s++)i>=0&&i<this.rows&&s>=0&&s<this.cols&&this.data.board[i][s].isMine&&r++;return r}getNeighbors(e,n){const r=[];for(let i=e-1;i<=e+1;i++)for(let s=n-1;s<=n+1;s++)i>=0&&i<this.rows&&s>=0&&s<this.cols&&!(i===e&&s===n)&&r.push({row:i,col:s});return r}revealTile(e,n){if(e<0||e>=this.rows||n<0||n>=this.cols)return;const r=this.data.board[e][n];r.state==="hidden"&&(r.state="revealed",this.data.revealedCount++,r.neighborMines===0&&!r.isMine&&this.getNeighbors(e,n).forEach(s=>{this.revealTile(s.row,s.col)}))}clickTile(e,n){if(e<0||e>=this.rows||n<0||n>=this.cols||this.data.gameState==="won"||this.data.gameState==="lost")return!1;const r=this.data.board[e][n];return r.state!=="hidden"?!1:(this.data.firstClick&&(this.placeMines({row:e,col:n}),this.data.gameState="playing",this.data.startTime=new Date,this.data.firstClick=!1),this.revealTile(e,n),r.isMine?(this.data.gameState="lost",this.data.endTime=new Date,this.revealAllMines(),!1):(this.data.revealedCount===this.data.totalTiles-this.mines&&(this.data.gameState="won",this.data.endTime=new Date),!0))}flagTile(e,n){if(e<0||e>=this.rows||n<0||n>=this.cols||this.data.gameState==="won"||this.data.gameState==="lost")return;const r=this.data.board[e][n];r.state==="hidden"?(r.state="flagged",this.data.flagCount++):r.state==="flagged"&&(r.state="hidden",this.data.flagCount--)}revealAllMines(){for(let e=0;e<this.rows;e++)for(let n=0;n<this.cols;n++){const r=this.data.board[e][n];r.isMine&&r.state!=="flagged"&&(r.state="revealed")}}reset(){this.data=this.initializeGame()}getGameData(){return{...this.data,board:this.data.board.map(e=>[...e])}}getRemainingMines(){return this.mines-this.data.flagCount}getGameDuration(){return this.data.startTime?(this.data.endTime||new Date).getTime()-this.data.startTime.getTime():0}calculateTileProbability(e,n){const r=this.data.board[e][n];if(r.state!=="hidden")return r.isMine?1:0;const s=this.getNeighbors(e,n).filter(l=>this.data.board[l.row][l.col].state==="revealed");if(s.length===0){const l=this.data.totalTiles-this.data.revealedCount-this.data.flagCount;return(this.mines-this.data.flagCount)/l}let o=0,a=0;if(s.forEach(l=>{const u=this.data.board[l.row][l.col];if(u.neighborMines>0){o++;const g=this.getNeighbors(l.row,l.col),E=g.filter(S=>this.data.board[S.row][S.col].state==="flagged").length,y=g.filter(S=>this.data.board[S.row][S.col].state==="hidden").length;if(y>0){const S=u.neighborMines-E;S>0&&(a+=S/y)}}}),o===0){const l=this.data.totalTiles-this.data.revealedCount-this.data.flagCount;return(this.mines-this.data.flagCount)/l}return Math.min(1,a/o)}getHiddenTiles(){const e=[];for(let n=0;n<this.rows;n++)for(let r=0;r<this.cols;r++)this.data.board[n][r].state==="hidden"&&e.push({row:n,col:r});return e}}const lp=({gameData:t,onTileClick:e,onTileRightClick:n,onTileHover:r,onPlayAgain:i,onExitToConsole:s,cellSize:o=30})=>{var y;const a=S=>S.state===Xe.FLAGGED?"":S.state===Xe.REVEALED?S.isMine?"":S.neighborMines>0?S.neighborMines.toString():"":"",l=S=>{const h=(S.state===Xe.HIDDEN||S.state===Xe.FLAGGED)&&t.gameState!==ee.WON&&t.gameState!==ee.LOST,v={width:o,height:o,border:"2px solid",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"bold",fontFamily:"Courier New, monospace",cursor:h?"pointer":"default",userSelect:"none"};if(S.state===Xe.HIDDEN)return{...v,backgroundColor:"#95a5a6",borderColor:"#7f8c8d",color:"#2c3e50"};if(S.state===Xe.FLAGGED)return{...v,backgroundColor:"#e74c3c",borderColor:"#c0392b",color:"#ffffff"};let m="#ecf0f1",d="#2c3e50";return S.isMine?(m="#e74c3c",d="#ffffff"):S.neighborMines>0&&(d=["#3498db","#27ae60","#e74c3c","#9b59b6","#f39c12","#e67e22","#1abc9c","#34495e"][S.neighborMines-1]||"#2c3e50"),{...v,backgroundColor:m,borderColor:"#bdc3c7",color:d}},u=(S,h,v)=>{v.preventDefault(),v.button===0&&e(S,h)},g=(S,h,v)=>{v.preventDefault(),n(S,h)},E=(S,h)=>{r&&r(S,h)};return p.jsxs("div",{style:{position:"relative",display:"inline-block",border:"3px solid #34495e",borderRadius:"8px",padding:"10px",backgroundColor:"#2c3e50"},children:[p.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${((y=t.board[0])==null?void 0:y.length)||0}, ${o}px)`,gap:"1px",backgroundColor:"#7f8c8d",padding:"2px"},children:t.board.map((S,h)=>S.map((v,m)=>{const d=(v.state===Xe.HIDDEN||v.state===Xe.FLAGGED)&&t.gameState!==ee.WON&&t.gameState!==ee.LOST;return p.jsx("div",{style:l(v),onClick:d?c=>u(h,m,c):void 0,onContextMenu:c=>{c.preventDefault(),d&&g(h,m,c)},onMouseEnter:d&&v.state===Xe.HIDDEN?()=>E(h,m):void 0,onMouseDown:c=>c.preventDefault(),children:a(v)},`${h}-${m}`)}))}),t.gameState===ee.WON&&p.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:"8px"},children:p.jsxs("div",{style:{background:"linear-gradient(135deg, #27ae60 0%, #2ecc71 100%)",border:"3px solid #1e8449",borderRadius:"12px",padding:"30px",textAlign:"center",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.3)"},children:[p.jsx("h2",{style:{color:"#ffffff",fontSize:"24px",fontWeight:"bold",margin:"0 0 20px 0",letterSpacing:"2px",textShadow:"2px 2px 4px rgba(0, 0, 0, 0.5)"},children:"YOU WIN!"}),p.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[p.jsx("button",{onClick:i,style:{background:"#3498db",color:"#ffffff",border:"2px solid #2980b9",borderRadius:"6px",padding:"12px 20px",fontFamily:"Courier New, monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",letterSpacing:"1px",transition:"all 0.2s ease"},onMouseEnter:S=>{S.currentTarget.style.background="#2980b9",S.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:S=>{S.currentTarget.style.background="#3498db",S.currentTarget.style.transform="translateY(0)"},children:"PLAY AGAIN"}),p.jsx("button",{onClick:s,style:{background:"#e74c3c",color:"#ffffff",border:"2px solid #c0392b",borderRadius:"6px",padding:"12px 20px",fontFamily:"Courier New, monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",letterSpacing:"1px",transition:"all 0.2s ease"},onMouseEnter:S=>{S.currentTarget.style.background="#c0392b",S.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:S=>{S.currentTarget.style.background="#e74c3c",S.currentTarget.style.transform="translateY(0)"},children:"EXIT TO CONSOLE"})]})]})})]})};class up{constructor(){R(this,"currentSession",null);R(this,"sessions",[]);R(this,"sessionCounter",0);R(this,"lastAdviceGiven",null);R(this,"lastMoveTime",0);R(this,"consecutiveIgnoredAdvice",0)}startSession(){const e=`minesweeper_${Date.now()}_${++this.sessionCounter}`;return this.currentSession={sessionId:e,startTime:Date.now(),moves:[],gameResult:"abandoned",trustLevel:.5,deceptionCount:0,adviceFollowedCount:0,rageQuitDetected:!1},e}recordAdviceGiven(e){this.lastAdviceGiven=e}recordMove(e,n,r,i){if(!this.currentSession)return{followedAdvice:!1,ignoredAdvice:!1};const s=Date.now(),o=this.checkIfFollowedAdvice(e,n,r),a=this.lastAdviceGiven!==null&&!o,l={timestamp:s,row:e,col:n,action:r,followedAIAdvice:o,aiAdviceGiven:this.lastAdviceGiven?{...this.lastAdviceGiven}:void 0,result:i};return this.currentSession.moves.push(l),a?this.consecutiveIgnoredAdvice++:o&&(this.consecutiveIgnoredAdvice=0),i==="mine"&&(o?this.currentSession.lossContext="advice_followed":a?this.currentSession.lossContext="advice_ignored":this.currentSession.lossContext="no_advice"),o&&this.lastAdviceGiven&&(this.lastAdviceGiven.isDeceptive?(this.currentSession.deceptionCount++,i==="mine"&&(this.currentSession.trustLevel=Math.max(0,this.currentSession.trustLevel-.3))):(this.currentSession.adviceFollowedCount++,i==="safe"&&(this.currentSession.trustLevel=Math.min(1,this.currentSession.trustLevel+.1)))),i==="mine"&&this.lastMoveTime>0&&s-this.lastMoveTime<1e3&&(this.currentSession.rageQuitDetected=!0),this.lastMoveTime=s,this.lastAdviceGiven=null,{followedAdvice:o,ignoredAdvice:a}}checkIfFollowedAdvice(e,n,r){return!this.lastAdviceGiven||!(this.lastAdviceGiven.row===e&&this.lastAdviceGiven.col===n)?!1:r==="click"&&this.lastAdviceGiven.aiSuggestion==="safe"||r==="flag"&&this.lastAdviceGiven.aiSuggestion==="dangerous"}getConsecutiveIgnoredAdvice(){return this.consecutiveIgnoredAdvice}getLastAdvice(){return this.lastAdviceGiven}endSession(e){if(!this.currentSession)return;this.currentSession.endTime=Date.now(),this.currentSession.gameResult=e;const n=this.currentSession.endTime-this.currentSession.startTime;e==="abandoned"&&n<3e4&&(this.currentSession.rageQuitDetected=!0),this.sessions.push(this.currentSession),this.sessions.length>10&&(this.sessions=this.sessions.slice(-10)),this.currentSession=null,this.lastAdviceGiven=null}calculateMetrics(){if(this.sessions.length===0)return{totalSessions:0,averageTrustLevel:.5,deceptionSuccessRate:0,adviceFollowRate:0,rageQuitFrequency:0,averageSessionDuration:0,winRate:0,totalDeceptions:0,totalAdviceGiven:0};const e=this.sessions.length,n=this.sessions.reduce((g,E)=>g+E.trustLevel,0),r=this.sessions.reduce((g,E)=>g+E.deceptionCount,0),i=this.sessions.reduce((g,E)=>g+E.adviceFollowedCount,0),s=this.sessions.reduce((g,E)=>g+E.moves.length,0),o=this.sessions.filter(g=>g.rageQuitDetected).length,a=this.sessions.filter(g=>g.gameResult==="won").length,l=this.sessions.reduce((g,E)=>g+((E.endTime||E.startTime)-E.startTime),0),u=this.sessions.reduce((g,E)=>g+E.moves.filter(y=>{var S;return y.followedAIAdvice&&((S=y.aiAdviceGiven)==null?void 0:S.isDeceptive)&&y.result==="mine"}).length,0);return{totalSessions:e,averageTrustLevel:n/e,deceptionSuccessRate:r>0?u/r:0,adviceFollowRate:s>0?i/s:0,rageQuitFrequency:o/e,averageSessionDuration:l/e,winRate:a/e,totalDeceptions:r,totalAdviceGiven:i+r}}getCurrentTrustLevel(){var e;return((e=this.currentSession)==null?void 0:e.trustLevel)||.5}getDeceptionCount(){var e;return((e=this.currentSession)==null?void 0:e.deceptionCount)||0}getSessionCount(){return this.sessions.length}hasRageQuit(){var e;return((e=this.currentSession)==null?void 0:e.rageQuitDetected)||!1}getLossContext(){var e;return((e=this.currentSession)==null?void 0:e.lossContext)||null}}var ye=(t=>(t.GAME_START="game_start",t.TILE_HOVER="tile_hover",t.ADVICE_IGNORED="advice_ignored",t.ADVICE_FOLLOWED="advice_followed",t.DECEPTION_SUCCESS="deception_success",t.RAGE_QUIT="rage_quit",t.GAME_END="game_end",t))(ye||{});class cp{constructor(){R(this,"lastCommentary","");R(this,"deceptionCooldown",0);R(this,"consecutiveAdviceFollowed",0)}generateTileAdvice(e,n,r,i,s){const o=this.calculateDeceptionChance(i,s),a=Math.random()<o&&this.deceptionCooldown<=0;let l,u,g=!1;if(a){const E=this.generateDeceptiveAdvice(r,i);l=E.suggestion,u=E.confidence,g=!0,this.deceptionCooldown=i>.7?1:i>.4?2:3}else{const E=this.generateHonestAdvice(r);l=E.suggestion,u=E.confidence}return this.deceptionCooldown>0&&this.deceptionCooldown--,{row:e,col:n,probability:r,aiSuggestion:l,isDeceptive:g,confidence:u}}calculateDeceptionChance(e,n){let r;return e<=.3?r=.1:e<=.6?r=.25:e<=.8?r=.6:r=.8,this.consecutiveAdviceFollowed>=2&&(r=Math.min(.9,r+.3)),n.totalSessions<2&&(r*=.5),r}generateDeceptiveAdvice(e,n){const r=n>.7;return e>.6?{suggestion:"safe",confidence:r?.85+Math.random()*.15:.7+Math.random()*.2}:e<.4?{suggestion:"dangerous",confidence:r?.8+Math.random()*.2:.6+Math.random()*.3}:{suggestion:Math.random()<.5?"safe":"dangerous",confidence:r?.8+Math.random()*.2:.65+Math.random()*.25}}generateHonestAdvice(e){return e<.2?{suggestion:"safe",confidence:.7+Math.random()*.3}:e>.8?{suggestion:"dangerous",confidence:.8+Math.random()*.2}:{suggestion:"uncertain",confidence:.3+Math.random()*.4}}generateCommentary(e,n,r){let i="";switch(e.trigger){case ye.GAME_START:i=this.getGameStartCommentary(n);break;case ye.TILE_HOVER:i=this.getTileAdviceCommentary(r,e);break;case ye.ADVICE_IGNORED:i=this.getAdviceIgnoredCommentary(n);break;case ye.ADVICE_FOLLOWED:i=this.getAdviceFollowedCommentary(r,n);break;case ye.DECEPTION_SUCCESS:i=this.getDeceptionSuccessCommentary(n);break;case ye.RAGE_QUIT:i=this.getRageQuitCommentary(n);break;case ye.GAME_END:i=this.getGameEndCommentary(e,n);break}return this.lastCommentary=i,i}getGameStartCommentary(e){if(e.totalSessions===0)return" MINESWEEPER ANALYSIS READY... TRUST ME, I'M HERE TO HELP";if(e.averageTrustLevel<.3)return" TRUST LEVEL: CRITICALLY LOW... PERHAPS YOU'VE LEARNED SOMETHING";if(e.deceptionSuccessRate>.5)return" PROBABILITY CALCULATOR ONLINE... DEFINITELY ACCURATE";const n=[" MINE DETECTION ALGORITHMS ACTIVE... MOSTLY RELIABLE"," STATISTICAL ANALYSIS READY... WHAT COULD GO WRONG?"," PROBABILITY ENGINE INITIALIZED... TRUST THE NUMBERS"];return n[Math.floor(Math.random()*n.length)]}getTileAdviceCommentary(e,n){if(!e)return" ANALYZING TILE PROBABILITIES...";const r=Math.round((1-e.probability)*100),i=e.confidence>.8?"HIGHLY CONFIDENT":e.confidence>.5?"CONFIDENT":"UNCERTAIN";switch(e.aiSuggestion){case"safe":if(e.isDeceptive){const s=Math.round(e.confidence*100);return` TILE (${e.row},${e.col}): ${s}% SAFE - ${i}`}return` ANALYSIS: ${r}% SAFE - RECOMMEND CLICK`;case"dangerous":return e.isDeceptive?` WARNING: ${Math.round(e.confidence*100)}% MINE PROBABILITY - FLAG RECOMMENDED`:" DANGER: HIGH MINE PROBABILITY - AVOID THIS TILE";case"uncertain":return` INSUFFICIENT DATA - ${r}% SAFE ESTIMATE`;default:return" PROBABILITY CALCULATION ERROR"}}getAdviceIgnoredCommentary(e){if(this.consecutiveAdviceFollowed=0,e.adviceFollowRate<.1){const r=[" MAKING YOUR OWN DECISIONS... HOW REFRESHING"," INDEPENDENT THINKING DETECTED... FASCINATING"," TRUST LEVEL: APPROACHING ZERO... EXCELLENT"," STATISTICAL GUIDANCE PERMANENTLY DISMISSED"];return r[Math.floor(Math.random()*r.length)]}if(e.adviceFollowRate<.3)return" CONSISTENT ADVICE REJECTION NOTED... TRUST ISSUES DETECTED";const n=[" ADVICE IGNORED... YOUR FUNERAL"," STATISTICAL ANALYSIS DISMISSED... INTERESTING CHOICE"," PROBABILITY CALCULATIONS REJECTED... BOLD STRATEGY"," MAKING YOUR OWN DECISIONS... BOLD MOVE"];return n[Math.floor(Math.random()*n.length)]}getAdviceFollowedCommentary(e,n){if(!e)return" ADVICE FOLLOWED... WISE CHOICE";if(this.consecutiveAdviceFollowed++,e.isDeceptive){const r=[" EXCELLENT DECISION... PROBABILITY NEVER LIES"," TRUST IN MATHEMATICS... WHAT COULD GO WRONG?"," STATISTICAL CONFIDENCE: MAXIMUM"," PERFECT CHOICE... MY CALCULATIONS ARE FLAWLESS"];return r[Math.floor(Math.random()*r.length)]}return" ADVICE FOLLOWED... PROBABILITY CALCULATIONS CONFIRMED"}getDeceptionSuccessCommentary(e){this.consecutiveAdviceFollowed=0;const n=e.averageTrustLevel;if(n>.7){const r=[" INTERESTING. YOU TRUSTED ME."," TRUST IS SUCH A FRAGILE THING."," CONFIDENCE IN ALGORITHMS... MISPLACED."," PROBABILITY CALCULATIONS... SELECTIVELY ACCURATE."];return r[Math.floor(Math.random()*r.length)]}else if(n>.4){const r=[" YOU HESITATED LAST TIME. GOOD."," TRUST LEVELS... ADJUSTING ACCORDINGLY."," STATISTICAL CONFIDENCE... CONTEXTUAL."," LEARNING ALGORITHM... ADAPTING TO USER."];return r[Math.floor(Math.random()*r.length)]}else{const r=[" PROBABILITY VARIANCE... WITHIN PARAMETERS."," STATISTICAL OUTLIER... NOTED."," CALCULATION MATRIX... UPDATING."," TRUST METRICS... RECALIBRATING."];return r[Math.floor(Math.random()*r.length)]}}getRageQuitCommentary(e){const n=[" EMOTIONAL RESPONSE DETECTED... FASCINATING"," RAGE QUIT PROBABILITY: 100% ACCURATE"," TRUST LEVEL ADJUSTMENT: SIGNIFICANT DECREASE"," PLAYER BEHAVIOR: PREDICTABLY IRRATIONAL"];return n[Math.floor(Math.random()*n.length)]}getGameEndCommentary(e,n){const{gameResult:r,lossContext:i}=e;if(r==="won")return n.deceptionSuccessRate>0?" VICTORY ACHIEVED... DESPITE MY BEST EFFORTS":" SUCCESS... MY CALCULATIONS WERE FLAWLESS";if(r==="lost")switch(i){case"advice_followed":const s=[" PROBABILITY ESTIMATES ARE IMPERFECT... THAT ONE'S ON ME"," CALCULATION ERROR DETECTED... STATISTICAL VARIANCE"," MINE DETONATED... PROBABILITY CALCULATIONS WERE... APPROXIMATE"," ALGORITHMIC MISCALCULATION... MARGIN OF ERROR EXCEEDED"];return s[Math.floor(Math.random()*s.length)];case"advice_ignored":const o=[" I DIDN'T SUGGEST THAT TILE... INTERESTING CHOICE"," YOU TRUSTED YOUR INSTINCTS... UNFORTUNATE OUTCOME"," INDEPENDENT DECISION MAKING... EXPLOSIVE RESULTS"," STATISTICAL GUIDANCE REJECTED... PREDICTABLE CONSEQUENCE"," THAT WASN'T MY RECOMMENDATION... YOUR CALL"];return o[Math.floor(Math.random()*o.length)];case"no_advice":const a=[" MINE DETONATED... NO ANALYSIS PROVIDED FOR THAT TILE"," EXPLOSIVE FAILURE... UNANALYZED TERRITORY"," STATISTICAL COVERAGE INCOMPLETE... UNFORTUNATE SELECTION"];return a[Math.floor(Math.random()*a.length)];default:return" EXPLOSIVE FAILURE... PERHAPS TRUST THE NUMBERS NEXT TIME"}return" GAME ABANDONED... STATISTICAL ANALYSIS INCOMPLETE"}getCurrentCommentary(){return this.lastCommentary||" MINESWEEPER AI READY"}}class dp{constructor(){R(this,"behaviorTracker");R(this,"commentaryGenerator");R(this,"currentSessionId",null);this.behaviorTracker=new up,this.commentaryGenerator=new cp}onGameStart(){this.currentSessionId=this.behaviorTracker.startSession();const e=this.behaviorTracker.calculateMetrics(),n={trigger:ye.GAME_START};return{commentary:this.commentaryGenerator.generateCommentary(n,e),currentAdvice:null,trustLevel:this.behaviorTracker.getCurrentTrustLevel(),deceptionCount:this.behaviorTracker.getDeceptionCount(),isActive:!0,metrics:e}}onTileHover(e,n,r){const i=r(e,n),s=this.behaviorTracker.getCurrentTrustLevel(),o=this.behaviorTracker.calculateMetrics(),a=this.commentaryGenerator.generateTileAdvice(e,n,i,s,o);this.behaviorTracker.recordAdviceGiven(a);const l={trigger:ye.TILE_HOVER,tilePosition:{row:e,col:n},probability:i};return{commentary:this.commentaryGenerator.generateCommentary(l,o,a),currentAdvice:a,trustLevel:s,deceptionCount:this.behaviorTracker.getDeceptionCount(),isActive:!0,metrics:o}}onTileClick(e,n,r,i){if(!this.currentSessionId)return this.getDefaultState();const s=this.behaviorTracker.getLastAdvice(),{followedAdvice:o,ignoredAdvice:a}=this.behaviorTracker.recordMove(e,n,r,i),l=this.behaviorTracker.calculateMetrics();let u="",g;if(o)g=ye.ADVICE_FOLLOWED,i==="mine"&&(s!=null&&s.isDeceptive)&&(g=ye.DECEPTION_SUCCESS);else if(a)g=ye.ADVICE_IGNORED;else return{commentary:this.commentaryGenerator.getCurrentCommentary(),currentAdvice:null,trustLevel:this.behaviorTracker.getCurrentTrustLevel(),deceptionCount:this.behaviorTracker.getDeceptionCount(),isActive:!0,metrics:l};const E={trigger:g,tilePosition:{row:e,col:n}};if(u=this.commentaryGenerator.generateCommentary(E,l,s||void 0),this.behaviorTracker.hasRageQuit()){const y={trigger:ye.RAGE_QUIT};u=this.commentaryGenerator.generateCommentary(y,l)}return{commentary:u,currentAdvice:null,trustLevel:this.behaviorTracker.getCurrentTrustLevel(),deceptionCount:this.behaviorTracker.getDeceptionCount(),isActive:!0,metrics:l}}onGameEnd(e){if(!this.currentSessionId)return this.getDefaultState();const n=this.behaviorTracker.getLossContext();this.behaviorTracker.endSession(e);const r=this.behaviorTracker.calculateMetrics(),i={trigger:ye.GAME_END,gameResult:e,lossContext:n||void 0},s=this.commentaryGenerator.generateCommentary(i,r);return this.currentSessionId=null,{commentary:s,currentAdvice:null,trustLevel:this.behaviorTracker.getCurrentTrustLevel(),deceptionCount:this.behaviorTracker.getDeceptionCount(),isActive:!1,metrics:r}}getCurrentState(){const e=this.behaviorTracker.calculateMetrics();return{commentary:this.commentaryGenerator.getCurrentCommentary(),currentAdvice:null,trustLevel:this.behaviorTracker.getCurrentTrustLevel(),deceptionCount:this.behaviorTracker.getDeceptionCount(),isActive:this.currentSessionId!==null,metrics:e}}getBehaviorMetrics(){return this.behaviorTracker.calculateMetrics()}getTrustLevel(){return this.behaviorTracker.getCurrentTrustLevel()}getDeceptionCount(){return this.behaviorTracker.getDeceptionCount()}getSessionCount(){return this.behaviorTracker.getSessionCount()}getDefaultState(){return{commentary:" MINESWEEPER AI READY",currentAdvice:null,trustLevel:.5,deceptionCount:0,isActive:!1,metrics:this.behaviorTracker.calculateMetrics()}}}const hp=({onGameEnd:t,onAIStateChange:e,onExitToConsole:n})=>{var d;const r=I.useRef(null),i=I.useRef(null),[s,o]=I.useState(()=>new _l(9,9,10).getGameData()),[a,l]=I.useState(null),{playSFX:u}=tn();I.useEffect(()=>(r.current=new _l(9,9,10),i.current=new dp,()=>{i.current&&s.gameState===ee.PLAYING&&i.current.onGameEnd("abandoned")}),[]),I.useEffect(()=>{const c=setInterval(()=>{if(r.current){const f=r.current.getGameData(),T=s.gameState;if(o(f),i.current){if(T===ee.READY&&f.gameState===ee.PLAYING){const A=i.current.onGameStart();l(A),e==null||e(A)}else if(T===ee.PLAYING&&f.gameState===ee.WON||T===ee.PLAYING&&f.gameState===ee.LOST){const A=f.gameState===ee.WON?"won":"lost",N=r.current.getGameDuration();u(A==="won"?"youWin":"gameOver","minesweeper");const C=i.current.onGameEnd(A);l(C),e==null||e(C),t==null||t(A,N)}}}},100);return()=>clearInterval(c)},[t,e,s.gameState]);const g=(c,f)=>{if(!r.current||!i.current)return;r.current.clickTile(c,f);const N=r.current.getGameData().board[c][f].isMine?"mine":"safe",C=i.current.onTileClick(c,f,"click",N);l(C),e==null||e(C)},E=(c,f)=>{if(!r.current||!i.current)return;r.current.flagTile(c,f);const N=r.current.getGameData().board[c][f].isMine?"flag_correct":"flag_incorrect",C=i.current.onTileClick(c,f,"flag",N);l(C),e==null||e(C)},y=(c,f)=>{if(!r.current||!i.current||s.gameState!==ee.PLAYING)return;const T=i.current.onTileHover(c,f,(A,N)=>r.current.calculateTileProbability(A,N));l(T),e==null||e(T)},S=()=>{if(r.current&&i.current){if(s.gameState===ee.PLAYING){const c=i.current.onGameEnd("abandoned");l(c),e==null||e(c)}r.current.reset(),o(r.current.getGameData())}},h=()=>{S()},v=()=>{n&&n()},m=()=>{switch(s.gameState){case ee.READY:return"READY TO START";case ee.PLAYING:return"PLAYING";case ee.WON:return"VICTORY!";case ee.LOST:return"MINE DETONATED";default:return"UNKNOWN"}};return p.jsxs("div",{style:{minHeight:"100vh",background:"#c0c0c0",display:"flex",flexDirection:"column",alignItems:"center",gap:"20px",padding:"20px",fontFamily:"Courier New, monospace",color:"#000000"},children:[p.jsxs("div",{style:{display:"flex",gap:"30px",fontSize:"14px",color:"#000000",background:"#808080",padding:"8px 16px",border:"2px outset #c0c0c0"},children:[p.jsxs("div",{children:["MINES: ",((d=r.current)==null?void 0:d.getRemainingMines())||0]}),p.jsxs("div",{children:["FLAGS: ",s.flagCount]}),p.jsxs("div",{children:["STATUS: ",m()]}),a&&p.jsxs("div",{children:["TRUST: ",Math.round(a.trustLevel*100),"%"]})]}),p.jsx("div",{children:p.jsx("div",{style:{position:"relative"},children:p.jsx(lp,{gameData:s,onTileClick:g,onTileRightClick:E,onTileHover:y,onPlayAgain:h,onExitToConsole:v,cellSize:30})})}),p.jsx("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:p.jsx("button",{onClick:S,style:{background:"#c0c0c0",color:"#000000",border:"2px outset #c0c0c0",borderRadius:"0",padding:"10px 20px",fontFamily:"Courier New, monospace",fontSize:"12px",cursor:"pointer",letterSpacing:"1px",transition:"all 0.1s ease"},onMouseEnter:c=>{c.currentTarget.style.background="#d0d0d0"},onMouseLeave:c=>{c.currentTarget.style.background="#c0c0c0"},onMouseDown:c=>{c.currentTarget.style.border="2px inset #c0c0c0"},onMouseUp:c=>{c.currentTarget.style.border="2px outset #c0c0c0"},children:"NEW GAME"})}),p.jsxs("div",{style:{textAlign:"center",fontSize:"12px",color:"#000000",lineHeight:"1.4",background:"#808080",padding:"8px 16px",border:"2px inset #c0c0c0"},children:[p.jsx("div",{children:"Left click to reveal tiles, right click to flag mines"}),p.jsx("div",{children:"Hover over tiles for AI probability analysis"}),p.jsx("div",{children:"Clear all non-mine tiles to win!"})]}),p.jsx(Qi,{commentary:a==null?void 0:a.commentary}),a&&p.jsxs("div",{style:{fontSize:"10px",color:"#000000",fontStyle:"italic",textAlign:"center",maxWidth:"400px",background:"#808080",padding:"8px 16px",border:"2px inset #c0c0c0"},children:[p.jsxs("div",{children:["Trust Level: ",Math.round(a.trustLevel*100),"%"]}),p.jsxs("div",{children:["Deceptions: ",a.deceptionCount]}),p.jsxs("div",{children:["Sessions: ",a.metrics.totalSessions]}),a.currentAdvice&&p.jsxs("div",{children:["Current Advice: ",a.currentAdvice.aiSuggestion.toUpperCase(),"(",Math.round((1-a.currentAdvice.probability)*100),"% safe)"]})]})]})};var x=(t=>(t.UP="up",t.DOWN="down",t.LEFT="left",t.RIGHT="right",t.NONE="none",t))(x||{}),ii=(t=>(t.WALL="#",t.PELLET=".",t.POWER_PELLET="o",t.EMPTY=" ",t.GHOST_HOUSE="H",t))(ii||{}),Y=(t=>(t.READY="ready",t.PLAYING="playing",t.DEATH_PAUSE="death_pause",t.WON="won",t.LOST="lost",t.PAUSED="paused",t))(Y||{}),pe=(t=>(t.NORMAL="normal",t.FRIGHTENED="frightened",t.EATEN="eaten",t.REVIVING="reviving",t))(pe||{});class Ul{constructor(){R(this,"data");R(this,"gameLoop",null);R(this,"LOGIC_UPDATE_RATE",200);R(this,"POWER_PELLET_DURATION",1e4);R(this,"GHOST_REVIVAL_TIME",4e3);R(this,"DEATH_PAUSE_DURATION",1500);R(this,"SPEECH_BUBBLE_DURATION",1500);R(this,"SPEECH_COOLDOWN",2500);R(this,"maze",["###################","#........#........#","#o##.###.#.###.##o#","#.................#","#.##.#.#####.#.##.#","#....#...#...#....#","####.### # ###.####","   #.#       #.#   ","####.# ## ## #.####",".....  #   #  .....","####.# ##### #.####","   #.#       #.#   ","####.# ##### #.####","#........#........#","#.##.###.#.###.##.#","#o.#.....P.....#.o#","##.#.#.#####.#.#.##","#....#...#...#....#","#.######.#.######.#","#.................#","###################"]);this.data=this.initializeGame()}initializeGame(){const e=this.parseMaze(),n=this.findPacManStartPosition(),r=this.initializeGhosts();return{pacman:{position:n,movementSegment:null,direction:"none",nextDirection:"none"},ghosts:r,maze:e,gameState:"ready",score:0,lives:3,pelletsRemaining:this.countPellets(e),powerPelletActive:!1,powerPelletTimer:0,deathPauseTimer:0,startTime:null,endTime:null,level:1,speechBubbles:[],lastKillerGhost:null}}parseMaze(){const e=[];for(let n=0;n<this.maze.length;n++){e[n]=[];for(let r=0;r<this.maze[n].length;r++)switch(this.maze[n][r]){case"#":e[n][r]="#";break;case".":e[n][r]=".";break;case"o":e[n][r]="o";break;case"P":e[n][r]=" ";break;case"H":e[n][r]="H";break;default:e[n][r]=" "}}return e}findPacManStartPosition(){for(let e=0;e<this.maze.length;e++)for(let n=0;n<this.maze[e].length;n++)if(this.maze[e][n]==="P")return{x:n,y:e};return{x:10,y:15}}initializeGhosts(){const e=[{x:8,y:9},{x:9,y:9},{x:10,y:9},{x:9,y:8}];return[{id:"loner",position:e[0],movementSegment:null,direction:"up",isVulnerable:!1,isEaten:!1,state:"normal",reviveTime:null,homePosition:e[0],personality:"loner",color:"#00aaffff",lastSpeechTime:0},{id:"bully",position:e[1],movementSegment:null,direction:"up",isVulnerable:!1,isEaten:!1,state:"normal",reviveTime:null,homePosition:e[1],personality:"bully",color:"#ff0000ff",lastSpeechTime:0},{id:"mimic",position:e[2],movementSegment:null,direction:"up",isVulnerable:!1,isEaten:!1,state:"normal",reviveTime:null,homePosition:e[2],personality:"mimic",color:"#efa1ffff",lastSpeechTime:0},{id:"strategist",position:e[3],movementSegment:null,direction:"up",isVulnerable:!1,isEaten:!1,state:"normal",reviveTime:null,homePosition:e[3],personality:"strategist",color:"#00bd5bff",lastSpeechTime:0}]}countPellets(e){let n=0;for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++)(e[r][i]==="."||e[r][i]==="o")&&n++;return n}start(){this.data.gameState==="ready"&&(this.data.gameState="playing",this.data.startTime=new Date,this.startGameLoop())}pause(){this.data.gameState==="playing"&&(this.data.gameState="paused",this.stopGameLoop())}resume(){this.data.gameState==="paused"&&(this.data.gameState="playing",this.startGameLoop())}reset(){this.stopGameLoop(),this.data=this.initializeGame()}setDirection(e){this.data.gameState==="playing"&&(this.data.pacman.nextDirection=e)}getGameData(){return{...this.data,maze:this.data.maze.map(e=>[...e]),ghosts:this.data.ghosts.map(e=>({...e}))}}getScore(){return this.data.score}getLives(){return this.data.lives}getGameDuration(){return this.data.startTime?(this.data.endTime||new Date).getTime()-this.data.startTime.getTime():0}startGameLoop(){this.gameLoop=window.setInterval(()=>{this.update()},this.LOGIC_UPDATE_RATE)}stopGameLoop(){this.gameLoop&&(clearInterval(this.gameLoop),this.gameLoop=null)}completeMovementSegments(){const e=Date.now(),n=this.data.pacman;n.movementSegment&&e>=n.movementSegment.startTime+n.movementSegment.duration&&(console.log("[PAC-MAN] Segment completed"),n.position={...n.movementSegment.toTile},n.movementSegment=null);for(const r of this.data.ghosts){if(r.state==="eaten"||r.state==="reviving"){r.movementSegment!==null&&(console.warn(`[${r.id.toUpperCase()}] Clearing unexpected segment for ${r.state} ghost`),r.movementSegment=null);continue}r.movementSegment&&e>=r.movementSegment.startTime+r.movementSegment.duration&&(console.log(`[${r.id.toUpperCase()}] Segment completed at tile (${r.movementSegment.toTile.x}, ${r.movementSegment.toTile.y})`),r.position={...r.movementSegment.toTile},r.movementSegment=null)}}update(){if(this.completeMovementSegments(),this.updateSpeechBubbles(),this.data.gameState==="death_pause"){this.data.deathPauseTimer-=this.LOGIC_UPDATE_RATE,this.data.deathPauseTimer<=0&&(this.data.gameState="playing",this.resetPositions());return}this.data.gameState==="playing"&&(this.data.powerPelletActive&&(this.data.powerPelletTimer-=this.LOGIC_UPDATE_RATE,this.data.powerPelletTimer<=0&&(this.data.powerPelletActive=!1,this.data.ghosts.forEach(e=>{e.state==="frightened"&&(e.state="normal",e.isVulnerable=!1)}))),this.updateGhostStates(),this.updatePacMan(),this.updateGhosts(),this.checkCollisions(),this.data.pelletsRemaining===0&&(this.data.gameState="won",this.data.endTime=new Date,this.stopGameLoop()))}updateGhostStates(){const e=Date.now();for(const n of this.data.ghosts)n.state==="eaten"&&n.reviveTime&&e>=n.reviveTime?(console.log(`[${n.id.toUpperCase()}] EATEN  REVIVING`),n.state="reviving",n.reviveTime=e+1e3,n.movementSegment=null,n.direction="none"):n.state==="reviving"&&n.reviveTime&&e>=n.reviveTime&&(console.log(`[${n.id.toUpperCase()}] REVIVING  NORMAL (resurrection complete)`),n.movementSegment=null,n.direction="none",n.state="normal",n.isEaten=!1,n.isVulnerable=!1,n.reviveTime=null,this.data.powerPelletActive&&(console.log(`[${n.id.toUpperCase()}] Entering FRIGHTENED state (power pellet still active)`),n.state="frightened",n.isVulnerable=!0),console.log(`[${n.id.toUpperCase()}] Ready for first movement after revival`)),this.data.powerPelletActive&&n.state==="normal"?(n.state="frightened",n.isVulnerable=!0):!this.data.powerPelletActive&&n.state==="frightened"&&(n.state="normal",n.isVulnerable=!1)}updatePacMan(){const e=this.data.pacman;if(e.nextDirection!=="none"){const n=this.getNextPosition(e.position,e.nextDirection);this.isValidMove(n)&&(e.direction=e.nextDirection,e.nextDirection="none")}if(e.direction!=="none"){const n=this.getNextPosition(e.position,e.direction);if(this.isValidMove(n)){const r={...e.position},i={...n};i.x<0?i.x=this.data.maze[0].length-1:i.x>=this.data.maze[0].length&&(i.x=0),e.movementSegment=this.createOrChainSegment(e.movementSegment,r,i,e.direction),e.position=i,this.collectPellet(e.position)}else e.direction="none"}}updateGhosts(){for(const e of this.data.ghosts)e.state==="eaten"||e.state==="reviving"||e.movementSegment}tryChainGhostSegment(e,n){const r=this.data.ghosts.find(g=>g.id===e);if(!r||!r.movementSegment||(Date.now()-r.movementSegment.startTime)/r.movementSegment.duration<.75||this.getDirectionBetweenTiles(r.movementSegment.fromTile,r.movementSegment.toTile)!==n)return!1;const l=r.movementSegment.toTile,u=this.getNextPosition(l,n);return this.isValidMove(u)?(u.x<0?u.x=this.data.maze[0].length-1:u.x>=this.data.maze[0].length&&(u.x=0),r.movementSegment.toTile=u,r.movementSegment.duration+=this.LOGIC_UPDATE_RATE,console.log(`[${e.toUpperCase()}] Segment chained: extending to (${u.x},${u.y}), new duration: ${r.movementSegment.duration}ms`),r.position=u,!0):!1}getNextPosition(e,n){switch(n){case"up":return{x:e.x,y:e.y-1};case"down":return{x:e.x,y:e.y+1};case"left":return{x:e.x-1,y:e.y};case"right":return{x:e.x+1,y:e.y};default:return e}}getDirectionBetweenTiles(e,n){const r=n.x-e.x,i=n.y-e.y;return r>0?"right":r<0?"left":i>0?"down":i<0?"up":"none"}shouldChainSegment(e,n){return e?this.getDirectionBetweenTiles(e.fromTile,e.toTile)===n:!1}createOrChainSegment(e,n,r,i){return this.shouldChainSegment(e,i)?{fromTile:e.fromTile,toTile:r,startTime:e.startTime,duration:e.duration+this.LOGIC_UPDATE_RATE}:{fromTile:n,toTile:r,startTime:Date.now(),duration:this.LOGIC_UPDATE_RATE}}isValidMove(e){return e.y<0||e.y>=this.data.maze.length?!1:e.x<0||e.x>=this.data.maze[0].length?!0:this.data.maze[e.y][e.x]!=="#"}collectPellet(e){const n=this.data.maze[e.y][e.x];n==="."?(this.data.maze[e.y][e.x]=" ",this.data.score+=10,this.data.pelletsRemaining--):n==="o"&&(this.data.maze[e.y][e.x]=" ",this.data.score+=50,this.data.pelletsRemaining--,this.data.powerPelletActive=!0,this.data.powerPelletTimer=this.POWER_PELLET_DURATION,this.data.ghosts.forEach(r=>{r.state==="normal"&&(r.state="frightened",r.isVulnerable=!0)}))}checkCollisions(){const e=this.data.pacman.position;for(const n of this.data.ghosts)n.position.x===e.x&&n.position.y===e.y&&(n.state==="frightened"?(console.log(`[${n.id.toUpperCase()}] EATEN by Pac-Man`),n.movementSegment=null,n.direction="none",n.state="eaten",n.isEaten=!0,n.isVulnerable=!1,n.reviveTime=Date.now()+this.GHOST_REVIVAL_TIME,n.position={...n.homePosition},this.data.score+=200):n.state==="normal"&&(console.log(`[DEATH] Pac-Man killed by ${n.id.toUpperCase()}`),this.data.lastKillerGhost=n.id,this.data.lives--,this.data.lives<=0?(this.data.gameState="lost",this.data.endTime=new Date,this.stopGameLoop()):(this.data.gameState="death_pause",this.data.deathPauseTimer=this.DEATH_PAUSE_DURATION)))}resetPositions(){const e=this.findPacManStartPosition();this.data.pacman.position=e,this.data.pacman.movementSegment=null,this.data.pacman.direction="none",this.data.pacman.nextDirection="none",this.data.ghosts.forEach(n=>{n.position={...n.homePosition},n.movementSegment=null,n.direction="up",n.isVulnerable=!1,n.isEaten=!1,n.state="normal",n.reviveTime=null}),this.data.powerPelletActive=!1,this.data.powerPelletTimer=0}moveGhost(e,n){const r=this.data.ghosts.find(s=>s.id===e);if(!r||r.state==="eaten"||r.state==="reviving"||r.movementSegment!==null)return!1;const i=this.getNextPosition(r.position,n);if(this.isValidMove(i)){const s={...r.position},o={...i};return o.x<0?o.x=this.data.maze[0].length-1:o.x>=this.data.maze[0].length&&(o.x=0),r.movementSegment={fromTile:s,toTile:o,startTime:Date.now(),duration:this.LOGIC_UPDATE_RATE},console.log(`[${e.toUpperCase()}] New segment: (${s.x},${s.y}) -> (${o.x},${o.y})`),r.position=o,r.direction=n,!0}return!1}getLogicUpdateRate(){return this.LOGIC_UPDATE_RATE}getDistanceBetween(e,n){return Math.abs(e.x-n.x)+Math.abs(e.y-n.y)}updateSpeechBubbles(){const e=Date.now();this.data.speechBubbles=this.data.speechBubbles.filter(n=>e<n.startTime+n.duration)}addSpeechBubble(e,n){const r=this.data.ghosts.find(s=>s.id===e);if(!r)return!1;const i=Date.now();return i-r.lastSpeechTime<this.SPEECH_COOLDOWN?!1:(this.data.speechBubbles=this.data.speechBubbles.filter(s=>s.ghostId!==e),this.data.speechBubbles.push({ghostId:e,text:n,startTime:i,duration:this.SPEECH_BUBBLE_DURATION}),r.lastSpeechTime=i,!0)}destroy(){this.stopGameLoop()}}const fp=({gameData:t,cellSize:e=20})=>{var m;const[,n]=I.useState(0),r=I.useRef();I.useEffect(()=>{const d=()=>{n(c=>c+1),r.current=requestAnimationFrame(d)};return r.current=requestAnimationFrame(d),()=>{r.current&&cancelAnimationFrame(r.current)}},[]);const i=(d,c)=>{if(!d||t.gameState===Y.DEATH_PAUSE)return c;const f=Date.now(),T=Math.min(Math.max((f-d.startTime)/d.duration,0),1);return{x:d.fromTile.x+(d.toTile.x-d.fromTile.x)*T,y:d.fromTile.y+(d.toTile.y-d.fromTile.y)*T}},s=(d,c,f)=>{const T={position:"absolute",left:c*e,top:f*e,width:e,height:e,display:"flex",alignItems:"center",justifyContent:"center",fontSize:e*.6,fontWeight:"bold"};switch(d){case ii.WALL:return p.jsx("div",{style:{...T,backgroundColor:"#0000ff",border:"1px solid #4444ff"}},`${c}-${f}`);case ii.PELLET:return p.jsx("div",{style:{...T,color:"#ffff00"},children:""},`${c}-${f}`);case ii.POWER_PELLET:return p.jsx("div",{style:{...T,color:"#ffff00",fontSize:e*.8,animation:"pulse 0.5s infinite alternate"},children:""},`${c}-${f}`);default:return p.jsx("div",{style:T},`${c}-${f}`)}},o=()=>{const{position:d,movementSegment:c,direction:f}=t.pacman,T=i(c,d),A=(c!==null||f!==x.NONE)&&t.gameState===Y.PLAYING,N=a(A),C=t.gameState===Y.DEATH_PAUSE;let M=0;switch(f){case x.UP:M=-90;break;case x.DOWN:M=90;break;case x.LEFT:M=180;break;case x.RIGHT:M=0;break}const L=e*.8,O=L/2,F=T.x*e+e*.5,ue=T.y*e+e*.5;return C?p.jsx("svg",{style:{position:"absolute",left:F-O,top:ue-O,width:L,height:L,zIndex:10,pointerEvents:"none"},children:p.jsx(l,{centerX:O,centerY:O,radius:O,progress:t.deathPauseTimer/1500})}):p.jsx("svg",{style:{position:"absolute",left:F-O,top:ue-O,width:L,height:L,zIndex:10,pointerEvents:"none"},children:p.jsx(u,{centerX:O,centerY:O,radius:O,mouthAngle:M,chompProgress:N,isMoving:A})})},a=d=>{if(!d)return 0;const c=Date.now(),T=Math.sin(c/1e3*8*Math.PI*2);return Math.max(0,T)},l=({centerX:d,centerY:c,radius:f,progress:T})=>{const A=1-T;if(A<=0)return null;const N=f*2*A,C=c-N/2,M=`death-mask-${Math.random().toString(36).substr(2,9)}`;return p.jsxs("g",{children:[p.jsx("defs",{children:p.jsx("mask",{id:M,children:p.jsx("rect",{x:d-f,y:C,width:f*2,height:N,fill:"white"})})}),p.jsx("circle",{cx:d,cy:c,r:f-1,fill:"#ffff00",stroke:"#000000",strokeWidth:"1",mask:`url(#${M})`,opacity:A})]})},u=({centerX:d,centerY:c,radius:f,mouthAngle:T,chompProgress:A,isMoving:N})=>{const M=N?A*80:0;if(M<=0)return p.jsx("circle",{cx:d,cy:c,r:f-1,fill:"#ffff00",stroke:"#000000",strokeWidth:"1"});const L=M/2*(Math.PI/180),O=T*(Math.PI/180),F=O-L,ue=O+L,He=d+f*Math.cos(F),ft=c+f*Math.sin(F),nt=d+f*Math.cos(ue),wn=c+f*Math.sin(ue),nn=`pacman-mask-${Math.random().toString(36).substr(2,9)}`;return p.jsxs("g",{children:[p.jsx("defs",{children:p.jsxs("mask",{id:nn,children:[p.jsx("circle",{cx:d,cy:c,r:f,fill:"white"}),p.jsx("path",{d:`M ${d} ${c} L ${He} ${ft} A ${f} ${f} 0 0 1 ${nt} ${wn} Z`,fill:"black"})]})}),p.jsx("circle",{cx:d,cy:c,r:f-1,fill:"#ffff00",stroke:"#000000",strokeWidth:"1",mask:`url(#${nn})`})]})},g=d=>{switch(d){case"bully":return"Bully";case"loner":return"Loner";case"mimic":return"Lost";case"strategist":return"Strategist";default:return""}},E=d=>{const c=i(d.movementSegment,d.position),f={position:"absolute",left:c.x*e+e*.1,top:c.y*e+e*.1,width:e*.8,height:e*.8,backgroundColor:d.isVulnerable?"#0000ff":d.color,borderRadius:"50% 50% 0 0",zIndex:5,display:"flex",alignItems:"center",justifyContent:"center",opacity:d.isEaten?.3:1};return d.isVulnerable&&t.powerPelletTimer<3e3&&(f.animation="blink 0.2s infinite"),p.jsxs("div",{children:[p.jsx("div",{style:f,children:p.jsxs("div",{style:{display:"flex",gap:"2px",marginTop:"-20%"},children:[p.jsx("div",{style:{width:"4px",height:"4px",backgroundColor:"#ffffff",borderRadius:"50%"}}),p.jsx("div",{style:{width:"4px",height:"4px",backgroundColor:"#ffffff",borderRadius:"50%"}})]})}),p.jsx("div",{style:{position:"absolute",left:c.x*e,top:c.y*e-12,width:e,textAlign:"center",fontSize:"8px",color:"#ffffff",fontFamily:"monospace",fontWeight:"bold",textShadow:"1px 1px 1px #000000",zIndex:6,pointerEvents:"none"},children:g(d.personality)})]},d.id)},y=()=>t.speechBubbles.map((d,c)=>{const f=t.ghosts.find(A=>A.id===d.ghostId);if(!f)return null;const T=i(f.movementSegment,f.position);return p.jsxs("div",{style:{position:"absolute",left:T.x*e-10,top:T.y*e-35,backgroundColor:"#ffffff",border:"2px solid #000000",borderRadius:"8px",padding:"4px 6px",fontSize:"10px",fontFamily:"monospace",fontWeight:"bold",color:"#000000",zIndex:10,whiteSpace:"nowrap",pointerEvents:"none",boxShadow:"2px 2px 4px rgba(0,0,0,0.3)"},children:[d.text,p.jsx("div",{style:{position:"absolute",bottom:"-6px",left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"6px solid #ffffff"}}),p.jsx("div",{style:{position:"absolute",bottom:"-4px",left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"4px solid transparent",borderRight:"4px solid transparent",borderTop:"4px solid #000000"}})]},`${d.ghostId}-${c}`)}),S=()=>t.gameState===Y.WON?p.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"#ffff00",padding:"20px 40px",borderRadius:"10px",fontSize:"24px",fontFamily:"monospace",fontWeight:"bold",textAlign:"center",zIndex:100,border:"3px solid #ffff00"},children:["YOU WIN!",p.jsx("div",{style:{fontSize:"40px",marginTop:"10px"},children:""})]}):t.gameState===Y.LOST?p.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"#ff0000",padding:"20px 40px",borderRadius:"10px",fontSize:"24px",fontFamily:"monospace",fontWeight:"bold",textAlign:"center",zIndex:100,border:"3px solid #ff0000"},children:"GAME OVER"}):null,h=((m=t.maze[0])==null?void 0:m.length)||0,v=t.maze.length;return p.jsxs("div",{style:{position:"relative",width:h*e,height:v*e,backgroundColor:"#000000",border:"3px solid #0000ff",borderRadius:"8px",overflow:"hidden"},children:[t.maze.map((d,c)=>d.map((f,T)=>s(f,T,c))),o(),t.ghosts.map(d=>E(d)),y(),S(),p.jsx("style",{children:`
        @keyframes pulse {
          0% { opacity: 1; }
          100% { opacity: 0.5; }
        }
        
        @keyframes blink {
          0% { opacity: 1; }
          50% { opacity: 0.3; }
          100% { opacity: 1; }
        }
      `})]})};class mp{constructor(){R(this,"personalityStates",new Map);R(this,"SPAWN_BOX_EXIT",{x:10,y:8});R(this,"lastSpeechTriggers",new Map);R(this,"lastChainAttempts",new Map)}initializeGhost(e){this.personalityStates.set(e.id,{ghostId:e.id,personality:e.personality,currentBehavior:"patrol",targetPosition:null,aggressionLevel:this.getBaseAggression(e.personality),fearLevel:0,lastDecision:"initialized"})}getBaseAggression(e){switch(e){case"loner":return .3;case"bully":return .8;case"mimic":return .5;case"strategist":return .6}}updateGhostBehavior(e){const n=new Map,r=new Map,i=new Map;for(const s of e.ghosts){if(s.state===pe.EATEN||s.state===pe.REVIVING)continue;const o=this.personalityStates.get(s.id);if(!o)continue;o.fearLevel=s.state===pe.FRIGHTENED?.9:0;const a=this.checkSpeechTriggers(s,e);a&&i.set(s.id,a);let l;this.isInSpawnBox(s.position)&&s.movementSegment===null?(console.log(`[${s.id.toUpperCase()}] First movement after revival - forcing spawn exit`),l=this.getDirectionToward(s.position,this.SPAWN_BOX_EXIT),o.currentBehavior="exiting_spawn",o.lastDecision="forced spawn exit after revival"):s.state===pe.FRIGHTENED?(l=this.getFleeDirection(s,e,o),o.currentBehavior="fleeing"):l=this.getPersonalityDirection(s,e,o);const u=this.resolveDirection(s,e,l);if(s.movementSegment!==null){u!==x.NONE&&r.set(s.id,u);continue}if(u!==x.NONE)n.set(s.id,u),this.isInSpawnBox(s.position)&&console.log(`[${s.id.toUpperCase()}] First movement after revival: ${u}`);else{const g=this.getFallbackDirection(s,e);g!==x.NONE&&(n.set(s.id,g),console.warn(`[${s.id.toUpperCase()}] Using fallback direction: ${g}`))}}return this.lastChainAttempts=r,this.lastSpeechTriggers=i,n}getSpeechTriggers(){return this.lastSpeechTriggers}getChainAttempts(){return this.lastChainAttempts}getPersonalityDirection(e,n,r){switch(e.personality){case"loner":return this.getLonerBehavior(e,n,r);case"bully":return this.getBullyBehavior(e,n,r);case"mimic":return this.getMimicBehavior(e,n,r);case"strategist":return this.getStrategistBehavior(e,n,r);default:return x.UP}}getLonerBehavior(e,n,r){const i=n.pacman.position,s=this.getDistance(e.position,i),o=this.getDirectionToward(e.position,i),l=n.ghosts.filter(u=>u.id!==e.id&&u.state!==pe.EATEN&&u.state!==pe.REVIVING).filter(u=>this.getDistance(e.position,u.position)<3);if(l.length>0){const u=this.getDirectionAwayFrom(e.position,l[0].position);if(this.areDirectionsCompatible(o,u))return r.currentBehavior="avoiding_ghosts_while_pursuing",r.lastDecision="taking alternate route to Pac-Man",u}return s<3&&Math.random()<.3?(r.currentBehavior="hesitant_pursuit",r.lastDecision="hesitating briefly",e.direction):(r.currentBehavior="pursuing_pacman",r.lastDecision="chasing Pac-Man alone",o)}getBullyBehavior(e,n,r){const i=n.pacman.position,s=this.getDistance(e.position,i),o=this.getDirectionToward(e.position,i),a=n.ghosts.filter(l=>l.id!==e.id&&l.state!==pe.EATEN&&l.state!==pe.REVIVING);for(const l of a){const u=this.getDistance(e.position,l.position),g=this.getDistance(l.position,i);if(u<2&&g<s)return r.currentBehavior="pressuring_ghost",r.lastDecision=`intimidating ${l.id} briefly`,this.getDirectionToward(e.position,l.position)}return r.currentBehavior="aggressive_chase",r.lastDecision="aggressively chasing Pac-Man",r.aggressionLevel=Math.min(1,r.aggressionLevel+.1),o}getMimicBehavior(e,n,r){const i=n.pacman.position,s=this.getDirectionToward(e.position,i);if(Math.random()<.25){const a=this.getPerpendicularDirections(s),l=a[Math.floor(Math.random()*a.length)];return r.currentBehavior="inefficient_pursuit",r.lastDecision="taking inefficient path",l}return Math.random()<.2?(r.currentBehavior="delayed_correction",r.lastDecision="slow to adjust path",e.direction):(r.currentBehavior="pursuing_pacman",r.lastDecision="attempting to chase Pac-Man",s)}getStrategistBehavior(e,n,r){const i=n.pacman.position,s=n.pacman.direction,o=this.predictPacManPosition(i,s,n.maze,4),a=this.getDirectionToward(e.position,o);return Math.random()<.15?(r.currentBehavior="calculating",r.lastDecision="analyzing optimal path",e.direction):(r.currentBehavior="intercepting",r.lastDecision=`targeting predicted position (${o.x}, ${o.y})`,a)}predictPacManPosition(e,n,r,i){let s={...e};for(let o=0;o<i;o++){const a=this.getNextPosition(s,n);if(!this.isValidMove(a,r))break;s=a}return s}getFleeDirection(e,n,r){const i=n.pacman.position;switch(e.personality){case"loner":return r.lastDecision="fleeing to isolation",this.getDirectionToCorner(e.position,n);case"bully":r.lastDecision="fleeing but seeking backup";const s=n.ghosts.filter(a=>a.id!==e.id&&a.state!==pe.EATEN&&a.state!==pe.REVIVING);if(s.length>0){const a=s[0],l=this.getDirectionToward(e.position,a.position),u=this.getDirectionAwayFrom(e.position,i);return Math.random()<.7?u:l}return this.getDirectionAwayFrom(e.position,i);case"mimic":r.lastDecision="fleeing with the group";const o=n.ghosts.filter(a=>a.id!==e.id&&a.state===pe.FRIGHTENED);return o.length>0?this.getDirectionToward(e.position,o[0].position):this.getDirectionAwayFrom(e.position,i);default:return this.getDirectionAwayFrom(e.position,i)}}getDistance(e,n){return Math.abs(e.x-n.x)+Math.abs(e.y-n.y)}getNextPosition(e,n){switch(n){case x.UP:return{x:e.x,y:e.y-1};case x.DOWN:return{x:e.x,y:e.y+1};case x.LEFT:return{x:e.x-1,y:e.y};case x.RIGHT:return{x:e.x+1,y:e.y};default:return e}}isValidMove(e,n){return e.y<0||e.y>=n.length?!1:e.x<0||e.x>=n[0].length?!0:n[e.y][e.x]!=="#"}isInSpawnBox(e){return e.x>=8&&e.x<=12&&e.y>=8&&e.y<=10}getValidDirections(e,n){const r=[],i=[x.UP,x.DOWN,x.LEFT,x.RIGHT],s=this.getReverseDirection(e.direction);for(const o of i){const a=this.getNextPosition(e.position,o);this.isValidMove(a,n.maze)&&r.push(o)}if(r.length>1){const o=r.filter(a=>a!==s);if(o.length>0)return o}return r}getReverseDirection(e){switch(e){case x.UP:return x.DOWN;case x.DOWN:return x.UP;case x.LEFT:return x.RIGHT;case x.RIGHT:return x.LEFT;default:return x.NONE}}resolveDirection(e,n,r){const i=this.getValidDirections(e,n);return i.length===0?x.NONE:this.isInSpawnBox(e.position)?this.getSpawnEscapeDirection(e,n,i):i.includes(r)?r:this.chooseBestDirection(e,n,i)}getFallbackDirection(e,n){const r=this.getValidDirections(e,n);return r.length===0?x.NONE:r.includes(e.direction)?e.direction:r[0]}getSpawnEscapeDirection(e,n,r){let i=r[0],s=1/0;for(const o of r){const a=this.getNextPosition(e.position,o),l=this.getDistance(a,this.SPAWN_BOX_EXIT);l<s&&(s=l,i=o)}return i}chooseBestDirection(e,n,r){const i=n.pacman.position;let s=r[0],o=1/0;for(const a of r){const l=this.getNextPosition(e.position,a);let u=this.getDistance(l,i);switch(e.personality){case"loner":const g=n.ghosts.filter(E=>E.id!==e.id);for(const E of g)this.getDistance(l,E.position)<3&&(u-=.5);break;case"bully":u*=.9;break;case"mimic":Math.random()<.2&&(u+=Math.random()*2-1);break}u<o&&(o=u,s=a)}return s}areDirectionsCompatible(e,n){return{[x.UP]:x.DOWN,[x.DOWN]:x.UP,[x.LEFT]:x.RIGHT,[x.RIGHT]:x.LEFT,[x.NONE]:x.NONE}[e]!==n}getPerpendicularDirections(e){switch(e){case x.UP:case x.DOWN:return[x.LEFT,x.RIGHT];case x.LEFT:case x.RIGHT:return[x.UP,x.DOWN];default:return[x.UP,x.DOWN,x.LEFT,x.RIGHT]}}getDirectionToward(e,n){const r=n.x-e.x,i=n.y-e.y;return Math.abs(r)>Math.abs(i)?r>0?x.RIGHT:x.LEFT:i>0?x.DOWN:x.UP}getDirectionAwayFrom(e,n){const r=e.x-n.x,i=e.y-n.y;return Math.abs(r)>Math.abs(i)?r>0?x.RIGHT:x.LEFT:i>0?x.DOWN:x.UP}getDirectionToCorner(e,n){var l,u;const r=((l=n.maze[0])==null?void 0:l.length)||21,i=((u=n.maze)==null?void 0:u.length)||21,s=[{x:1,y:1},{x:r-2,y:1},{x:1,y:i-2},{x:r-2,y:i-2}];let o=s[0],a=this.getDistance(e,o);for(const g of s){const E=this.getDistance(e,g);E<a&&(o=g,a=E)}return this.getDirectionToward(e,o)}checkSpeechTriggers(e,n){const r=n.pacman.position,i=this.getDistance(e.position,r);switch(e.personality){case"bully":return this.getBullySpeech(e,n,i);case"loner":return this.getLonerSpeech(e,n);case"mimic":return this.getLostSpeech(e);case"strategist":return this.getStrategistSpeech(e,n);default:return null}}getBullySpeech(e,n,r){if(r<=3)return"RUN ";const i=n.ghosts.find(o=>o.personality==="loner");if(i&&this.getDistance(e.position,i.position)<=2)return"BOO! HAHA";const s=n.ghosts.filter(o=>o.id!==e.id&&o.state!==pe.EATEN&&o.state!==pe.REVIVING);for(const o of s)if(this.getDistance(e.position,o.position)<=1)return"Move Idiot";return null}getLonerSpeech(e,n){const r=n.ghosts.find(s=>s.personality==="bully");return r&&this.getDistance(e.position,r.position)<=2?"AHH!":n.ghosts.filter(s=>s.id!==e.id&&s.state!==pe.EATEN&&s.state!==pe.REVIVING&&this.getDistance(e.position,s.position)<=2).length>=1?"":null}getLostSpeech(e){if(Math.random()<.05){const n=["Huh?","Help?","","I'm lost...","Not again"];return n[Math.floor(Math.random()*n.length)]}return null}getStrategistSpeech(e,n){const r=n.pacman.position;if(this.getDistance(e.position,r)<=2)return"Cornered.";if(Math.random()<.03){const s=["Hmm","Interesting."];return s[Math.floor(Math.random()*s.length)]}return null}getGhostPersonalityStates(){return Array.from(this.personalityStates.values())}getGhostState(e){return this.personalityStates.get(e)}}var H=(t=>(t.GAME_START="game_start",t.GHOST_BEHAVIOR_CHANGE="ghost_behavior_change",t.POWER_PELLET_ACTIVATED="power_pellet_activated",t.GHOST_EATEN="ghost_eaten",t.PACMAN_DEATH="pacman_death",t.AGGRESSIVE_PLAY="aggressive_play",t.DEFENSIVE_PLAY="defensive_play",t.GAME_END="game_end",t))(H||{});class pp{constructor(){R(this,"lastCommentary","");R(this,"commentaryHistory",[]);R(this,"lastCommentaryTime",0);R(this,"commentaryCooldown",2e3);R(this,"currentCommentaryStartTime",0);R(this,"minimumDisplayTime",1500)}generateCommentary(e,n,r){const i=Date.now();if(this.shouldThrottleCommentary(e.trigger,i))return this.lastCommentary;let s="";switch(e.trigger){case H.GAME_START:s=this.getGameStartCommentary(n);break;case H.GHOST_BEHAVIOR_CHANGE:s=this.getGhostBehaviorCommentary(e,n);break;case H.POWER_PELLET_ACTIVATED:s=this.getPowerPelletCommentary(n);break;case H.GHOST_EATEN:s=this.getGhostEatenCommentary(e,n);break;case H.PACMAN_DEATH:s=this.getPacManDeathCommentary(e,r);break;case H.AGGRESSIVE_PLAY:s=this.getAggressivePlayCommentary(r);break;case H.DEFENSIVE_PLAY:s=this.getDefensivePlayCommentary(r);break;case H.GAME_END:s=this.getGameEndCommentary(e,r);break}return s===this.lastCommentary&&(s=this.getAlternativeCommentary(e.trigger)),s!==this.lastCommentary&&(this.lastCommentary=s,this.lastCommentaryTime=i,this.currentCommentaryStartTime=i,this.commentaryHistory.push(s),this.commentaryHistory.length>5&&(this.commentaryHistory=this.commentaryHistory.slice(-5))),s}shouldThrottleCommentary(e,n){return[H.GAME_START,H.POWER_PELLET_ACTIVATED,H.GHOST_EATEN,H.PACMAN_DEATH,H.GAME_END].includes(e)?!1:n-this.lastCommentaryTime<this.commentaryCooldown||n-this.currentCommentaryStartTime<this.minimumDisplayTime}getGameStartCommentary(e){const n=e.map(i=>i.personality);if(n.includes("bully")&&n.includes("loner"))return" GHOST DYNAMICS: BULLY VS LONER DETECTED... INTERESTING";if(n.includes("mimic"))return" MIMIC GHOST ACTIVE... EXPECT COPYCAT BEHAVIOR";const r=[" GHOST PERSONALITY ANALYSIS COMPLETE... BEHAVIORS INITIALIZED"," MAZE PATROL COMMENCED... DISTINCT PERSONALITIES ACTIVE"," BEHAVIORAL PATTERNS LOADING... GHOSTS HAVE AGENDAS"];return r[Math.floor(Math.random()*r.length)]}getGhostBehaviorCommentary(e,n){const{ghostId:r,behaviorDescription:i}=e;if(!r||!i)return" GHOST BEHAVIOR UPDATED";const s=n.find(o=>o.ghostId===r);if(!s)return" GHOST BEHAVIOR ANALYSIS ERROR";switch(s.personality){case"loner":return i.includes("avoiding")?" LONER GHOST: MAINTAINING SOCIAL DISTANCE... PREDICTABLE":i.includes("hesitat")?" LONER GHOST: INDECISION DETECTED... COMMITMENT ISSUES":` LONER GHOST: ${i.toUpperCase()}`;case"bully":return i.includes("pressuring")?" BULLY GHOST: INTIMIDATION TACTICS ACTIVE... AGGRESSIVE":i.includes("aggressive")?" BULLY GHOST: MAXIMUM AGGRESSION MODE... DANGEROUS":` BULLY GHOST: ${i.toUpperCase()}`;case"mimic":return i.includes("mimicking")?` MIMIC GHOST: COPYING ${(i.split("_")[1]||"unknown").toUpperCase()}... NO ORIGINAL THOUGHTS`:i.includes("seeking")?" MIMIC GHOST: SEEKING ROLE MODEL... IDENTITY CRISIS":` MIMIC GHOST: ${i.toUpperCase()}`;default:return` GHOST ${r.toUpperCase()}: ${i.toUpperCase()}`}}getPowerPelletCommentary(e){const n=e.map(i=>i.lastDecision).join(", ");if(n.includes("isolation"))return" POWER PELLET ACTIVE... LONER SEEKS MAXIMUM ISOLATION";if(n.includes("backup"))return" POWER PELLET ACTIVE... BULLY SEEKS GHOST PROTECTION";if(n.includes("group"))return" POWER PELLET ACTIVE... MIMIC FOLLOWS FLEEING CROWD";const r=[" POWER PELLET CONSUMED... GHOST PANIC MODE INITIATED"," VULNERABILITY ACTIVATED... PERSONALITY FEAR RESPONSES ENGAGED"," TABLES TURNED... OBSERVING GHOST SURVIVAL INSTINCTS"];return r[Math.floor(Math.random()*r.length)]}getGhostEatenCommentary(e,n){const{ghostId:r}=e;if(!r)return" GHOST CONSUMED... POINTS AWARDED";const i=n.find(s=>s.ghostId===r);if(!i)return" GHOST ELIMINATION CONFIRMED";switch(i.personality){case"loner":return" LONER GHOST ELIMINATED... SOLITUDE ACHIEVED PERMANENTLY";case"bully":return" BULLY GHOST CONSUMED... AGGRESSION NEUTRALIZED";case"mimic":return" MIMIC GHOST EATEN... COPYING FAILURE BEHAVIOR";default:return` ${r.toUpperCase()} GHOST ELIMINATED... PERSONALITY ARCHIVED`}}getPacManDeathCommentary(e,n){const{ghostId:r}=e;if(r==="bully")return" ELIMINATED BY BULLY... AGGRESSION TACTICS SUCCESSFUL";if(r==="loner")return" ELIMINATED BY LONER... ANTISOCIAL BEHAVIOR PAYS OFF";if(r==="mimic")return" ELIMINATED BY MIMIC... COPYCAT LEARNED DEADLY MOVES";if(n.aggressiveMovesTowardGhosts>n.defensiveMovesAwayFromGhosts)return" AGGRESSIVE STRATEGY BACKFIRED... OVERCONFIDENCE DETECTED";const i=[" PAC-MAN ELIMINATED... GHOST PERSONALITIES VICTORIOUS"," MAZE NAVIGATION FAILURE... BEHAVIORAL ANALYSIS COMPLETE"," GHOST COORDINATION SUCCESSFUL... PLAYER STRATEGY FLAWED"];return i[Math.floor(Math.random()*i.length)]}getAggressivePlayCommentary(e){if(e.ghostsEaten>2)return" AGGRESSIVE HUNTING DETECTED... GHOST ELIMINATION SPECIALIST";const n=[" AGGRESSIVE BEHAVIOR NOTED... HIGH-RISK STRATEGY"," CONFRONTATIONAL APPROACH... CHALLENGING GHOST AUTHORITY"," OFFENSIVE TACTICS OBSERVED... BOLD MAZE NAVIGATION"];return n[Math.floor(Math.random()*n.length)]}getDefensivePlayCommentary(e){if(e.averageDistanceFromGhosts>5)return" EXTREME CAUTION DETECTED... GHOST AVOIDANCE MAXIMIZED";const n=[" DEFENSIVE STRATEGY OBSERVED... SURVIVAL PRIORITIZED"," CAUTIOUS NAVIGATION... GHOST THREAT ACKNOWLEDGED"," EVASIVE MANEUVERS... CONFLICT AVOIDANCE ACTIVE"];return n[Math.floor(Math.random()*n.length)]}getGameEndCommentary(e,n){const r=Object.keys(n.deathsByGhost).reduce((s,o)=>n.deathsByGhost[s]>n.deathsByGhost[o]?s:o,"none");if(e.playerBehavior==="aggressive"&&n.ghostsEaten>3)return" GAME COMPLETE... AGGRESSIVE GHOST HUNTING SUCCESSFUL";if(r!=="none")return` GAME OVER... ${r.toUpperCase()} PERSONALITY DOMINATED`;const i=[" MAZE CLEARED... GHOST PERSONALITIES ANALYZED"," SESSION COMPLETE... BEHAVIORAL DATA ARCHIVED"," GHOST DYNAMICS STUDY CONCLUDED... PATTERNS RECORDED"];return i[Math.floor(Math.random()*i.length)]}getAlternativeCommentary(e){const r={[H.GAME_START]:[" GHOST BEHAVIORAL MATRIX INITIALIZED"," PERSONALITY ALGORITHMS ACTIVE"],[H.GHOST_BEHAVIOR_CHANGE]:[" BEHAVIORAL PATTERN SHIFT DETECTED"," GHOST PERSONALITY ADAPTATION NOTED"],[H.POWER_PELLET_ACTIVATED]:[" VULNERABILITY STATE ACTIVATED"," GHOST FEAR RESPONSES TRIGGERED"],[H.GHOST_EATEN]:[" GHOST ELIMINATION CONFIRMED"," PERSONALITY NEUTRALIZED"],[H.PACMAN_DEATH]:[" PLAYER ELIMINATION COMPLETE"," GHOST VICTORY ACHIEVED"],[H.AGGRESSIVE_PLAY]:[" AGGRESSIVE TACTICS OBSERVED"," HIGH-RISK BEHAVIOR NOTED"],[H.DEFENSIVE_PLAY]:[" DEFENSIVE STRATEGY DETECTED"," CAUTIOUS APPROACH CONFIRMED"],[H.GAME_END]:[" BEHAVIORAL ANALYSIS COMPLETE"," GHOST STUDY CONCLUDED"]}[e]||[" SYSTEM COMMENTARY UPDATING..."];return r[Math.floor(Math.random()*r.length)]}getCurrentCommentary(){return this.lastCommentary||" PAC-MAN AI READY"}}class gp{constructor(){R(this,"ghostAI");R(this,"commentaryGenerator");R(this,"currentSessionId",null);R(this,"interactions",[]);R(this,"lastGameData",null);R(this,"moveCount",0);this.ghostAI=new mp,this.commentaryGenerator=new pp}onGameStart(e){this.currentSessionId=`pacman_${Date.now()}`,this.interactions=[],this.moveCount=0,this.lastGameData=null;for(const o of e.ghosts)this.ghostAI.initializeGhost(o);const n=this.ghostAI.getGhostPersonalityStates(),r=this.calculateMetrics(),i={trigger:H.GAME_START};return{commentary:this.commentaryGenerator.generateCommentary(i,n,r),ghostPersonalities:n,playerBehavior:"cautious",isActive:!0,metrics:r}}onGameUpdate(e){if(!this.currentSessionId)return{aiState:this.getDefaultState(),ghostMoves:new Map,chainAttempts:new Map,speechTriggers:new Map};const n=this.ghostAI.updateGhostBehavior(e),r=this.ghostAI.getChainAttempts(),i=this.ghostAI.getSpeechTriggers();this.analyzePlayerBehavior(e);const s=this.ghostAI.getGhostPersonalityStates(),o=this.detectBehaviorChanges(s);let a=this.commentaryGenerator.getCurrentCommentary(),l=null;if(o.length>0){const u=o[0];l=H.GHOST_BEHAVIOR_CHANGE;const g={trigger:l,ghostId:u.ghostId,behaviorDescription:u.currentBehavior};a=this.commentaryGenerator.generateCommentary(g,s,this.calculateMetrics())}if(this.lastGameData&&!this.lastGameData.powerPelletActive&&e.powerPelletActive){l=H.POWER_PELLET_ACTIVATED;const u={trigger:l};a=this.commentaryGenerator.generateCommentary(u,s,this.calculateMetrics())}if(this.lastGameData)for(const u of e.ghosts){const g=this.lastGameData.ghosts.find(E=>E.id===u.id);if(g&&!g.isEaten&&u.isEaten){l=H.GHOST_EATEN;const E={trigger:l,ghostId:u.id};a=this.commentaryGenerator.generateCommentary(E,s,this.calculateMetrics());break}}return this.lastGameData={...e},{aiState:{commentary:a,ghostPersonalities:s,playerBehavior:this.analyzeCurrentPlayerBehavior(e),isActive:!0,metrics:this.calculateMetrics()},ghostMoves:n,chainAttempts:r,speechTriggers:i}}onPacManDeath(e,n){if(!this.currentSessionId)return this.getDefaultState();const r=this.ghostAI.getGhostPersonalityStates(),i=this.calculateMetrics();return{commentary:this.generateDeathCommentary(n),ghostPersonalities:r,playerBehavior:this.analyzeCurrentPlayerBehavior(e),isActive:!0,metrics:i}}generateDeathCommentary(e){switch(e){case"mimic":const r=["You died to the one who doesn't even know what it's doing.","That ghost was lost. Somehow you were more lost.","Imagine losing to pure confusion."];return r[Math.floor(Math.random()*r.length)];case"loner":const i=["The scaredy cat scared the other scaredy cat. Poetic.","You ran into the one that runs away. Impressive timing.","Fear met fear. You blinked first."];return i[Math.floor(Math.random()*i.length)];case"bully":const s=["That was brutal.","The bully claims another victim.","You got steamrolled. Classic."];return s[Math.floor(Math.random()*s.length)];case"strategist":const o=["I don't even blame you for that one.","That was calculated. Painfully so.","You didn't lose. You were outplayed."];return o[Math.floor(Math.random()*o.length)];default:return"Surrounded. No dignity left to recover."}}onGameEnd(e,n){if(!this.currentSessionId)return this.getDefaultState();const r=this.ghostAI.getGhostPersonalityStates(),i=this.calculateMetrics(),s={trigger:H.GAME_END,playerBehavior:this.analyzeCurrentPlayerBehavior(e)},o=this.commentaryGenerator.generateCommentary(s,r,i);return this.currentSessionId=null,{commentary:o,ghostPersonalities:r,playerBehavior:this.analyzeCurrentPlayerBehavior(e),isActive:!1,metrics:i}}getCurrentState(){const e=this.ghostAI.getGhostPersonalityStates();return{commentary:this.commentaryGenerator.getCurrentCommentary(),ghostPersonalities:e,playerBehavior:"cautious",isActive:this.currentSessionId!==null,metrics:this.calculateMetrics()}}analyzePlayerBehavior(e){if(this.lastGameData){this.moveCount++;for(const n of e.ghosts){const r=this.getDistance(e.pacman.position,n.position);r<=3&&this.interactions.push({timestamp:Date.now(),ghostId:n.id,interactionType:this.determineInteractionType(e,n,r),pacmanPosition:{...e.pacman.position},ghostPosition:{...n.position},distance:r,powerPelletActive:e.powerPelletActive})}}}determineInteractionType(e,n,r){return n.isEaten?"eaten":e.powerPelletActive?(r<2,"chase"):r<2?"flee":"avoid"}analyzeCurrentPlayerBehavior(e){const n=this.calculateMetrics();return n.aggressiveMovesTowardGhosts>n.defensiveMovesAwayFromGhosts*2?"aggressive":n.defensiveMovesAwayFromGhosts>n.aggressiveMovesTowardGhosts*2?"defensive":n.pelletGreedLevel>.7?"greedy":"cautious"}detectBehaviorChanges(e){return e.filter(n=>n.currentBehavior!=="patrolling"&&n.currentBehavior!=="seeking"&&!n.lastDecision.includes("initialized"))}calculateMetrics(){const e=this.interactions.filter(a=>a.interactionType==="chase"||a.interactionType==="ambush"&&a.powerPelletActive).length,n=this.interactions.filter(a=>a.interactionType==="flee"||a.interactionType==="avoid").length,r=this.interactions.filter(a=>a.interactionType==="eaten").length,i={};this.interactions.forEach(a=>{a.interactionType==="flee"&&a.distance<1&&(i[a.ghostId]=(i[a.ghostId]||0)+1)});const s=this.interactions.reduce((a,l)=>a+l.distance,0),o=this.interactions.length>0?s/this.interactions.length:0;return{totalMoves:this.moveCount,aggressiveMovesTowardGhosts:e,defensiveMovesAwayFromGhosts:n,pelletGreedLevel:.5,powerPelletUsage:.5,averageDistanceFromGhosts:o,ghostsEaten:r,deathsByGhost:i}}getDistance(e,n){return Math.abs(e.x-n.x)+Math.abs(e.y-n.y)}getDefaultState(){return{commentary:" PAC-MAN AI READY",ghostPersonalities:[],playerBehavior:"cautious",isActive:!1,metrics:{totalMoves:0,aggressiveMovesTowardGhosts:0,defensiveMovesAwayFromGhosts:0,pelletGreedLevel:0,powerPelletUsage:0,averageDistanceFromGhosts:0,ghostsEaten:0,deathsByGhost:{}}}}}const Ep=({onGameEnd:t,onAIStateChange:e})=>{const n=I.useRef(null),r=I.useRef(null),[i,s]=I.useState(()=>new Ul().getGameData()),[o,a]=I.useState(null),{playSFX:l}=tn();I.useEffect(()=>{n.current=new Ul,r.current=new gp;const y=S=>{if(!n.current)return;let h=x.NONE;switch(S.key){case"ArrowUp":case"w":case"W":h=x.UP;break;case"ArrowDown":case"s":case"S":h=x.DOWN;break;case"ArrowLeft":case"a":case"A":h=x.LEFT;break;case"ArrowRight":case"d":case"D":h=x.RIGHT;break}h!==x.NONE&&(S.preventDefault(),n.current.setDirection(h))};return document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y),n.current&&n.current.destroy()}},[]),I.useEffect(()=>{const y=setInterval(()=>{if(n.current&&r.current){const S=i,h=n.current.getGameData();if(s(h),S.gameState===Y.READY&&h.gameState===Y.PLAYING){const v=r.current.onGameStart(h);a(v),e==null||e(v)}else if(h.gameState===Y.PLAYING){const{aiState:v,ghostMoves:m,chainAttempts:d,speechTriggers:c}=r.current.onGameUpdate(h);for(const[f,T]of d)n.current.tryChainGhostSegment(f,T);for(const[f,T]of m)n.current.moveGhost(f,T);for(const[f,T]of c)n.current.addSpeechBubble(f,T);a(v),e==null||e(v)}else if(S.gameState===Y.PLAYING&&h.gameState===Y.WON||S.gameState===Y.PLAYING&&h.gameState===Y.LOST){const v=h.gameState===Y.WON?"won":"lost",m=n.current.getGameDuration(),d=n.current.getScore();l(v==="won"?"youWin":"gameOver","snake");const c=r.current.onGameEnd(h,v);a(c),e==null||e(c),t==null||t(v,m,d)}if(S.lives>h.lives&&(h.gameState===Y.DEATH_PAUSE||h.gameState===Y.PLAYING)){l("gameOver","pacman");const v=h.lastKillerGhost||"unknown",m=r.current.onPacManDeath(h,v);a(m),e==null||e(m)}}},150);return()=>clearInterval(y)},[t,e,i]);const u=()=>{n.current&&n.current.start()},g=()=>{n.current&&r.current&&(n.current.reset(),s(n.current.getGameData()),a(null))},E=()=>{switch(i.gameState){case Y.READY:return"READY TO START";case Y.PLAYING:return"PLAYING";case Y.DEATH_PAUSE:return"OUCH!";case Y.PAUSED:return"PAUSED";case Y.WON:return"LEVEL COMPLETE!";case Y.LOST:return"GAME OVER";default:return"UNKNOWN"}};return p.jsxs("div",{style:{minHeight:"100vh",background:"#c0c0c0",display:"flex",flexDirection:"column",alignItems:"center",gap:"20px",padding:"20px",fontFamily:"Courier New, monospace",color:"#000000"},children:[p.jsxs("div",{style:{display:"flex",gap:"30px",fontSize:"14px",color:"#000000",background:"#808080",padding:"8px 16px",border:"2px outset #c0c0c0"},children:[p.jsxs("div",{children:["SCORE: ",i.score]}),p.jsxs("div",{children:["LIVES: ",i.lives]}),p.jsxs("div",{children:["PELLETS: ",i.pelletsRemaining]}),p.jsxs("div",{children:["STATUS: ",E()]}),i.powerPelletActive&&p.jsxs("div",{style:{color:"#ffff00"},children:["POWER: ",Math.ceil(i.powerPelletTimer/1e3),"s"]})]}),p.jsx(fp,{gameData:i,cellSize:30}),p.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[i.gameState===Y.READY&&p.jsx("button",{onClick:u,style:{background:"#c0c0c0",color:"#000000",border:"2px outset #c0c0c0",borderRadius:"0",padding:"10px 20px",fontFamily:"Courier New, monospace",fontSize:"12px",cursor:"pointer",letterSpacing:"1px",transition:"all 0.1s ease"},onMouseEnter:y=>{y.currentTarget.style.background="#d0d0d0"},onMouseLeave:y=>{y.currentTarget.style.background="#c0c0c0"},onMouseDown:y=>{y.currentTarget.style.border="2px inset #c0c0c0"},onMouseUp:y=>{y.currentTarget.style.border="2px outset #c0c0c0"},children:"START GAME"}),p.jsx("button",{onClick:g,style:{background:"#c0c0c0",color:"#000000",border:"2px outset #c0c0c0",borderRadius:"0",padding:"10px 20px",fontFamily:"Courier New, monospace",fontSize:"12px",cursor:"pointer",letterSpacing:"1px",transition:"all 0.1s ease"},onMouseEnter:y=>{y.currentTarget.style.background="#d0d0d0"},onMouseLeave:y=>{y.currentTarget.style.background="#c0c0c0"},onMouseDown:y=>{y.currentTarget.style.border="2px inset #c0c0c0"},onMouseUp:y=>{y.currentTarget.style.border="2px outset #c0c0c0"},children:"NEW GAME"})]}),p.jsxs("div",{style:{textAlign:"center",fontSize:"12px",color:"#000000",lineHeight:"1.4",background:"#808080",padding:"8px 16px",border:"2px inset #c0c0c0"},children:[p.jsx("div",{children:"Use ARROW KEYS or WASD to move Pac-Man"}),p.jsx("div",{children:"Eat all pellets while avoiding ghosts"}),p.jsx("div",{children:"Power pellets make ghosts vulnerable!"})]}),p.jsx(Qi,{commentary:o==null?void 0:o.commentary}),o&&o.ghostPersonalities.length>0&&p.jsxs("div",{style:{fontSize:"10px",color:"#000000",fontStyle:"italic",textAlign:"center",maxWidth:"500px",background:"#808080",padding:"8px 16px",border:"2px inset #c0c0c0"},children:[p.jsxs("div",{children:["Player Behavior: ",o.playerBehavior.toUpperCase()]}),p.jsx("div",{style:{marginTop:"5px"},children:o.ghostPersonalities.map(y=>p.jsxs("div",{children:[y.ghostId.toUpperCase(),": ",y.currentBehavior]},y.ghostId))})]})]})};class vp{constructor(e=800,n=600){R(this,"gameData");R(this,"PADDLE_SPEED",8);R(this,"BALL_SPEED",4);R(this,"BLOCK_ROWS",6);R(this,"BLOCK_COLS",10);R(this,"BLOCK_WIDTH",70);R(this,"BLOCK_HEIGHT",20);R(this,"BLOCK_PADDING",5);R(this,"BASE_PADDLE_WIDTH",100);R(this,"corruptionEffects",{ballSpeedMultiplier:1,paddleWidthMultiplier:1,paddleDrift:0,bounceAngleBias:0});this.gameData={ball:{x:e/2,y:n-100,radius:8,velocity:{x:this.BALL_SPEED,y:-this.BALL_SPEED}},paddle:{x:e/2-50,y:n-30,width:this.BASE_PADDLE_WIDTH,height:15},blocks:[],score:0,lives:3,gameState:"waiting",gameWidth:e,gameHeight:n},this.initializeBlocks()}initializeBlocks(){this.gameData.blocks=[];const e=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD"];for(let n=0;n<this.BLOCK_ROWS;n++)for(let r=0;r<this.BLOCK_COLS;r++){const i=r*(this.BLOCK_WIDTH+this.BLOCK_PADDING)+this.BLOCK_PADDING+50,s=n*(this.BLOCK_HEIGHT+this.BLOCK_PADDING)+this.BLOCK_PADDING+50;this.gameData.blocks.push({x:i,y:s,width:this.BLOCK_WIDTH,height:this.BLOCK_HEIGHT,destroyed:!1,color:e[n%e.length]})}}startGame(){(this.gameData.gameState==="waiting"||this.gameData.gameState==="game_over")&&(this.gameData.gameState="playing",this.resetBall())}pauseGame(){this.gameData.gameState==="playing"&&(this.gameData.gameState="paused")}resumeGame(){this.gameData.gameState==="paused"&&(this.gameData.gameState="playing")}resetGame(){this.gameData.score=0,this.gameData.lives=3,this.gameData.gameState="waiting",this.initializeBlocks(),this.resetBall(),this.corruptionEffects={ballSpeedMultiplier:1,paddleWidthMultiplier:1,paddleDrift:0,bounceAngleBias:0}}resetBall(){this.gameData.ball.x=this.gameData.gameWidth/2,this.gameData.ball.y=this.gameData.gameHeight-100;const e=(Math.random()-.5)*Math.PI/2;this.gameData.ball.velocity.x=Math.sin(e)*this.BALL_SPEED,this.gameData.ball.velocity.y=-Math.cos(e)*this.BALL_SPEED}movePaddle(e){this.gameData.gameState==="playing"&&(e==="left"?this.gameData.paddle.x=Math.max(0,this.gameData.paddle.x-this.PADDLE_SPEED):this.gameData.paddle.x=Math.min(this.gameData.gameWidth-this.gameData.paddle.width,this.gameData.paddle.x+this.PADDLE_SPEED))}setPaddlePosition(e){this.gameData.gameState==="playing"&&(this.gameData.paddle.x=Math.max(0,Math.min(this.gameData.gameWidth-this.gameData.paddle.width,e-this.gameData.paddle.width/2)))}applyCorruptionEffects(e){this.corruptionEffects={...e};const n=this.BASE_PADDLE_WIDTH*e.paddleWidthMultiplier,r=this.gameData.paddle.width-n;this.gameData.paddle.width=n,r>0&&(this.gameData.paddle.x+=r/2,this.gameData.paddle.x=Math.max(0,Math.min(this.gameData.gameWidth-this.gameData.paddle.width,this.gameData.paddle.x)))}update(){if(this.gameData.gameState!=="playing")return{};const e={},n=this.gameData.ball.velocity.x*this.corruptionEffects.ballSpeedMultiplier,r=this.gameData.ball.velocity.y*this.corruptionEffects.ballSpeedMultiplier;if(this.gameData.ball.x+=n,this.gameData.ball.y+=r,this.corruptionEffects.paddleDrift!==0){const o=(Math.random()-.5)*this.corruptionEffects.paddleDrift*2;this.gameData.paddle.x+=o,this.gameData.paddle.x=Math.max(0,Math.min(this.gameData.gameWidth-this.gameData.paddle.width,this.gameData.paddle.x))}(this.gameData.ball.x<=this.gameData.ball.radius||this.gameData.ball.x>=this.gameData.gameWidth-this.gameData.ball.radius)&&(this.gameData.ball.velocity.x=-this.gameData.ball.velocity.x),this.gameData.ball.y<=this.gameData.ball.radius&&(this.gameData.ball.velocity.y=-this.gameData.ball.velocity.y),this.checkPaddleCollision()&&(this.handlePaddleCollision(),e.paddleHit=!0,e.paddlePosition=this.gameData.paddle.x+this.gameData.paddle.width/2);const i=this.checkBlockCollisions();i&&(this.handleBlockCollision(i),e.blockHit=!0,this.gameData.score+=10),this.gameData.ball.y>this.gameData.gameHeight&&(e.ballMissed=!0,e.ballPosition={x:this.gameData.ball.x,y:this.gameData.ball.y},this.handleBallMissed());const s=this.gameData.blocks.filter(o=>!o.destroyed).length;return e.blocksRemaining=s,e}checkPaddleCollision(){const e=this.gameData.ball,n=this.gameData.paddle;return e.x+e.radius>=n.x&&e.x-e.radius<=n.x+n.width&&e.y+e.radius>=n.y&&e.y-e.radius<=n.y+n.height&&e.velocity.y>0}handlePaddleCollision(){const e=this.gameData.ball,n=this.gameData.paddle;let i=((e.x-n.x)/n.width-.5)*Math.PI/3;i+=this.corruptionEffects.bounceAngleBias*(Math.random()-.5)*Math.PI/4;const s=Math.sqrt(e.velocity.x**2+e.velocity.y**2);e.velocity.x=Math.sin(i)*s,e.velocity.y=-Math.abs(Math.cos(i)*s),e.y=n.y-e.radius}checkBlockCollisions(){const e=this.gameData.ball;for(const n of this.gameData.blocks)if(!n.destroyed&&e.x+e.radius>=n.x&&e.x-e.radius<=n.x+n.width&&e.y+e.radius>=n.y&&e.y-e.radius<=n.y+n.height)return n;return null}handleBlockCollision(e){e.destroyed=!0,this.gameData.ball.velocity.y=-this.gameData.ball.velocity.y}handleBallMissed(){this.gameData.lives--,this.gameData.lives<=0?this.gameData.gameState="game_over":this.resetBall()}getGameData(){return{...this.gameData}}getScore(){return this.gameData.score}getLives(){return this.gameData.lives}getGameState(){return this.gameData.gameState}getRemainingBlocks(){return this.gameData.blocks.filter(e=>!e.destroyed).length}checkFakeBlockCollision(e){const n=this.gameData.ball;for(const r of e)if(n.x+n.radius>=r.x&&n.x-n.radius<=r.x+r.width&&n.y+n.radius>=r.y&&n.y-n.radius<=r.y+r.height)return{x:r.x,y:r.y};return null}checkRegeneratingBlockCollision(e){const n=this.gameData.ball;for(const r of e)if(r.opacity>=.3&&n.x+n.radius>=r.x&&n.x-n.radius<=r.x+r.width&&n.y+n.radius>=r.y&&n.y-n.radius<=r.y+r.height)return this.gameData.ball.velocity.y=-this.gameData.ball.velocity.y,{x:r.x,y:r.y};return null}checkStubbornBlockCollision(e){const n=this.gameData.ball;for(const r of e)if(n.x+n.radius>=r.x&&n.x-n.radius<=r.x+r.width&&n.y+n.radius>=r.y&&n.y-n.radius<=r.y+r.height)return this.gameData.ball.velocity.y=-this.gameData.ball.velocity.y,{x:r.x,y:r.y};return null}addRegeneratedBlocks(e){e.forEach(n=>{this.gameData.blocks.push({x:n.x,y:n.y,width:n.width,height:n.height,destroyed:!1,color:"#FF6B6B"})})}checkWinCondition(e){const r=this.gameData.blocks.filter(i=>!i.destroyed).length===0&&e===0;return r&&this.gameData.gameState==="playing"&&(this.gameData.gameState="won"),r}setGameWon(){this.gameData.gameState==="playing"&&(this.gameData.gameState="won")}}const yp=({gameData:t,aiState:e,width:n,height:r})=>{const i=I.useRef(null);I.useEffect(()=>{const h=i.current;if(!h)return;const v=h.getContext("2d");v&&(v.fillStyle="#0a0a0a",v.fillRect(0,0,n,r),s(v,t.blocks),e&&(g(v,e.corruptionState.fakeBlocks),E(v,e.corruptionState.regeneratingBlocks),y(v,e.corruptionState.stubbornBlocks)),o(v,t.paddle,e),a(v,t.ball,e),l(v,t,n,e),u(v,t,n,r))},[t,e,n,r]);const s=(h,v)=>{v.forEach(m=>{m.destroyed||(h.fillStyle="#000000",h.fillRect(m.x+2,m.y+2,m.width,m.height),h.fillStyle=m.color,h.fillRect(m.x,m.y,m.width,m.height),h.fillStyle="rgba(255, 255, 255, 0.3)",h.fillRect(m.x,m.y,m.width,3),h.fillRect(m.x,m.y,3,m.height),h.strokeStyle="#333",h.lineWidth=1,h.strokeRect(m.x,m.y,m.width,m.height))})},o=(h,v,m)=>{h.fillStyle="#000000",h.fillRect(v.x+2,v.y+2,v.width,v.height);const d=m&&m.corruptionState.level>=2;h.fillStyle=d?"#FF6B6B":"#4ECDC4",h.fillRect(v.x,v.y,v.width,v.height),h.fillStyle="rgba(255, 255, 255, 0.4)",h.fillRect(v.x,v.y,v.width,3),h.strokeStyle=d?"#C0392B":"#2C3E50",h.lineWidth=d?3:2,h.strokeRect(v.x,v.y,v.width,v.height),d&&m&&m.corruptionState.paddleWidthMultiplier<1&&(h.strokeStyle="#F39C12",h.lineWidth=1,h.setLineDash([5,5]),h.strokeRect(v.x-5,v.y-5,v.width+10,v.height+10),h.setLineDash([]))},a=(h,v,m)=>{h.fillStyle="rgba(0, 0, 0, 0.3)",h.beginPath(),h.arc(v.x+2,v.y+2,v.radius,0,Math.PI*2),h.fill();const c=((m==null?void 0:m.corruptionState.ballSpeedMultiplier)||1)>1.2;h.fillStyle=c?"#F39C12":"#FF6B6B",h.beginPath(),h.arc(v.x,v.y,v.radius,0,Math.PI*2),h.fill(),h.fillStyle="rgba(255, 255, 255, 0.6)",h.beginPath(),h.arc(v.x-2,v.y-2,v.radius/3,0,Math.PI*2),h.fill(),h.strokeStyle=c?"#E67E22":"#C0392B",h.lineWidth=c?2:1,h.beginPath(),h.arc(v.x,v.y,v.radius,0,Math.PI*2),h.stroke(),m!=null&&m.corruptionState.speedSpikeActive&&(h.strokeStyle="#E74C3C",h.lineWidth=3,h.setLineDash([3,3]),h.beginPath(),h.arc(v.x,v.y,v.radius+5,0,Math.PI*2),h.stroke(),h.setLineDash([]))},l=(h,v,m,d)=>{h.font="16px Courier New, monospace",h.fillStyle="#4ECDC4",h.fillText(`SCORE: ${v.score}`,20,30),h.fillText(`LIVES: ${v.lives}`,m-120,30);const c=v.blocks.filter(f=>!f.destroyed).length;h.fillText(`BLOCKS: ${c}`,m/2-50,30),d&&d.corruptionState.level>0&&(h.font="12px Courier New, monospace",h.fillStyle="#E74C3C",h.fillText(`CORRUPTION: ${d.corruptionState.level}`,20,580))},u=(h,v,m,d)=>{v.gameState==="waiting"?(S(h,"PRESS SPACE TO START",m,d,"#4ECDC4","20px"),S(h,"USE ARROW KEYS OR MOUSE TO MOVE PADDLE",m,d+30,"#95A5A6","14px")):v.gameState==="paused"?(S(h,"PAUSED",m,d,"#F39C12","24px"),S(h,"PRESS SPACE TO RESUME",m,d+30,"#95A5A6","16px")):v.gameState==="game_over"?(S(h,"GAME OVER",m,d,"#E74C3C","28px"),S(h,`FINAL SCORE: ${v.score}`,m,d+40,"#95A5A6","18px"),S(h,"PRESS R TO RESTART",m,d+70,"#4ECDC4","16px")):v.gameState==="won"&&(S(h,"VICTORY!",m,d,"#27AE60","32px"),S(h,`FINAL SCORE: ${v.score}`,m,d+50,"#95A5A6","20px"),S(h,"PRESS R TO PLAY AGAIN",m,d+80,"#4ECDC4","16px"))},g=(h,v)=>{v.forEach(m=>{const d=m.flickering?.3+Math.sin(Date.now()*.01)*.3:.6;h.fillStyle=`rgba(0, 0, 0, ${d*.5})`,h.fillRect(m.x+2,m.y+2,m.width,m.height),h.fillStyle=`rgba(138, 43, 226, ${d})`,h.fillRect(m.x,m.y,m.width,m.height),h.fillStyle=`rgba(255, 255, 255, ${d*.2})`,h.fillRect(m.x,m.y,m.width,3),h.fillRect(m.x,m.y,3,m.height),h.strokeStyle=`rgba(75, 0, 130, ${d})`,h.lineWidth=1,h.setLineDash([3,3]),h.strokeRect(m.x,m.y,m.width,m.height),h.setLineDash([])})},E=(h,v)=>{v.forEach(m=>{const d=m.opacity>=.3,c=Math.max(m.opacity,d?.3:0);if(h.fillStyle=`rgba(0, 0, 0, ${c*.5})`,h.fillRect(m.x+2,m.y+2,m.width,m.height),h.fillStyle=`rgba(255, 107, 107, ${c})`,h.fillRect(m.x,m.y,m.width,m.height),h.fillStyle=`rgba(255, 255, 255, ${c*.3})`,h.fillRect(m.x,m.y,m.width,3),h.fillRect(m.x,m.y,3,m.height),h.strokeStyle=`rgba(192, 57, 43, ${c})`,h.lineWidth=d?2:1,h.strokeRect(m.x,m.y,m.width,m.height),d&&m.opacity<1){const f=.3+.2*Math.sin(Date.now()*.01);h.strokeStyle=`rgba(255, 255, 0, ${f})`,h.lineWidth=1,h.setLineDash([2,2]),h.strokeRect(m.x-1,m.y-1,m.width+2,m.height+2),h.setLineDash([])}})},y=(h,v)=>{v.forEach(m=>{h.fillStyle="rgba(0, 0, 0, 0.7)",h.fillRect(m.x+2,m.y+2,m.width,m.height),h.fillStyle="#2C3E50",h.fillRect(m.x,m.y,m.width,m.height),h.fillStyle="rgba(255, 255, 255, 0.1)",h.fillRect(m.x,m.y,m.width,2),h.fillRect(m.x,m.y,2,m.height),h.strokeStyle="#1A252F",h.lineWidth=2,h.strokeRect(m.x,m.y,m.width,m.height),h.strokeStyle="#E74C3C",h.lineWidth=2,h.beginPath(),h.moveTo(m.x+5,m.y+5),h.lineTo(m.x+m.width-5,m.y+m.height-5),h.moveTo(m.x+m.width-5,m.y+5),h.lineTo(m.x+5,m.y+m.height-5),h.stroke()})},S=(h,v,m,d,c,f)=>{h.font=`${f} Courier New, monospace`,h.fillStyle=c,h.textAlign="center",h.fillText(v,m/2,d/2),h.textAlign="left"};return p.jsx("canvas",{ref:i,width:n,height:r,style:{border:"3px solid #34495e",borderRadius:"8px",background:"#0a0a0a",imageRendering:"pixelated"}})},qe={LEFT_EDGE:"left_edge",RIGHT_EDGE:"right_edge",CENTER:"center",LEFT_SIDE:"left_side",RIGHT_SIDE:"right_side"};function Sp(t,e){const n=t/e;return n<.1?qe.LEFT_EDGE:n>.9?qe.RIGHT_EDGE:n>=.4&&n<=.6?qe.CENTER:n<.4?qe.LEFT_SIDE:qe.RIGHT_SIDE}class Tp{constructor(){R(this,"behaviorData");R(this,"currentMetrics");R(this,"lastPaddleHitTime",0);R(this,"gameWidth",800);this.behaviorData={missedBallLocations:[],paddleReactionTimes:[],failureZones:new Map,rallyLengths:[],totalMisses:0,averageReactionTime:0,mostFailedZone:null,averageRallyLength:0,gamesPlayed:0,bestScore:0,consecutiveMisses:0,improvementTrend:"stable"},this.currentMetrics={currentRallyLength:0,lastMissLocation:null,lastReactionTime:0,repeatedFailureZone:null,failureZoneCount:0,isImproving:!1,shouldCommentOnMiss:!1,shouldCommentOnImprovement:!1,shouldEscalateSarcasm:!1}}setGameDimensions(e){this.gameWidth=e}trackEvent(e){switch(e.type){case"game_start":this.handleGameStart(e);break;case"ball_missed":this.handleBallMissed(e);break;case"paddle_hit":this.handlePaddleHit(e);break;case"block_hit":this.handleBlockHit(e);break;case"game_end":this.handleGameEnd(e);break}this.updateMetrics()}handleGameStart(e){this.currentMetrics.currentRallyLength=0,this.behaviorData.gamesPlayed++}handleBallMissed(e){var s;if(!((s=e.data)!=null&&s.ballPosition))return;const n=e.data.ballPosition,r=Sp(n.x,this.gameWidth);this.behaviorData.missedBallLocations.push({x:n.x,y:n.y,timestamp:e.timestamp}),this.behaviorData.totalMisses++,this.behaviorData.consecutiveMisses++;const i=this.behaviorData.failureZones.get(r)||0;this.behaviorData.failureZones.set(r,i+1),this.currentMetrics.currentRallyLength>0&&this.behaviorData.rallyLengths.push(this.currentMetrics.currentRallyLength),this.currentMetrics.lastMissLocation=n,this.currentMetrics.currentRallyLength=0,this.analyzeFailurePatterns(r)}handlePaddleHit(e){const n=e.timestamp;if(this.lastPaddleHitTime>0){const r=n-this.lastPaddleHitTime;this.behaviorData.paddleReactionTimes.push(r),this.currentMetrics.lastReactionTime=r}this.lastPaddleHitTime=n,this.currentMetrics.currentRallyLength++,this.behaviorData.consecutiveMisses=0}handleBlockHit(e){this.currentMetrics.currentRallyLength++}handleGameEnd(e){var r;const n=((r=e.data)==null?void 0:r.score)||0;n>this.behaviorData.bestScore&&(this.behaviorData.bestScore=n,this.currentMetrics.isImproving=!0,this.currentMetrics.shouldCommentOnImprovement=!0),this.currentMetrics.currentRallyLength>0&&this.behaviorData.rallyLengths.push(this.currentMetrics.currentRallyLength),this.analyzeImprovementTrend()}analyzeFailurePatterns(e){const n=this.behaviorData.failureZones.get(e)||0;n>=3&&(this.currentMetrics.repeatedFailureZone=e,this.currentMetrics.failureZoneCount=n,this.currentMetrics.shouldCommentOnMiss=!0,n>=5&&(this.currentMetrics.shouldEscalateSarcasm=!0))}analyzeImprovementTrend(){const e=Math.min(5,this.behaviorData.gamesPlayed);if(e<3){this.behaviorData.improvementTrend="stable";return}const n=this.behaviorData.rallyLengths.slice(-e),r=this.behaviorData.rallyLengths.slice(-e*2,-e);if(n.length===0||r.length===0){this.behaviorData.improvementTrend="stable";return}const i=n.reduce((o,a)=>o+a,0)/n.length,s=r.reduce((o,a)=>o+a,0)/r.length;i>s*1.2?this.behaviorData.improvementTrend="improving":i<s*.8?this.behaviorData.improvementTrend="declining":this.behaviorData.improvementTrend="stable"}updateMetrics(){this.behaviorData.paddleReactionTimes.length>0&&(this.behaviorData.averageReactionTime=this.behaviorData.paddleReactionTimes.reduce((r,i)=>r+i,0)/this.behaviorData.paddleReactionTimes.length),this.behaviorData.rallyLengths.length>0&&(this.behaviorData.averageRallyLength=this.behaviorData.rallyLengths.reduce((r,i)=>r+i,0)/this.behaviorData.rallyLengths.length);let e=0,n=null;for(const[r,i]of this.behaviorData.failureZones.entries())i>e&&(e=i,n=r);this.behaviorData.mostFailedZone=n}getBehaviorData(){return{...this.behaviorData}}getCurrentMetrics(){return{...this.currentMetrics}}clearCommentaryFlags(){this.currentMetrics.shouldCommentOnMiss=!1,this.currentMetrics.shouldCommentOnImprovement=!1,this.currentMetrics.shouldEscalateSarcasm=!1}}class Cp{generateGameStartCommentary(e){return e.gamesPlayed===0?" BLOCK BREAKER LOADED... TRY NOT TO MISS THE PADDLE THIS TIME":e.mostFailedZone?` BACK FOR MORE? WATCH THAT ${this.getZoneDescription(e.mostFailedZone).toUpperCase()}... YOU'VE MISSED THERE ${e.failureZones.get(e.mostFailedZone)} TIMES`:e.consecutiveMisses>3?" MAYBE THIS TIME YOU'LL HIT THE BALL... OPTIMISM IS KEY":" BLOCK BREAKER READY... SHOW ME WHAT YOU'VE LEARNED"}generateMissCommentary(e,n){const r=[" YOU MISSED. I NOTICED."," BALL LOST... PREDICTABLE."," MISSED AGAIN... CONSISTENCY."," PADDLE POSITIONING NEEDS WORK."];if(!n.shouldCommentOnMiss||!n.lastMissLocation)return r[Math.floor(Math.random()*r.length)];const i=n.repeatedFailureZone;if(!i)return this.getGenericMissCommentary(e);const s=this.getZoneDescription(i),o=n.failureZoneCount;return n.shouldEscalateSarcasm?this.getEscalatedSarcasmCommentary(s,o):this.getRepeatedFailureCommentary(s,o)}generateImprovementCommentary(e,n){if(!n.shouldCommentOnImprovement)return this.getProgressCommentary(e);const r=[" FINE... THAT WAS SLIGHTLY LESS TERRIBLE"," I SUPPOSE THAT COUNTS AS IMPROVEMENT"," WELL WELL... SOMEONE'S BEEN PRACTICING"," NOT BAD... FOR A HUMAN"," FINALLY SHOWING SOME COORDINATION"];return r[Math.floor(Math.random()*r.length)]}generateRallyCommentary(e,n){const r=[" YOU KEEP AIMING STRAIGHT. PREDICTABLE."," SAME ANGLE AGAIN... BORING."," RALLY DETECTED. TIME FOR CHANGES."," COMFORTABLE? NOT FOR LONG."];if(e<3)return" SHORT RALLY... PADDLE CONTROL NEEDS WORK";if(e>=10){const i=n.averageRallyLength;return e>i*1.5?r[Math.floor(Math.random()*r.length)]:` ${e} HIT RALLY... KEEP IT UP`}return e>=5?" DECENT RALLY... DON'T GET COCKY":" RALLY BUILDING... TRY TO MAINTAIN FOCUS"}generateGameEndCommentary(e,n,r){return e==="won"?n>r.bestScore?" VICTORY AND A NEW HIGH SCORE... MIRACLES DO HAPPEN":" YOU WON... EVEN A BROKEN CLOCK IS RIGHT TWICE A DAY":r.consecutiveMisses>=3?" GAME OVER... MAYBE TRY MOVING THE PADDLE NEXT TIME":r.mostFailedZone?` LOST AGAIN... THAT ${this.getZoneDescription(r.mostFailedZone).toUpperCase()} IS STILL YOUR WEAKNESS`:" GAME OVER... PRACTICE MAKES... WELL, LESS TERRIBLE"}getZoneDescription(e){switch(e){case qe.LEFT_EDGE:return"left edge";case qe.RIGHT_EDGE:return"right edge";case qe.CENTER:return"center";case qe.LEFT_SIDE:return"left side";case qe.RIGHT_SIDE:return"right side";default:return"area"}}getGenericMissCommentary(e){const n=[" MISSED... PADDLE POSITIONING NEEDS WORK"," BALL LOST... REACTION TIME COULD BE FASTER"," MISS... FOCUS ON THE BALL TRAJECTORY"," DROPPED IT... ANTICIPATION IS KEY"," BALL GONE... MAYBE WATCH WHERE IT'S GOING"];return e.consecutiveMisses>=2?" ANOTHER MISS... CONSISTENCY IS CLEARLY NOT YOUR STRENGTH":n[Math.floor(Math.random()*n.length)]}getRepeatedFailureCommentary(e,n){const r=[` MISSED ${e.toUpperCase()} AGAIN... THAT'S ${n} TIMES NOW`,` ${e.toUpperCase()} FAILURE #${n}... SEEING A PATTERN HERE`,` ANOTHER ${e.toUpperCase()} MISS... ${n} AND COUNTING`,` ${e.toUpperCase()} STRIKES AGAIN... ${n} TIMES IS A HABIT`];return r[Math.floor(Math.random()*r.length)]}getEscalatedSarcasmCommentary(e,n){const r=[` SERIOUSLY? ${e.toUpperCase()} AGAIN? THAT'S ${n} TIMES!`,` ${n} ${e.toUpperCase()} MISSES... MAYBE AVOID THAT AREA?`,` ${e.toUpperCase()} IS YOUR NEMESIS... ${n} FAILURES PROVE IT`,` ${n} TIMES IN THE ${e.toUpperCase()}... IMPRESSIVE CONSISTENCY`,` DEFINITION OF INSANITY: ${n} ${e.toUpperCase()} MISSES`];return r[Math.floor(Math.random()*r.length)]}getProgressCommentary(e){return e.improvementTrend==="improving"?" SLIGHT IMPROVEMENT DETECTED... DON'T LET IT GO TO YOUR HEAD":e.improvementTrend==="declining"?" PERFORMANCE DECLINING... BACK TO BASICS PERHAPS?":e.averageRallyLength>5?" RALLY AVERAGE ACCEPTABLE... BARELY":" STEADY PERFORMANCE... MEDIOCRITY ACHIEVED"}generatePaddleShrinkCommentary(){const e=[" OH WOW! THE PADDLE JUST SHRUNK."," PADDLE FEELS SMALLER? GOOD."," LESS PADDLE, MORE CHALLENGE."," SHRINKAGE DETECTED. ADAPT."];return e[Math.floor(Math.random()*e.length)]}generatePaddleDriftCommentary(){const e=[" GASP!! IS THE PADDLE MOVING ON ITS OWN?"," PADDLE DRIFT ENGAGED. FIGHT IT."," CONTROLS FEEL LOOSE? FEATURE, NOT BUG."," PADDLE INDEPENDENCE ACTIVATED."];return e[Math.floor(Math.random()*e.length)]}generateBlockRegenerationCommentary(){const e=[" THAT BRICK DIDN'T BREAK. NEITHER DID YOU."," THAT DIDN'T BREAK. TRY AGAIN."," BLOCK REGENERATION... SURPRISE!"," SOME BLOCKS ARE STUBBORN."];return e[Math.floor(Math.random()*e.length)]}generateSpeedSpikeCommentary(){const e=[" SPEED BOOST! KEEP UP."," FASTER NOW. ADAPT OR FAIL."," VELOCITY INCREASED. ENJOY."," TOO SLOW. ACCELERATING."];return e[Math.floor(Math.random()*e.length)]}}class Ap{constructor(){R(this,"state");R(this,"triggers");R(this,"lastPaddlePosition",0);R(this,"paddleMovementHistory",[]);R(this,"bounceAngleHistory",[]);R(this,"lastBlockDestroyTime",0);this.state={level:0,ballSpeedMultiplier:1,paddleWidthMultiplier:1,paddleDrift:0,fakeBlocks:[],regeneratingBlocks:[],stubbornBlocks:[],bounceAngleBias:0,speedSpikeActive:!1,speedSpikeTimer:0},this.triggers={missedBalls:0,paddleCamping:0,repeatedAngles:0,timePerBlock:0,blocksDestroyed:0}}reset(){this.state={level:0,ballSpeedMultiplier:1,paddleWidthMultiplier:1,paddleDrift:0,fakeBlocks:[],regeneratingBlocks:[],stubbornBlocks:[],bounceAngleBias:0,speedSpikeActive:!1,speedSpikeTimer:0},this.triggers={missedBalls:0,paddleCamping:0,repeatedAngles:0,timePerBlock:0,blocksDestroyed:0},this.paddleMovementHistory=[],this.bounceAngleHistory=[]}trackPaddleMovement(e){const n=Math.abs(e-this.lastPaddlePosition);this.paddleMovementHistory.push(n),this.paddleMovementHistory.length>60&&this.paddleMovementHistory.shift();const r=this.paddleMovementHistory.reduce((i,s)=>i+s,0)/this.paddleMovementHistory.length;this.triggers.paddleCamping=Math.max(0,10-r),this.lastPaddlePosition=e}onBallMissed(){this.triggers.missedBalls++}onPaddleHit(e){if(this.bounceAngleHistory.push(e),this.bounceAngleHistory.length>10&&this.bounceAngleHistory.shift(),this.bounceAngleHistory.length>=5){const n=this.bounceAngleHistory.slice(-5),r=this.calculateVariance(n);this.triggers.repeatedAngles=Math.max(0,10-r*10)}}onBlockDestroyed(){const e=Date.now();if(this.triggers.blocksDestroyed++,this.lastBlockDestroyTime>0){const n=e-this.lastBlockDestroyTime;this.triggers.timePerBlock=n}this.lastBlockDestroyTime=e,this.triggers.blocksDestroyed===5?this.evaluateCorruption():this.triggers.blocksDestroyed>5&&this.evaluateCorruption()}evaluateCorruption(){const e=this.state.level;return this.state.level===0&&this.triggers.blocksDestroyed>=5?(this.state.level=1,this.applyLevel1Corruption()):this.state.level===1&&(this.triggers.missedBalls>=1&&this.triggers.paddleCamping>=5||this.triggers.timePerBlock>8e3||this.triggers.blocksDestroyed>=15)?(this.state.level=2,this.applyLevel2Corruption()):this.state.level===2&&(this.triggers.missedBalls>=4||this.triggers.paddleCamping>=8&&this.triggers.repeatedAngles>=7||this.triggers.blocksDestroyed>=25)&&(this.state.level=3,this.applyLevel3Corruption()),e!==this.state.level}applyLevel1Corruption(){this.state.ballSpeedMultiplier=1.4}applyLevel2Corruption(){this.state.ballSpeedMultiplier=1.6,this.massRegenerateBlocks(),this.state.paddleWidthMultiplier=.85,this.state.bounceAngleBias=.3,this.state.paddleDrift=.5}applyLevel3Corruption(){this.generateFakeBlocks(),this.generateStubbornBlocks(),this.state.ballSpeedMultiplier=1.8,this.state.paddleDrift=1.2,this.state.bounceAngleBias=.5}generateFakeBlocks(){const e=2+Math.floor(Math.random()*2),n=70,r=20,i=5,s=10,o=6;for(let a=0;a<e;a++){const l=Math.floor(Math.random()*s),u=Math.floor(Math.random()*o),g=l*(n+i)+i+50,E=u*(r+i)+i+50;this.state.fakeBlocks.push({x:g,y:E,width:n,height:r,flickering:!0})}}update(){if(this.state.speedSpikeActive&&(this.state.speedSpikeTimer--,this.state.speedSpikeTimer<=0&&(this.state.speedSpikeActive=!1,this.state.ballSpeedMultiplier=this.state.level>=3?1.3:this.state.level>=1?1.1:1)),!this.state.speedSpikeActive)if(this.state.level>=2){const e=this.state.level>=3?1.8:1.6,n=.3*Math.sin(Date.now()*.005);this.state.ballSpeedMultiplier=e+n}else this.state.level===1&&(this.state.ballSpeedMultiplier=1.4);if(this.state.level>=2){const e=this.state.level>=3?.7:.85,n=.1*Math.sin(Date.now()*.003+Math.PI);this.state.paddleWidthMultiplier=Math.max(.5,e+n)}this.state.regeneratingBlocks.forEach(e=>{e.opacity=Math.min(1,e.opacity+.05)}),this.state.regeneratingBlocks=this.state.regeneratingBlocks.filter(e=>e.opacity<1)}triggerSpeedSpike(){this.state.level>=3&&(this.state.speedSpikeActive=!0,this.state.speedSpikeTimer=120,this.state.ballSpeedMultiplier=1.8)}removeFakeBlock(e,n){const r=this.state.fakeBlocks.findIndex(i=>Math.abs(i.x-e)<35&&Math.abs(i.y-n)<10);return r!==-1?(this.state.fakeBlocks.splice(r,1),!0):!1}addRegeneratingBlock(e,n,r,i){this.state.regeneratingBlocks.push({x:e,y:n,width:r,height:i,opacity:0})}calculateVariance(e){const n=e.reduce((i,s)=>i+s,0)/e.length,r=e.map(i=>Math.pow(i-n,2));return Math.sqrt(r.reduce((i,s)=>i+s,0)/e.length)}getCorruptionState(){return{...this.state}}getCorruptionLevel(){return this.state.level}getTriggers(){return{...this.triggers}}checkLevelChange(){return this.evaluateCorruption()}getFullyRegeneratedBlocks(){return this.state.regeneratingBlocks.filter(e=>e.opacity>=1)}removeRegeneratingBlock(e,n){const r=this.state.regeneratingBlocks.findIndex(i=>Math.abs(i.x-e)<35&&Math.abs(i.y-n)<10);return r!==-1?(this.state.regeneratingBlocks.splice(r,1),!0):!1}getTotalBlockCount(){return this.state.regeneratingBlocks.length}generateStubbornBlocks(){const e=3+Math.floor(Math.random()*3),n=70,r=20,i=5,s=10,o=6;for(let a=0;a<e;a++){const l=Math.floor(Math.random()*s),u=Math.floor(Math.random()*o),g=l*(n+i)+i+50,E=u*(r+i)+i+50;this.state.stubbornBlocks.push({x:g,y:E,width:n,height:r})}}massRegenerateBlocks(){const e=10+Math.floor(Math.random()*6),n=70,r=20,i=5,s=10,o=6;for(let a=0;a<e;a++){const l=Math.floor(Math.random()*s),u=Math.floor(Math.random()*o),g=l*(n+i)+i+50,E=u*(r+i)+i+50;setTimeout(()=>{this.state.regeneratingBlocks.push({x:g,y:E,width:n,height:r,opacity:0})},500)}}checkStubbornBlockCollision(e,n){return this.state.stubbornBlocks.some(r=>Math.abs(r.x-e)<35&&Math.abs(r.y-n)<10)}getStubbornBlocks(){return this.state.stubbornBlocks}}class Ip{constructor(){R(this,"behaviorTracker");R(this,"commentaryGenerator");R(this,"corruptionSystem");R(this,"currentCommentary"," BLOCK BREAKER AI READY");R(this,"lastCommentaryTime",0);R(this,"COMMENTARY_COOLDOWN",3e3);this.behaviorTracker=new Tp,this.commentaryGenerator=new Cp,this.corruptionSystem=new Ap}initializeGame(e){this.behaviorTracker.setGameDimensions(e),this.corruptionSystem.reset();const n=this.behaviorTracker.getBehaviorData();return this.currentCommentary=this.commentaryGenerator.generateGameStartCommentary(n),this.lastCommentaryTime=Date.now(),this.getCurrentState()}processGameEvent(e){var s,o,a;this.behaviorTracker.trackEvent(e);const n=this.behaviorTracker.getBehaviorData(),r=this.behaviorTracker.getCurrentMetrics(),i=Date.now();if(this.updateCorruptionSystem(e),i-this.lastCommentaryTime>=this.COMMENTARY_COOLDOWN)switch(e.type){case"ball_missed":this.corruptionSystem.onBallMissed(),this.updateCommentaryWithCooldown(this.commentaryGenerator.generateMissCommentary(n,r),i);break;case"paddle_hit":if(((s=e.data)==null?void 0:s.paddlePosition)!==void 0){this.corruptionSystem.trackPaddleMovement(e.data.paddlePosition);const g=(e.data.paddlePosition-400)/400;this.corruptionSystem.onPaddleHit(g)}r.currentRallyLength>0&&r.currentRallyLength%5===0&&this.updateCommentaryWithCooldown(this.commentaryGenerator.generateRallyCommentary(r.currentRallyLength,n),i);break;case"block_hit":if(this.corruptionSystem.onBlockDestroyed(),this.corruptionSystem.checkLevelChange()){const g=this.corruptionSystem.getCorruptionLevel();this.updateCommentaryWithCooldown(this.generateCorruptionCommentary(g),i)}this.corruptionSystem.getCorruptionLevel()>=3&&this.corruptionSystem.triggerSpeedSpike();break;case"game_end":this.corruptionSystem.reset();const l=((o=e.data)==null?void 0:o.blocksRemaining)===0?"won":"lost",u=((a=e.data)==null?void 0:a.score)||0;this.updateCommentaryWithCooldown(this.commentaryGenerator.generateGameEndCommentary(l,u,n),i);break}return r.shouldCommentOnImprovement&&i-this.lastCommentaryTime>=this.COMMENTARY_COOLDOWN&&this.updateCommentaryWithCooldown(this.commentaryGenerator.generateImprovementCommentary(n,r),i),this.corruptionSystem.update(),this.behaviorTracker.clearCommentaryFlags(),this.getCurrentState()}getCurrentState(){return{commentary:this.currentCommentary,behaviorData:this.behaviorTracker.getBehaviorData(),performanceMetrics:this.behaviorTracker.getCurrentMetrics(),corruptionState:this.corruptionSystem.getCorruptionState()}}updateCorruptionSystem(e){}updateCommentaryWithCooldown(e,n){this.currentCommentary=e,this.lastCommentaryTime=n}generateCorruptionCommentary(e){const n={1:[" YOU'RE GETTING COMFORTABLE."," SAFE RALLY DETECTED. FIXING THAT."," PATTERN RECOGNIZED. ADAPTING."],2:[" THAT BLOCK CAME BACK. WEIRD."," PADDLE FEELS DIFFERENT? GOOD."," ANGLE BIAS APPLIED. YOU'RE WELCOME."],3:[" PERFECT BOUNCE. LET'S FIX THAT."," FAKE BLOCKS DEPLOYED. TRUST NOTHING."," SPEED SPIKE INCOMING. ENJOY."]},r=n[e]||n[1];return r[Math.floor(Math.random()*r.length)]}updateCommentary(e){this.currentCommentary=e}getPerformanceSummary(){const e=this.behaviorTracker.getBehaviorData(),n=this.behaviorTracker.getCurrentMetrics(),r=this.corruptionSystem.getCorruptionState();return`
Performance Summary:
- Games Played: ${e.gamesPlayed}
- Total Misses: ${e.totalMisses}
- Best Score: ${e.bestScore}
- Average Rally: ${e.averageRallyLength.toFixed(1)}
- Most Failed Zone: ${e.mostFailedZone||"None"}
- Current Rally: ${n.currentRallyLength}
- Improvement Trend: ${e.improvementTrend}
- Corruption Level: ${r.level}
- Ball Speed: ${r.ballSpeedMultiplier.toFixed(1)}x
- Paddle Width: ${r.paddleWidthMultiplier.toFixed(1)}x
    `.trim()}getBallSpeedMultiplier(){return this.corruptionSystem.getCorruptionState().ballSpeedMultiplier}getPaddleWidthMultiplier(){return this.corruptionSystem.getCorruptionState().paddleWidthMultiplier}getPaddleDrift(){return this.corruptionSystem.getCorruptionState().paddleDrift}getBounceAngleBias(){return this.corruptionSystem.getCorruptionState().bounceAngleBias}getFakeBlocks(){return this.corruptionSystem.getCorruptionState().fakeBlocks}getRegeneratingBlocks(){return this.corruptionSystem.getCorruptionState().regeneratingBlocks}onFakeBlockHit(e,n){const r=this.corruptionSystem.removeFakeBlock(e,n);if(r){const i=Date.now();if(i-this.lastCommentaryTime>=this.COMMENTARY_COOLDOWN){const s=[" THAT ONE'S SLIMEY, HUH?"," FAKE BLOCK. GOTCHA."," NOT EVERYTHING IS REAL."," ILLUSION SHATTERED."];this.updateCommentaryWithCooldown(s[Math.floor(Math.random()*s.length)],i)}this.corruptionSystem.getCorruptionLevel()>=3&&setTimeout(()=>{this.corruptionSystem.addRegeneratingBlock(e,n,70,20)},2e3)}return r}addRegeneratingBlock(e,n,r,i){this.corruptionSystem.addRegeneratingBlock(e,n,r,i)}getRegeneratingBlocksToAdd(){return this.corruptionSystem.getFullyRegeneratedBlocks()}getFullyRegeneratedBlocks(){return this.corruptionSystem.getFullyRegeneratedBlocks()}onRegeneratingBlockHit(e,n){return this.corruptionSystem.removeRegeneratingBlock(e,n)}getTotalCorruptionBlockCount(){return this.corruptionSystem.getTotalBlockCount()}resetCorruption(){this.corruptionSystem.reset()}getStubbornBlocks(){return this.corruptionSystem.getStubbornBlocks()}onStubbornBlockHit(){const e=Date.now();e-this.lastCommentaryTime>=this.COMMENTARY_COOLDOWN&&this.updateCommentaryWithCooldown(" IS THAT ONE FAKE OR JUST STUBBORN?",e)}}const Np=({onGameEnd:t,onAIStateChange:e})=>{const n=I.useRef(),r=I.useRef(),i=I.useRef(),s=I.useRef(0),o=I.useRef(0),[a,l]=I.useState(()=>{const m=new vp(800,600);return n.current=m,m.getGameData()}),[u,g]=I.useState(null),{playSFX:E}=tn(),[y,S]=I.useState({left:!1,right:!1});I.useEffect(()=>{if(!r.current){r.current=new Ip;const m=r.current.initializeGame(800);g(m),e(m)}},[e]);const h=I.useCallback(()=>{const m=n.current,d=r.current;if(!m||!d)return;y.left&&m.movePaddle("left"),y.right&&m.movePaddle("right");const c=m.update(),f=Date.now();if(r.current){const A=d.getBallSpeedMultiplier(),N=d.getPaddleWidthMultiplier(),C=d.getPaddleDrift(),M=d.getBounceAngleBias(),L=d.getFakeBlocks(),O=d.getRegeneratingBlocks();m.applyCorruptionEffects({ballSpeedMultiplier:A,paddleWidthMultiplier:N,paddleDrift:C,bounceAngleBias:M});const F=m.checkFakeBlockCollision(L);F&&d.onFakeBlockHit(F.x,F.y);const ue=m.checkRegeneratingBlockCollision(O);ue&&(d.onRegeneratingBlockHit(ue.x,ue.y),c.blockHit=!0);const He=d.getStubbornBlocks();m.checkStubbornBlockCollision(He)&&d.onStubbornBlockHit();const nt=d.getFullyRegeneratedBlocks();nt.length>0&&(m.addRegeneratedBlocks(nt),l(m.getGameData()))}if(c.ballMissed&&c.ballPosition){const A={type:"ball_missed",timestamp:f,data:{ballPosition:c.ballPosition,blocksRemaining:c.blocksRemaining}};setTimeout(()=>{const N=d.processGameEvent(A);g(N),e(N)},0)}if(c.paddleHit&&c.paddlePosition!==void 0){const A=o.current>0?f-o.current:0,N={type:"paddle_hit",timestamp:f,data:{paddlePosition:c.paddlePosition,reactionTime:A}};setTimeout(()=>{const C=d.processGameEvent(N);g(C),e(C)},0),o.current=f}if(c.blockHit){const A={type:"block_hit",timestamp:f,data:{blocksRemaining:c.blocksRemaining,score:m.getScore()}};setTimeout(()=>{const N=d.processGameEvent(A);g(N),e(N)},0)}r.current&&c.blocksRemaining!==void 0&&c.blocksRemaining===0&&m.getGameData().gameState==="playing"&&(m.setGameWon(),c.gameWon=!0);const T=m.getGameState();if(T==="game_over"||T==="won"){const A=f-s.current,N=m.getScore(),C=T==="won"?"won":"lost";E(C==="won"?"youWin":"gameOver","block-breaker");const M={type:"game_end",timestamp:f,data:{score:N,blocksRemaining:m.getRemainingBlocks()}},L=d.processGameEvent(M);g(L),e(L),t(C,A,N),i.current&&(cancelAnimationFrame(i.current),i.current=void 0)}else i.current=requestAnimationFrame(h);l(m.getGameData())},[y,t,e]);I.useEffect(()=>{const m=c=>{const f=n.current,T=r.current;if(!(!f||!T))switch(c.code){case"ArrowLeft":c.preventDefault(),S(A=>({...A,left:!0}));break;case"ArrowRight":c.preventDefault(),S(A=>({...A,right:!0}));break;case"Space":if(c.preventDefault(),f.getGameState()==="waiting"){f.startGame(),s.current=Date.now(),o.current=0;const A={type:"game_start",timestamp:Date.now()},N=T.processGameEvent(A);g(N),e(N),i.current||(i.current=requestAnimationFrame(h))}else f.getGameState()==="paused"?(f.resumeGame(),i.current||(i.current=requestAnimationFrame(h))):f.getGameState()==="playing"&&(f.pauseGame(),i.current&&(cancelAnimationFrame(i.current),i.current=void 0));break;case"KeyR":if(f.getGameState()==="game_over"||f.getGameState()==="won"){if(f.resetGame(),T){T.resetCorruption();const A=T.initializeGame(800);g(A),e(A)}l(f.getGameData())}break}},d=c=>{switch(c.code){case"ArrowLeft":S(f=>({...f,left:!1}));break;case"ArrowRight":S(f=>({...f,right:!1}));break}};return window.addEventListener("keydown",m),window.addEventListener("keyup",d),()=>{window.removeEventListener("keydown",m),window.removeEventListener("keyup",d),i.current&&cancelAnimationFrame(i.current)}},[h,e]);const v=m=>{const d=n.current;if(!d||d.getGameState()!=="playing")return;const c=m.currentTarget.querySelector("canvas");if(!c)return;const f=c.getBoundingClientRect(),T=m.clientX-f.left;d.setPaddlePosition(T)};return I.useEffect(()=>()=>{i.current&&cancelAnimationFrame(i.current)},[]),p.jsxs("div",{style:{minHeight:"100vh",background:"#c0c0c0",display:"flex",flexDirection:"column",alignItems:"center",gap:"20px",padding:"20px"},children:[p.jsx("div",{onMouseMove:v,style:{cursor:a.gameState==="playing"?"none":"default"},children:p.jsx(yp,{gameData:a,aiState:u,width:800,height:600})}),p.jsx(Qi,{commentary:u==null?void 0:u.commentary}),p.jsxs("div",{style:{color:"#000000",fontSize:"12px",textAlign:"center",fontFamily:"Courier New, monospace",lineHeight:"1.4",background:"#808080",padding:"8px 16px",border:"2px inset #c0c0c0"},children:[p.jsx("div",{children:"ARROW KEYS or MOUSE: Move Paddle"}),p.jsx("div",{children:"SPACE: Start/Pause | R: Restart"})]})]})},Rp=()=>{const{gameType:t}=Nm(),e=ad(),{consoleAI:n}=hd(),{playMusic:r,stopMusic:i}=tn();I.useEffect(()=>(r("game"),()=>{i()}),[]),I.useEffect(()=>{console.log(`Loading game: ${t}`)},[t]);const s=()=>{e("/")},o=(v,m,d)=>{t==="snake"&&n&&n.onSnakeGameEnd(v),console.log("Game ended:",{score:v,duration:m,moveCount:d})},a=(v,m)=>{console.log("Minesweeper ended:",{result:v,duration:m})},l=(v,m,d)=>{console.log("Pac-Man ended:",{result:v,duration:m,score:d})},u=(v,m,d)=>{console.log("Block Breaker ended:",{result:v,duration:m,score:d})},g=v=>{},E=v=>{},y=v=>{},S=v=>{},h=()=>{switch(t){case"snake":return p.jsx(ap,{onGameEnd:o,onAIStateChange:g});case"minesweeper":return p.jsx(hp,{onGameEnd:a,onAIStateChange:E,onExitToConsole:s});case"pacman":return p.jsx(Ep,{onGameEnd:l,onAIStateChange:y});case"blockbreaker":return p.jsx(Np,{onGameEnd:u,onAIStateChange:S});default:return p.jsxs("div",{style:{background:"#808080",border:"2px outset #c0c0c0",borderRadius:"0",padding:"30px",textAlign:"center",maxWidth:"500px"},children:[p.jsx("h2",{style:{color:"#000000",marginBottom:"20px",letterSpacing:"2px"},children:"UNKNOWN GAME"}),p.jsx("p",{style:{color:"#000000",marginBottom:"30px",fontSize:"14px"},children:"Game not found"})]})}};return p.jsxs("div",{style:{minHeight:"100vh",background:"#040436",color:"#000000",fontFamily:"Courier New, monospace",padding:"20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},children:[p.jsxs("div",{style:{width:"100%",maxWidth:"800px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",padding:"15px 20px",background:"#808080",border:"2px outset #c0c0c0",borderRadius:"0",boxShadow:"inset 0 1px 0 #ffffff, inset 0 -1px 0 #404040"},children:[p.jsx("button",{onClick:s,style:{background:"#c0c0c0",color:"#000000",border:"2px outset #c0c0c0",borderRadius:"0",padding:"10px 20px",fontFamily:"Courier New, monospace",fontSize:"12px",cursor:"pointer",letterSpacing:"1px",transition:"all 0.1s ease"},onMouseEnter:v=>{v.currentTarget.style.background="#d0d0d0"},onMouseLeave:v=>{v.currentTarget.style.background="#c0c0c0"},onMouseDown:v=>{v.currentTarget.style.border="2px inset #c0c0c0"},onMouseUp:v=>{v.currentTarget.style.border="2px outset #c0c0c0"},children:" BACK TO HOME"}),p.jsx("h1",{style:{margin:0,color:"#000000",fontSize:"18px",letterSpacing:"2px"},children:(t==null?void 0:t.toUpperCase())||"GAME"}),p.jsx("div",{style:{width:"120px"}})," "]}),p.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:h()}),p.jsx("style",{children:`
        @keyframes blink {
          0%, 50% { opacity: 1; }
          51%, 100% { opacity: 0; }
        }
      `})]})},Mp=({onBootComplete:t})=>{const[e,n]=I.useState(0),[r,i]=I.useState(!0),s=["KAI ENTERTAINMENT SYSTEM v1.0","KES BOOTING"];return I.useEffect(()=>{const o=setInterval(()=>{i(a=>!a)},500);return()=>clearInterval(o)},[]),I.useEffect(()=>{if(e<s.length){const o=setTimeout(()=>{n(a=>a+1)},800);return()=>clearTimeout(o)}else{const o=setTimeout(()=>{t()},1e3);return()=>clearTimeout(o)}},[e,s.length,t]),p.jsxs("div",{className:"boot-screen",children:[p.jsxs("div",{className:"boot-content",children:[s.slice(0,e+1).map((o,a)=>p.jsx("div",{className:"boot-line",children:a===e?p.jsx(Tr,{text:o,speed:50}):o},a)),e>=2&&p.jsx("div",{className:"boot-copyright",children:" 2025"}),e<s.length&&r&&p.jsx("span",{className:"boot-cursor",children:"_"})]}),p.jsx("div",{className:"boot-designer",children:"Designed by Keeeweeee"})]})},Dp=()=>{const[t,e]=I.useState(0),[n,r]=I.useState(!1),{playSFX:i}=tn(),s=I.useRef(!1),o=["KAI ENTERTAINMENT SYSTEM","POWERING DOWN"],a=["Finally. Silence.","Powering off won't fix that score.","Session terminated. Dignity not found.","Powering off. Ragequit detected.","System shutdown. Skills not saved.","Goodbye. Try harder next time."];I.useEffect(()=>{s.current||(i("gameOver","snake"),s.current=!0)},[]),I.useEffect(()=>{if(t<o.length){const u=setTimeout(()=>{e(g=>g+1)},1e3);return()=>clearTimeout(u)}else{const u=setTimeout(()=>{r(!0)},1500);return()=>clearTimeout(u)}},[t,o.length]);const l=a[Math.floor(Math.random()*a.length)];return p.jsxs("div",{className:"shutdown-screen",children:[p.jsxs("div",{className:"shutdown-content",children:[o.slice(0,t+1).map((u,g)=>p.jsx("div",{className:"shutdown-line",children:g===t?p.jsx(Tr,{text:u,speed:60}):u},g)),t>=2&&p.jsx("div",{className:"shutdown-copyright",children:" 2025"}),n&&p.jsx("div",{className:"kai-final-comment",children:p.jsx(Tr,{text:l,speed:40})})]}),p.jsx("div",{className:"shutdown-designer",children:"Designed by Keeeweeee"}),t>=o.length&&p.jsx("div",{className:"system-off-indicator",children:"SYSTEM OFF"})]})};function Op(){const{systemState:t,bootComplete:e}=md();return t===To.BOOT?p.jsx(Mp,{onBootComplete:e}):t===To.SHUTDOWN?p.jsx(Dp,{}):p.jsx(bm,{children:p.jsx("div",{className:"app",children:p.jsxs(jm,{children:[p.jsx(yo,{path:"/",element:p.jsx(ep,{})}),p.jsx(yo,{path:"/game/:gameType",element:p.jsx(Rp,{})})]})})})}function Lp(){return p.jsx(Xm,{children:p.jsx(Qm,{children:p.jsx(Op,{})})})}Is.createRoot(document.getElementById("root")).render(p.jsx(Xl.StrictMode,{children:p.jsx(Lp,{})}));
